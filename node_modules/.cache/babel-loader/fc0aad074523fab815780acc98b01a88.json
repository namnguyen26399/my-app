{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.splice.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\nimport constant from \"@/common/constant\";\nexport default {\n  name: \"UploadFileVue\",\n  components: {\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  props: {\n    parent: parent\n  },\n  watch: {\n    parent: function parent() {\n      this.files = [];\n    }\n  },\n  data: function data() {\n    return {\n      files: {},\n      isDragOver: false\n    };\n  },\n  computed: {},\n  mounted: function mounted() {},\n  methods: {\n    handleFile: function handleFile(files) {\n      this.files = Array.from(files.target.files);\n    },\n    onDrop: function onDrop(event) {\n      event.preventDefault();\n      this.isDragOver = false;\n\n      if (event.dataTransfer) {\n        this.files = Array.from(event.dataTransfer.files);\n      }\n    },\n    onDragEnd: function onDragEnd(event) {\n      event.preventDefault();\n      this.isDragOver = false;\n    },\n    onDragEnter: function onDragEnter(event) {\n      event.preventDefault();\n      this.isDragOver = true;\n    },\n    onDragLeave: function onDragLeave(event) {\n      event.preventDefault();\n      this.isDragOver = false;\n    },\n    onDragOver: function onDragOver(event) {\n      event.preventDefault();\n      this.isDragOver = true;\n    },\n    onClick: function onClick(event) {\n      event.preventDefault();\n      var files = document.getElementById(constant.keys.files);\n      files.click();\n    },\n    remove: function remove(file) {\n      var index = this.files.indexOf(file);\n      this.files.splice(index, 1);\n    },\n    upload: function upload() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response, _iterator, _step, file;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (_this.files) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                _context.prev = 2;\n                _iterator = _createForOfIteratorHelper(_this.files);\n                _context.prev = 4;\n\n                _iterator.s();\n\n              case 6:\n                if ((_step = _iterator.n()).done) {\n                  _context.next = 19;\n                  break;\n                }\n\n                file = _step.value;\n                _context.next = 10;\n                return globalService.uploadData_Async(administratorAPI.API_UploadFile365(), file, {\n                  parentId: _this.parent.id,\n                  userId: _this.userInfo.id\n                });\n\n              case 10:\n                response = _context.sent;\n\n                if (response) {\n                  _context.next = 13;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this.toastError(_this.$t(\"error.upload_file\")));\n\n              case 13:\n                if (response.state) {\n                  _context.next = 15;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this.toastError(response.message));\n\n              case 15:\n                _this.files = [];\n\n                _this.$emit(constant.keys.upload, true);\n\n              case 17:\n                _context.next = 6;\n                break;\n\n              case 19:\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](4);\n\n                _iterator.e(_context.t0);\n\n              case 24:\n                _context.prev = 24;\n\n                _iterator.f();\n\n                return _context.finish(24);\n\n              case 27:\n                _context.next = 32;\n                break;\n\n              case 29:\n                _context.prev = 29;\n                _context.t1 = _context[\"catch\"](2);\n\n                _this.toastError(_context.t1);\n\n              case 32:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 29], [4, 21, 24, 27]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;EACAA,qBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC;IAAAC;EAAA,CAHA;EAIAC;IACAD,MADA,oBACA;MACA;IACA;EAHA,CAJA;EASAE,IATA,kBASA;IACA;MACAC,SADA;MAEAC;IAFA;EAIA,CAdA;EAeAC,YAfA;EAgBAC,OAhBA,qBAgBA,EAhBA;EAiBAC;IACAC,UADA,sBACAL,KADA,EACA;MACA;IACA,CAHA;IAIAM,MAJA,kBAIAC,KAJA,EAIA;MACAA;MACA;;MACA;QACA;MACA;IACA,CAVA;IAWAC,SAXA,qBAWAD,KAXA,EAWA;MACAA;MACA;IACA,CAdA;IAeAE,WAfA,uBAeAF,KAfA,EAeA;MACAA;MACA;IACA,CAlBA;IAmBAG,WAnBA,uBAmBAH,KAnBA,EAmBA;MACAA;MACA;IACA,CAtBA;IAuBAI,UAvBA,sBAuBAJ,KAvBA,EAuBA;MACAA;MACA;IACA,CA1BA;IA2BAK,OA3BA,mBA2BAL,KA3BA,EA2BA;MACAA;MACA;MACAP;IACA,CA/BA;IAgCAa,MAhCA,kBAgCAC,IAhCA,EAgCA;MACA;MACA;IACA,CAnCA;IAoCAC,MApCA,oBAoCA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,WADA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;gBAAA,uCAMA,WANA;gBAAA;;gBAAA;;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;;gBAMAD,IANA;gBAAA;gBAAA,OAOAE,+BACAC,oCADA,EAEAH,IAFA,EAGA;kBACAI,yBADA;kBAEAC;gBAFA,CAHA,CAPA;;cAAA;gBAOAC,QAPA;;gBAAA,IAeAA,QAfA;kBAAA;kBAAA;gBAAA;;gBAAA,iCAgBA,+CAhBA;;cAAA;gBAAA,IAkBAA,cAlBA;kBAAA;kBAAA;gBAAA;;gBAAA,iCAmBA,kCAnBA;;cAAA;gBAqBA;;gBACA;;cAtBA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;;gBAAA;;gBAAA;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAyBA;;cAzBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA2BA;EA/DA;AAjBA","names":["name","components","VuePerfectScrollbar","props","parent","watch","data","files","isDragOver","computed","mounted","methods","handleFile","onDrop","event","onDragEnd","onDragEnter","onDragLeave","onDragOver","onClick","remove","file","upload","globalService","administratorAPI","parentId","userId","response"],"sourceRoot":"src/views/modules/administrator/FileManager","sources":["UploadFile.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<v-toolbar elevation=\"0\">\r\n\t\t\t<v-toolbar-title> {{ $t(\"title.upload_file\") }}</v-toolbar-title>\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</v-toolbar>\r\n\t\t<v-card-text>\r\n\t\t\t<v-container class=\"mt-4\">\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass=\"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md\"\r\n\t\t\t\t\t@drop=\"onDrop($event)\"\r\n\t\t\t\t\t@dragenter=\"onDragEnter($event)\"\r\n\t\t\t\t\t@dragleave=\"onDragLeave($event)\"\r\n\t\t\t\t\t@dragover=\"onDragOver($event)\"\r\n\t\t\t\t\t@dragend=\"onDragEnd($event)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div class=\"space-y-1 text-center\">\r\n\t\t\t\t\t\t<v-icon class=\"mx-auto h-12 w-12 text-gray-400\">\r\n\t\t\t\t\t\t\tmdi-file\r\n\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t<div class=\"flex text-sm text-gray-600\">\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor=\"files\"\r\n\t\t\t\t\t\t\t\tclass=\"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span>{{ $t(\"label.upload_file\") }}</span>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\tref=\"files\"\r\n\t\t\t\t\t\t\t\t\tid=\"files\"\r\n\t\t\t\t\t\t\t\t\tname=\"files\"\r\n\t\t\t\t\t\t\t\t\taccept=\".xlsx,.xls,image/*,.doc, .docx,.ppt, .pptx,.txt,.pdf\"\r\n\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\tclass=\"sr-only\"\r\n\t\t\t\t\t\t\t\t\t@change=\"handleFile($event)\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<p class=\"pl-1\">{{ $t(\"label.drag_and_drop\") }}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p class=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t{{ $t(\"label.upload_file_term\") }}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<VuePerfectScrollbar class=\"h-60\">\r\n\t\t\t\t\t<v-list>\r\n\t\t\t\t\t\t<v-list-item v-for=\"file in files\" :key=\"file.name\">\r\n\t\t\t\t\t\t\t<v-list-item-icon>\r\n\t\t\t\t\t\t\t\t<v-icon>\r\n\t\t\t\t\t\t\t\t\t{{ m_files_icon[file.type] }}\r\n\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t</v-list-item-icon>\r\n\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t{{ file.name }}\r\n\t\t\t\t\t\t\t\t\t<v-icon\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"red darken-2\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"remove(file)\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tmdi-delete-circle\r\n\t\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t</v-list>\r\n\t\t\t\t</VuePerfectScrollbar>\r\n\t\t\t</v-container>\r\n\t\t</v-card-text>\r\n\t\t<v-card-actions>\r\n\t\t\t<v-spacer> </v-spacer>\r\n\t\t\t<v-btn\r\n\t\t\t\televation=\"0\"\r\n\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\tdark\r\n\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t@click=\"upload()\"\r\n\t\t\t>\r\n\t\t\t\t<v-icon> mdi-upload </v-icon>\r\n\t\t\t\t{{ $t(\"button.ok\") }}\r\n\t\t\t</v-btn>\r\n\t\t\t<v-btn\r\n\t\t\t\televation=\"0\"\r\n\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t@click=\"closeDialog\"\r\n\t\t\t>\r\n\t\t\t\t{{ $t(\"button.cancel\") }}\r\n\t\t\t</v-btn>\r\n\t\t</v-card-actions>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nimport constant from \"@/common/constant\";\r\nexport default {\r\n\tname: \"UploadFileVue\",\r\n\tcomponents: { VuePerfectScrollbar },\r\n\tprops: { parent },\r\n\twatch: {\r\n\t\tparent() {\r\n\t\t\tthis.files = [];\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfiles: {},\r\n\t\t\tisDragOver: false,\r\n\t\t};\r\n\t},\r\n\tcomputed: {},\r\n\tmounted() {},\r\n\tmethods: {\r\n\t\thandleFile(files) {\r\n\t\t\tthis.files = Array.from(files.target.files);\r\n\t\t},\r\n\t\tonDrop(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.isDragOver = false;\r\n\t\t\tif (event.dataTransfer) {\r\n\t\t\t\tthis.files = Array.from(event.dataTransfer.files);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDragEnd(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.isDragOver = false;\r\n\t\t},\r\n\t\tonDragEnter(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.isDragOver = true;\r\n\t\t},\r\n\t\tonDragLeave(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.isDragOver = false;\r\n\t\t},\r\n\t\tonDragOver(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tthis.isDragOver = true;\r\n\t\t},\r\n\t\tonClick(event) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tlet files = document.getElementById(constant.keys.files);\r\n\t\t\tfiles.click();\r\n\t\t},\r\n\t\tremove(file) {\r\n\t\t\tlet index = this.files.indexOf(file);\r\n\t\t\tthis.files.splice(index, 1);\r\n\t\t},\r\n\t\tasync upload() {\r\n\t\t\tif (!this.files) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tfor (let file of this.files) {\r\n\t\t\t\t\tresponse = await globalService.uploadData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_UploadFile365(),\r\n\t\t\t\t\t\tfile,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tparentId: this.parent.id,\r\n\t\t\t\t\t\t\tuserId: this.userInfo.id,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"error.upload_file\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!response.state) {\r\n\t\t\t\t\t\treturn this.toastError(response.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.files = [];\r\n\t\t\t\t\tthis.$emit(constant.keys.upload, true);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}