{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport moment from \"moment\";\nexport default {\n  props: {\n    editedItem: {}\n  },\n  data: function data() {\n    return {\n      user_current: this.getUserInfo(),\n      dateFormat: \"DD/MM/yyyy\",\n      showModifyDatePicker: false,\n      m_editedItem: {\n        createdDate: new Date(),\n        createdName: \"\",\n        createdOrgName: \"\",\n        createdRankName: \"\",\n        id: null,\n        isActive: false,\n        expiryDate: null,\n        isCustomerSign: false,\n        isDelete: false,\n        link: \"\",\n        modifiedName: \"\",\n        modifiedate: null,\n        numberDownload: 0,\n        numberPrint: 0,\n        numberView: 0,\n        oPTCode: \"\",\n        requestData: null\n      }\n    };\n  },\n  watch: {\n    editedItem: function editedItem(value) {\n      this.m_editedItem = value;\n    }\n  },\n  created: function created() {\n    this.m_editedItem = this.editedItem;\n  },\n  computed: {\n    formatModifyDateFns: function formatModifyDateFns() {\n      return this.m_editedItem.expiryDate ? moment(this.m_editedItem.expiryDate).format(this.dateFormat) : \"\";\n    }\n  },\n  methods: {\n    save: function save() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(\"save\", _this.m_editedItem);\n                _this.m_editedItem.expiryDate = moment(_this.m_editedItem.expiryDate).toDate();\n                _this.modifiedName = _this.user_current.fullName;\n                _this.modifiedDDate = new Date();\n                _context.next = 6;\n                return globalService.putData_Async(administratorAPI.API_UpdateOTP(_this.m_editedItem.id), _this.m_editedItem);\n\n              case 6:\n                response = _context.sent;\n\n                if (!(!response || !response.state)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this.toastError(_this.$t(\"message.update_error\")));\n\n              case 9:\n                _this.toastSuccess(_this.$t(\"message.update_success\"));\n\n                console.log(\"res\", response);\n\n                _this.closeDialog();\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;EACAA;IAAAC;EAAA,CADA;EAEAC,IAFA,kBAEA;IACA;MACAC,gCADA;MAEAC,wBAFA;MAGAC,2BAHA;MAIAC;QACAC,uBADA;QAEAC,eAFA;QAGAC,kBAHA;QAIAC,mBAJA;QAKAC,QALA;QAMAC,eANA;QAOAC,gBAPA;QAQAC,qBARA;QASAC,eATA;QAUAC,QAVA;QAWAC,gBAXA;QAYAC,iBAZA;QAaAC,iBAbA;QAcAC,cAdA;QAeAC,aAfA;QAgBAC,WAhBA;QAiBAC;MAjBA;IAJA;EAwBA,CA3BA;EA4BAC;IACAvB,UADA,sBACAwB,KADA,EACA;MACA;IACA;EAHA,CA5BA;EAiCAC,OAjCA,qBAiCA;IACA;EACA,CAnCA;EAoCAC;IACAC,mBADA,iCACA;MACA,sCACAC,4DADA,GAEA,EAFA;IAGA;EALA,CApCA;EA2CAC;IACAC,IADA,kBACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACA,uCACA,6BADA,EAEAC,MAFA;gBAGA;gBACA;gBANA;gBAAA,OAOAC,4BACAC,qDADA,EAEA,kBAFA,CAPA;;cAAA;gBAOAC,QAPA;;gBAAA,MAWA,4BAXA;kBAAA;kBAAA;gBAAA;;gBAAA,iCAYA,kDAZA;;cAAA;gBAaA;;gBACAJ;;gBACA;;cAfA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAgBA;EAjBA;AA3CA","names":["props","editedItem","data","user_current","dateFormat","showModifyDatePicker","m_editedItem","createdDate","createdName","createdOrgName","createdRankName","id","isActive","expiryDate","isCustomerSign","isDelete","link","modifiedName","modifiedate","numberDownload","numberPrint","numberView","oPTCode","requestData","watch","value","created","computed","formatModifyDateFns","moment","methods","save","console","toDate","globalService","administratorAPI","response"],"sourceRoot":"src/views/modules/administrator/OTP","sources":["CreateOTP.vue"],"sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<v-toolbar>\r\n\t\t\t<v-toolbar-title> Chỉnh sửa mã OTP </v-toolbar-title>\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</v-toolbar>\r\n\t\t<v-card-text>\r\n\t\t\t<v-container>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t<v-menu\r\n\t\t\t\t\t\t\tv-model=\"showModifyDatePicker\"\r\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\r\n\t\t\t\t\t\t\tmax-width=\"290\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t:value=\"formatModifyDateFns\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.expire_date')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\t\t@click:clear=\"\r\n\t\t\t\t\t\t\t\t\t\tm_editedItem.expiryDate = null\r\n\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.expiryDate\"\r\n\t\t\t\t\t\t\t\t@change=\"showModifyDatePicker = false\"\r\n\t\t\t\t\t\t\t\tno-title\r\n\t\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\t></v-date-picker>\r\n\t\t\t\t\t\t</v-menu>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t:label=\"$t('label.is_active')\"\r\n\t\t\t\t\t\t\tv-model=\"m_editedItem.isActive\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</v-checkbox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t</v-container>\r\n\t\t</v-card-text>\r\n\t\t<v-card-actions class=\"white\">\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn color=\"error\" dark @click=\"closeDialog\" class=\"rounded-pill\">\r\n\t\t\t\t<v-icon>mdi-close </v-icon>\r\n\t\t\t\t{{ $t(\"button.close\") }}\r\n\t\t\t</v-btn>\r\n\t\t\t<v-btn\r\n\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\tdark\r\n\t\t\t\t@click=\"save\"\r\n\t\t\t\tclass=\"rounded-pill\"\r\n\t\t\t>\r\n\t\t\t\t<v-icon>mdi-content-save</v-icon>\r\n\t\t\t\t{{ $t(\"button.save\") }}\r\n\t\t\t</v-btn>\r\n\t\t</v-card-actions>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nimport moment from \"moment\";\r\nexport default {\r\n\tprops: { editedItem: {} },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuser_current: this.getUserInfo(),\r\n\t\t\tdateFormat: \"DD/MM/yyyy\",\r\n\t\t\tshowModifyDatePicker: false,\r\n\t\t\tm_editedItem: {\r\n\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tcreatedOrgName: \"\",\r\n\t\t\t\tcreatedRankName: \"\",\r\n\t\t\t\tid: null,\r\n\t\t\t\tisActive: false,\r\n\t\t\t\texpiryDate: null,\r\n\t\t\t\tisCustomerSign: false,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tlink: \"\",\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tmodifiedate: null,\r\n\t\t\t\tnumberDownload: 0,\r\n\t\t\t\tnumberPrint: 0,\r\n\t\t\t\tnumberView: 0,\r\n\t\t\t\toPTCode: \"\",\r\n\t\t\t\trequestData: null,\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\teditedItem(value) {\r\n\t\t\tthis.m_editedItem = value;\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.m_editedItem = this.editedItem;\r\n\t},\r\n\tcomputed: {\r\n\t\tformatModifyDateFns() {\r\n\t\t\treturn this.m_editedItem.expiryDate\r\n\t\t\t\t? moment(this.m_editedItem.expiryDate).format(this.dateFormat)\r\n\t\t\t\t: \"\";\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tasync save() {\r\n\t\t\tconsole.log(\"save\", this.m_editedItem);\r\n\t\t\tthis.m_editedItem.expiryDate = moment(\r\n\t\t\t\tthis.m_editedItem.expiryDate,\r\n\t\t\t).toDate();\r\n\t\t\tthis.modifiedName = this.user_current.fullName;\r\n\t\t\tthis.modifiedDDate = new Date();\r\n\t\t\tlet response = await globalService.putData_Async(\r\n\t\t\t\tadministratorAPI.API_UpdateOTP(this.m_editedItem.id),\r\n\t\t\t\tthis.m_editedItem,\r\n\t\t\t);\r\n\t\t\tif (!response || !response.state)\r\n\t\t\t\treturn this.toastError(this.$t(\"message.update_error\"));\r\n\t\t\tthis.toastSuccess(this.$t(\"message.update_success\"));\r\n\t\t\tconsole.log(\"res\", response);\r\n\t\t\tthis.closeDialog();\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}