{"ast":null,"code":"import _typeof from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.trim.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\nimport RequestTypeDto from \"@/models/request-type.dto\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nexport default {\n  name: \"EditRequestTypeVue\",\n  components: {\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  data: function data() {\n    return {\n      requestTypeDto: RequestTypeDto,\n      errorMessageRequestGroup: \"\",\n      formError: false,\n      isSaving: false,\n      errorMessage: \"\",\n      errorMessageDes: \"\",\n      defaultItem: {\n        created: null,\n        createdDate: new Date(),\n        createdName: \"\",\n        description: \"\",\n        id: null,\n        isActive: true,\n        isDelete: false,\n        modified: null,\n        modifiedDate: new Date(),\n        modifiedName: \"\",\n        numberRequest: 0,\n        numberRequestData: 0,\n        requestGroup: null,\n        requestTypeCode: \"\",\n        requestTypeName: \"\",\n        tennant: null,\n        tennantCode: \"\",\n        tennantName: \"\"\n      },\n      requestGroups: []\n    };\n  },\n  mounted: function mounted() {\n    this.requestTypeDto = Object.assign({}, RequestTypeDto);\n    this.$Progress.finish();\n  },\n  computed: {\n    form: function form() {\n      return {\n        requestTypeName: this.requestTypeDto.requestTypeName\n      };\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.$Progress.start();\n\n              _this._requestGroups();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    _requestGroups: function _requestGroups() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestGroup());\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(!response || !response.state)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 6:\n                _this2.requestGroups = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _this2.requestGroups = _this2.sortList(_this2.requestGroups);\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n                return _context2.abrupt(\"return\", []);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 10]]);\n      }))();\n    },\n    close: function close() {\n      this.requestTypeDto = Object.assign({}, this.defaultItem);\n      this.errorMessage = \"\";\n      this.errorMessageDes = \"\";\n      this.errorMessageRequestGroup = \"\";\n      this.$emit(\"close\", true);\n    },\n    _save: function _save() {\n      this.$emit(\"save\", this.requestTypeDto);\n    },\n    onKeyUp: function onKeyUp() {\n      if (this.requestTypeDto.requestTypeName != \"\" || this.requestTypeDto.requestTypeName.length < 255) {\n        this.errorMessage = \"\";\n      }\n\n      if (this.requestTypeDto.requestTypeName.length > 255) {\n        this.errorMessage = this.$t(\"message.maxlength_required_255\");\n      }\n    },\n    onKeyUpDes: function onKeyUpDes() {\n      if (this.requestTypeDto.description != \"\" || this.requestTypeDto.description.length < 255) {\n        this.errorMessageDes = \"\";\n      }\n\n      if (this.requestTypeDto.description.length > 255) {\n        this.errorMessageDes = this.$t(\"message.maxlength_required_255\");\n      }\n    },\n    selectRequestGroup: function selectRequestGroup(item) {\n      this.requestTypeDto.requestGroup = item;\n\n      if (_typeof(this.requestTypeDto.requestGroup) == \"object\") {\n        this.errorMessageRequestGroup = \"\";\n      }\n    },\n    clickListRG: function clickListRG() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _this3._requestGroups();\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    changeRG: function changeRG() {},\n    save: function save() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var _i, _Object$keys, key, response;\n\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this4.formErrorMaxLength = false;\n                _this4.formError = false;\n\n                for (_i = 0, _Object$keys = Object.keys(_this4.form); _i < _Object$keys.length; _i++) {\n                  key = _Object$keys[_i];\n\n                  if (!_this4.form[key] || _this4.form[key].trim().length == 0) {\n                    _this4.formError = true;\n\n                    _this4.$refs[key].focus();\n                  }\n\n                  if (_this4.form[key].trim().length > 255) {\n                    _this4.formErrorMaxLength = true;\n\n                    _this4.$refs[key].focus();\n                  }\n\n                  _this4.$refs[key].validate();\n                }\n\n                if (!_this4.formError) {\n                  _context4.next = 5;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.errorMessage = _this4.$t(\"message.msg_1\"));\n\n              case 5:\n                if (!_this4.formErrorMaxLength) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.errorMessage = _this4.$t(\"message.maxlength_required_255\"));\n\n              case 7:\n                if (!(_this4.requestTypeDto.description.length > 255)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.errorMessageDes = _this4.$t(\"message.maxlength_required_255\"));\n\n              case 9:\n                if (!_this4.isSaving) {\n                  _context4.next = 11;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 11:\n                if (!(!_this4.requestTypeDto.requestGroup || _typeof(_this4.requestTypeDto.requestGroup) != \"object\")) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.errorMessageRequestGroup = _this4.$t(\"error.please_fill_form\"));\n\n              case 13:\n                _this4.isSaving = true;\n                _this4.requestTypeDto.requestTypeName = _this4.requestTypeDto.requestTypeName.trim();\n\n                if (!_this4.requestTypeDto.id) {\n                  _this4.requestTypeDto.created = _this4.getUserInfo();\n                  _this4.requestTypeDto.createdName = _this4.getUserInfo().fullName;\n                  _this4.requestTypeDto.createdDate = new Date();\n                }\n\n                _this4.requestTypeDto.modified = _this4.getUserInfo();\n                _this4.requestTypeDto.modifiedName = _this4.getUserInfo().fullName;\n                _this4.requestTypeDto.modifiedDate = new Date();\n                _context4.prev = 19;\n                _context4.next = 22;\n                return globalService.postData_Async(administratorAPI.API_CreateRequestType(), _this4.requestTypeDto);\n\n              case 22:\n                response = _context4.sent;\n\n                if (response) {\n                  _context4.next = 25;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.toastError(_this4.$t(\"error.save\")));\n\n              case 25:\n                if (response.state) {\n                  _context4.next = 27;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.toastError(response.message));\n\n              case 27:\n                if (response) {\n                  _this4.toastSuccess(_this4.$t(\"message.msg_3\"));\n                }\n\n                _this4.requestTypeDto = response.data;\n                _this4.isSaving = false;\n\n                _this4._save();\n\n                _this4.close();\n\n                _context4.next = 37;\n                break;\n\n              case 34:\n                _context4.prev = 34;\n                _context4.t0 = _context4[\"catch\"](19);\n\n                _this4.toastError(_context4.t0);\n\n              case 37:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[19, 34]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","VuePerfectScrollbar","data","requestTypeDto","errorMessageRequestGroup","formError","isSaving","errorMessage","errorMessageDes","defaultItem","created","createdDate","createdName","description","id","isActive","isDelete","modified","modifiedDate","modifiedName","numberRequest","numberRequestData","requestGroup","requestTypeCode","requestTypeName","tennant","tennantCode","tennantName","requestGroups","mounted","computed","form","methods","_requestGroups","globalService","administratorAPI","response","close","_save","onKeyUp","onKeyUpDes","selectRequestGroup","item","clickListRG","changeRG","save","key"],"sourceRoot":"src/views/modules/administrator/RequestType","sources":["EditRequestType.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<VuePerfectScrollbar>\r\n\t\t\t<v-card ref=\"form\"\r\n\t\t\t\t><v-card-title>\r\n\t\t\t\t\t<span class=\"text-h5\">{{\r\n\t\t\t\t\t\t$t(\"title.create_type_request\")\r\n\t\t\t\t\t}}</span>\r\n\t\t\t\t</v-card-title>\r\n\t\t\t\t<v-card-text>\r\n\t\t\t\t\t<v-container>\r\n\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\tref=\"requestTypeName\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"requestTypeDto.requestTypeName\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t@keyup=\"onKeyUp\"\r\n\t\t\t\t\t\t\t\t\t:error-messages=\"errorMessage\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t\t\t{{ $t(\"label.request_type_name\") }}\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-red\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"label.star\") }}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t</v-text-field>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t\t\t<v-textarea\r\n\t\t\t\t\t\t\t\t\tv-model=\"requestTypeDto.description\"\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.description')\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t@keyup=\"onKeyUpDes\"\r\n\t\t\t\t\t\t\t\t\t:error-messages=\"errorMessageDes\"\r\n\t\t\t\t\t\t\t\t></v-textarea>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t<v-col cols=\"12\" sm=\"12\" md=\"12\">\r\n\t\t\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\t\t\tref=\"requestGroup\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"requestTypeDto.requestGroup\"\r\n\t\t\t\t\t\t\t\t\t:items=\"requestGroups\"\r\n\t\t\t\t\t\t\t\t\titem-text=\"requestGroupName\"\r\n\t\t\t\t\t\t\t\t\t:item-value=\"(x) => x\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t:error-messages=\"errorMessageRequestGroup\"\r\n\t\t\t\t\t\t\t\t\t@click=\"clickListRG\"\r\n\t\t\t\t\t\t\t\t\tmaxLength=\"255\"\r\n\t\t\t\t\t\t\t\t\t@change=\"changeRG\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t\t\t{{ $t(\"label.request_group\") }}\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"text-red\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ $t(\"label.star\") }}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t<template v-slot:item=\"{ item }\">\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item\r\n\t\t\t\t\t\t\t\t\t\t\t@click=\"selectRequestGroup(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"m-1\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<v-avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"indigo mr-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"36\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.requestGroupName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-html=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.requestGroupName\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t<template\r\n\t\t\t\t\t\t\t\t\t\tv-slot:selection=\"{ attrs, item }\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"!!item && !!item.id\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"indigo mr-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"36\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.requestGroupName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ item.requestGroupName }}\r\n\t\t\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t<v-col cols=\"12\" sm=\"12\" md=\"12\">\r\n\t\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\t\tv-model=\"requestTypeDto.isActive\"\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.is_active')\"\r\n\t\t\t\t\t\t\t\t></v-checkbox>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t</v-container>\r\n\t\t\t\t</v-card-text>\r\n\t\t\t\t<v-card-actions>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t\tclass=\"rounded-0 mr-2\"\r\n\t\t\t\t\t\t@click=\"save()\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ $t(\"button.ok\") }}\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t\t@click=\"close()\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ $t(\"button.cancel\") }}\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-card-actions>\r\n\t\t\t</v-card>\r\n\t\t</VuePerfectScrollbar>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nimport RequestTypeDto from \"@/models/request-type.dto\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nexport default {\r\n\tname: \"EditRequestTypeVue\",\r\n\tcomponents: { VuePerfectScrollbar },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trequestTypeDto: RequestTypeDto,\r\n\t\t\terrorMessageRequestGroup: \"\",\r\n\t\t\tformError: false,\r\n\t\t\tisSaving: false,\r\n\t\t\terrorMessage: \"\",\r\n\t\t\terrorMessageDes: \"\",\r\n\t\t\tdefaultItem: {\r\n\t\t\t\tcreated: null,\r\n\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tid: null,\r\n\t\t\t\tisActive: true,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tmodified: null,\r\n\t\t\t\tmodifiedDate: new Date(),\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tnumberRequest: 0,\r\n\t\t\t\tnumberRequestData: 0,\r\n\t\t\t\trequestGroup: null,\r\n\t\t\t\trequestTypeCode: \"\",\r\n\t\t\t\trequestTypeName: \"\",\r\n\t\t\t\ttennant: null,\r\n\t\t\t\ttennantCode: \"\",\r\n\t\t\t\ttennantName: \"\",\r\n\t\t\t},\r\n\t\t\trequestGroups: [],\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.requestTypeDto = Object.assign({}, RequestTypeDto);\r\n\t\tthis.$Progress.finish();\r\n\t},\r\n\tcomputed: {\r\n\t\tform() {\r\n\t\t\treturn {\r\n\t\t\t\trequestTypeName: this.requestTypeDto.requestTypeName,\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n\tasync created() {\r\n\t\tthis.$Progress.start();\r\n\t\tthis._requestGroups();\r\n\t},\r\n\tmethods: {\r\n\t\tasync _requestGroups() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestGroup(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tthis.requestGroups = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tthis.requestGroups = this.sortList(this.requestGroups);\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tclose() {\r\n\t\t\tthis.requestTypeDto = Object.assign({}, this.defaultItem);\r\n\t\t\tthis.errorMessage = \"\";\r\n\t\t\tthis.errorMessageDes = \"\";\r\n\t\t\tthis.errorMessageRequestGroup = \"\";\r\n\t\t\tthis.$emit(\"close\", true);\r\n\t\t},\r\n\t\t_save() {\r\n\t\t\tthis.$emit(\"save\", this.requestTypeDto);\r\n\t\t},\r\n\r\n\t\tonKeyUp() {\r\n\t\t\tif (\r\n\t\t\t\tthis.requestTypeDto.requestTypeName != \"\" ||\r\n\t\t\t\tthis.requestTypeDto.requestTypeName.length < 255\r\n\t\t\t) {\r\n\t\t\t\tthis.errorMessage = \"\";\r\n\t\t\t}\r\n\t\t\tif (this.requestTypeDto.requestTypeName.length > 255) {\r\n\t\t\t\tthis.errorMessage = this.$t(\"message.maxlength_required_255\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyUpDes() {\r\n\t\t\tif (\r\n\t\t\t\tthis.requestTypeDto.description != \"\" ||\r\n\t\t\t\tthis.requestTypeDto.description.length < 255\r\n\t\t\t) {\r\n\t\t\t\tthis.errorMessageDes = \"\";\r\n\t\t\t}\r\n\t\t\tif (this.requestTypeDto.description.length > 255) {\r\n\t\t\t\tthis.errorMessageDes = this.$t(\r\n\t\t\t\t\t\"message.maxlength_required_255\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectRequestGroup(item) {\r\n\t\t\tthis.requestTypeDto.requestGroup = item;\r\n\t\t\tif (typeof this.requestTypeDto.requestGroup == \"object\") {\r\n\t\t\t\tthis.errorMessageRequestGroup = \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync clickListRG() {\r\n\t\t\tawait this._requestGroups();\r\n\t\t},\r\n\t\tchangeRG() {},\r\n\t\tasync save() {\r\n\t\t\tthis.formErrorMaxLength = false;\r\n\t\t\tthis.formError = false;\r\n\t\t\tfor (let key of Object.keys(this.form)) {\r\n\t\t\t\tif (!this.form[key] || this.form[key].trim().length == 0) {\r\n\t\t\t\t\tthis.formError = true;\r\n\t\t\t\t\tthis.$refs[key].focus();\r\n\t\t\t\t}\r\n\t\t\t\tif (this.form[key].trim().length > 255) {\r\n\t\t\t\t\tthis.formErrorMaxLength = true;\r\n\t\t\t\t\tthis.$refs[key].focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs[key].validate();\r\n\t\t\t}\r\n\t\t\tif (this.formError) {\r\n\t\t\t\treturn (this.errorMessage = this.$t(\"message.msg_1\"));\r\n\t\t\t}\r\n\t\t\tif (this.formErrorMaxLength) {\r\n\t\t\t\treturn (this.errorMessage = this.$t(\r\n\t\t\t\t\t\"message.maxlength_required_255\",\r\n\t\t\t\t));\r\n\t\t\t}\r\n\t\t\tif (this.requestTypeDto.description.length > 255) {\r\n\t\t\t\treturn (this.errorMessageDes = this.$t(\r\n\t\t\t\t\t\"message.maxlength_required_255\",\r\n\t\t\t\t));\r\n\t\t\t}\r\n\t\t\tif (this.isSaving) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t!this.requestTypeDto.requestGroup ||\r\n\t\t\t\ttypeof this.requestTypeDto.requestGroup != \"object\"\r\n\t\t\t) {\r\n\t\t\t\treturn (this.errorMessageRequestGroup = this.$t(\r\n\t\t\t\t\t\"error.please_fill_form\",\r\n\t\t\t\t));\r\n\t\t\t}\r\n\t\t\tthis.isSaving = true;\r\n\t\t\tlet response;\r\n\t\t\tthis.requestTypeDto.requestTypeName =\r\n\t\t\t\tthis.requestTypeDto.requestTypeName.trim();\r\n\t\t\tif (!this.requestTypeDto.id) {\r\n\t\t\t\tthis.requestTypeDto.created = this.getUserInfo();\r\n\t\t\t\tthis.requestTypeDto.createdName = this.getUserInfo().fullName;\r\n\t\t\t\tthis.requestTypeDto.createdDate = new Date();\r\n\t\t\t}\r\n\t\t\tthis.requestTypeDto.modified = this.getUserInfo();\r\n\t\t\tthis.requestTypeDto.modifiedName = this.getUserInfo().fullName;\r\n\t\t\tthis.requestTypeDto.modifiedDate = new Date();\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\tadministratorAPI.API_CreateRequestType(),\r\n\t\t\t\t\tthis.requestTypeDto,\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.save\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn this.toastError(response.message);\r\n\t\t\t\t}\r\n\t\t\t\tif (response) {\r\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.msg_3\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis.requestTypeDto = response.data;\r\n\t\t\t\tthis.isSaving = false;\r\n\t\t\t\tthis._save();\r\n\t\t\t\tthis.close();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.v-menu__content {\r\n\tbackground: white;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}