{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../../administrator/administrator.api\";\nexport default {\n  name: \"VSMFEUserInfosRequestData\",\n  data: function data() {\n    var _this = this;\n\n    return {\n      listUserInfos: [],\n      headers: [{\n        text: \"Họ và tên \",\n        value: \"fullName\",\n        sortable: false,\n        filter: function filter(value) {\n          if (!_this.fullName) return true;\n          if (!value) return;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.fullName).toLocaleUpperCase());\n        }\n      }, {\n        text: \"Chức Danh\",\n        value: \"ranks\",\n        filter: function filter(value) {\n          if (!_this.ranks) return true;\n          if (!value) return;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.ranks).toLocaleUpperCase());\n        }\n      }, {\n        text: \"Bộ phận\",\n        value: \"organizations\",\n        filter: function filter(value) {\n          if (_this.organizations == _this.$t(\"label.show_all\")) return true;\n          return value.filter(function (entry) {\n            return entry.organizationName.includes(_this.organizations);\n          }).length;\n        }\n      }],\n      items: [],\n      search: \"\",\n      singleSelect: false,\n      selected: [],\n      fullName: \"\",\n      rankName: \"\",\n      listOrganization: [],\n      organizations: this.$t(\"label.show_all\")\n    };\n  },\n  mounted: function mounted() {\n    this.GetAllUser();\n    this.getAllOrganzation();\n  },\n  methods: {\n    close: function close() {\n      this.$emit(\"close\", true);\n    },\n    GetAllUser: function GetAllUser() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllUserInfos());\n\n              case 3:\n                response = _context.sent;\n\n                if (!(!response || !response.state)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", []);\n\n              case 6:\n                _this2.listUserInfos = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                console.log(\"response\", response);\n                console.log(\"this.listUserInfos\", _this2.listUserInfos);\n                _context.next = 15;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n\n                _this2.toastError(_context.t0);\n\n                return _context.abrupt(\"return\");\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 11]]);\n      }))();\n    },\n    getAllOrganzation: function getAllOrganzation() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_FindAllOrganization());\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(!response || !response.state)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 6:\n                _this3.listOrganization = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                _this3.toastError(_context2.t0);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      }))();\n    },\n    customFilter: function customFilter(value, search, item) {\n      return !!search && this.match(item, search.trim().replace(/\\s+/g, \" \"));\n    },\n    Save: function Save() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _this4.$emit(\"save\", _this4.selected);\n\n              case 2:\n                _context3.next = 4;\n                return _this4.$emit(\"close\", true);\n\n              case 4:\n                _this4.selected = [];\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgHA;AACA;AAEA;EACAA,iCADA;EAGAC,IAHA,kBAGA;IAAA;;IACA;MACAC,iBADA;MAEAC,UACA;QACAC,kBADA;QAEAC,iBAFA;QAGAC,eAHA;QAKAC;UACA;UACA;UACA,wCACAC,iBADA,GAEAC,QAFA,CAGA,0BACA,cADA,EAEAD,iBAFA,EAHA;QAOA;MAfA,CADA,EAkBA;QACAJ,iBADA;QAEAC,cAFA;QAIAE;UACA;UACA;UACA,wCACAC,iBADA,GAEAC,QAFA,CAGA,0BACA,WADA,EAEAD,iBAFA,EAHA;QAOA;MAdA,CAlBA,EAmCA;QACAJ,eADA;QAEAC,sBAFA;QAIAE;UACA,uDACA;UACA;YACA,uCACA,mBADA;UAGA,CAJA,EAIAG,MAJA;QAKA;MAZA,CAnCA,CAFA;MAoDAC,SApDA;MAqDAC,UArDA;MAsDAC,mBAtDA;MAuDAC,YAvDA;MAwDAC,YAxDA;MAyDAC,YAzDA;MA0DAC,oBA1DA;MA2DAC;IA3DA;EA6DA,CAjEA;EAmEAC,OAnEA,qBAmEA;IACA;IACA;EACA,CAtEA;EAwEAC;IACAC,KADA,mBACA;MACA;IACA,CAHA;IAIAC,UAJA,wBAIA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAC,4BACAC,sCADA,CAHA;;cAAA;gBAGAC,QAHA;;gBAAA,MAMA,4BANA;kBAAA;kBAAA;gBAAA;;gBAAA,iCAOA,EAPA;;cAAA;gBASA;kBACA;gBACA,CAFA;gBAGAC;gBACAA;gBAbA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAeA;;gBAfA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAkBA,CAtBA;IAuBAC,iBAvBA,+BAuBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAJ,4BACAC,0CADA,CAFA;;cAAA;gBAEAC,QAFA;;gBAAA,MAKA,4BALA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAMA;kBACA;gBACA,CAFA;gBANA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAUA;;cAVA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAYA,CAnCA;IAoCAG,YApCA,wBAoCAvB,KApCA,EAoCAO,MApCA,EAoCAiB,IApCA,EAoCA;MACA,OACA,gEADA;IAGA,CAxCA;IAyCAC,IAzCA,kBAyCA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,qCADA;;cAAA;gBAAA;gBAAA,OAEA,2BAFA;;cAAA;gBAGA;;cAHA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAIA;EA7CA;AAxEA","names":["name","data","listUserInfos","headers","text","value","sortable","filter","toLocaleUpperCase","includes","length","items","search","singleSelect","selected","fullName","rankName","listOrganization","organizations","mounted","methods","close","GetAllUser","globalService","administratorAPI","response","console","getAllOrganzation","customFilter","item","Save"],"sourceRoot":"src/views/modules/khai-phieu-yeu-cau/RequestForm","sources":["UserInfosRequestData.vue"],"sourcesContent":["<template>\r\n\t<v-card v-if=\"listUserInfos\" class=\"overflow-hidden\">\r\n\t\t<div class=\"flex justify-end\">\r\n\t\t\t<v-btn text class=\"p-0\" @click=\"closeDialog\">\r\n\t\t\t\t<v-icon> mdi-close </v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</div>\r\n\t\t<v-data-table\r\n\t\t\tv-model=\"selected\"\r\n\t\t\t:headers=\"headers\"\r\n\t\t\t:items=\"listUserInfos\"\r\n\t\t\t:single-select=\"singleSelect\"\r\n\t\t\titem-key=\"id\"\r\n\t\t\tshow-select\r\n\t\t\t:search=\"search\"\r\n\t\t\t:custom-filter=\"customFilter\"\r\n\t\t\tloading=\"true\"\r\n\t\t\t:loading-text=\"$t('label.loading')\"\r\n\t\t>\r\n\t\t\t<template v-slot:top>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"flex items-center\">\r\n\t\t\t\t\t\t<v-card-title> Lựa chọn người dùng </v-card-title>\r\n\t\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\t\t\tappend-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-4 rounded-pill\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t<v-btn icon @click=\"filterExist = !filterExist\">\r\n\t\t\t\t\t\t\t<v-icon>mdi-filter </v-icon>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"bg-gray-100 rounded-lg p-4\">\r\n\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t<v-col cols=\"10\"></v-col>\r\n\t\t\t\t\t\t\t<v-col cols=\"2\">\r\n\t\t\t\t\t\t\t\t<v-select\r\n\t\t\t\t\t\t\t\t\tv-model=\"organizations\"\r\n\t\t\t\t\t\t\t\t\t:items=\"listOrganization\"\r\n\t\t\t\t\t\t\t\t\titem-text=\"organizationName\"\r\n\t\t\t\t\t\t\t\t\t:item-value=\"\r\n\t\t\t\t\t\t\t\t\t\t(item) => item.organizationName\r\n\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\tlabel=\"Bộ phận\"\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tclass=\"rounded-pill\"\r\n\t\t\t\t\t\t\t\t></v-select>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<v-divider class=\"mt-4\"></v-divider>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.ranks`]=\"{ item }\">\r\n\t\t\t\t<span v-for=\"rank of item.ranks\" :key=\"rank.id\" v-bind=\"item\">\r\n\t\t\t\t\t{{ rank.rankName }}\r\n\t\t\t\t</span>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.organizations`]=\"{ item }\">\r\n\t\t\t\t<span\r\n\t\t\t\t\tv-for=\"organization of item.organizations\"\r\n\t\t\t\t\t:key=\"organization.id\"\r\n\t\t\t\t\tv-bind=\"item\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"28\">\r\n\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\tgetAvatarText(organization.organizationName, 2)\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t{{ organization.organizationName }}\r\n\t\t\t\t</span>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:no-data>\r\n\t\t\t\t<h3>{{ $t(\"message.no_data\") }}</h3>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t\t<v-divider></v-divider>\r\n\t\t<v-row class=\"mt-4\">\r\n\t\t\t<v-col cols=\"12\" md=\"12\" class=\"px-10\">\r\n\t\t\t\t<div class=\"float-right\">\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t\t@click=\"Save\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ $t(\"button.ok\") }}</v-btn\r\n\t\t\t\t\t>\r\n\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t\t@click=\"closeDialog\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ $t(\"button.cancel\") }}</v-btn\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../../administrator/administrator.api\";\r\n\r\nexport default {\r\n\tname: \"VSMFEUserInfosRequestData\",\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tlistUserInfos: [],\r\n\t\t\theaders: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Họ và tên \",\r\n\t\t\t\t\tvalue: \"fullName\",\r\n\t\t\t\t\tsortable: false,\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.fullName) return true;\r\n\t\t\t\t\t\tif (!value) return;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.fullName,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Chức Danh\",\r\n\t\t\t\t\tvalue: \"ranks\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.ranks) return true;\r\n\t\t\t\t\t\tif (!value) return;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.ranks,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Bộ phận\",\r\n\t\t\t\t\tvalue: \"organizations\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (this.organizations == this.$t(\"label.show_all\"))\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\treturn value.filter((entry) => {\r\n\t\t\t\t\t\t\treturn entry.organizationName.includes(\r\n\t\t\t\t\t\t\t\tthis.organizations,\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\titems: [],\r\n\t\t\tsearch: \"\",\r\n\t\t\tsingleSelect: false,\r\n\t\t\tselected: [],\r\n\t\t\tfullName: \"\",\r\n\t\t\trankName: \"\",\r\n\t\t\tlistOrganization: [],\r\n\t\t\torganizations: this.$t(\"label.show_all\"),\r\n\t\t};\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.GetAllUser();\r\n\t\tthis.getAllOrganzation();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tclose() {\r\n\t\t\tthis.$emit(\"close\", true);\r\n\t\t},\r\n\t\tasync GetAllUser() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllUserInfos(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tthis.listUserInfos = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"response\", response);\r\n\t\t\t\tconsole.log(\"this.listUserInfos\", this.listUserInfos);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getAllOrganzation() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_FindAllOrganization(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) return;\r\n\t\t\t\tthis.listOrganization = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcustomFilter(value, search, item) {\r\n\t\t\treturn (\r\n\t\t\t\t!!search && this.match(item, search.trim().replace(/\\s+/g, \" \"))\r\n\t\t\t);\r\n\t\t},\r\n\t\tasync Save() {\r\n\t\t\tawait this.$emit(\"save\", this.selected);\r\n\t\t\tawait this.$emit(\"close\", true);\r\n\t\t\tthis.selected = [];\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.test {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n}\r\n.w-40 {\r\n\twidth: 200px !important;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}