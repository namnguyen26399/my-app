{"ast":null,"code":"import _classCallCheck from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport userService from \"../user.service\";\n\nvar GuardService = /*#__PURE__*/function () {\n  function GuardService() {\n    _classCallCheck(this, GuardService);\n  }\n\n  _createClass(GuardService, [{\n    key: \"canAccess\",\n    value: function canAccess(to) {\n      if (to.path.match(\"sign-in\")) {\n        userService.signOut();\n        return true;\n      }\n\n      if (to.meta.roles) {\n        var userInfo = userService.getUserInfo();\n\n        if (!userInfo) {\n          return false;\n        }\n\n        if (!userInfo.roles) {\n          return false;\n        }\n\n        if (!userInfo.roles.filter(function (role) {\n          return to.meta.roles.includes(role.id);\n        })) {\n          return false;\n        }\n\n        return true;\n      }\n\n      if (to.meta.requiresAuth) {\n        return userService.getUserInfo();\n      }\n\n      return true;\n    }\n  }]);\n\n  return GuardService;\n}();\n\nvar guardService = new GuardService();\nexport default guardService;","map":{"version":3,"names":["userService","GuardService","to","path","match","signOut","meta","roles","userInfo","getUserInfo","filter","role","includes","id","requiresAuth","guardService"],"sources":["C:/Users/nam/OneDrive/Máy tính/New folder/src/services/auth/guard.service.js"],"sourcesContent":["import userService from \"../user.service\";\r\n\r\nclass GuardService {\r\n\tcanAccess(to) {\r\n\t\tif (to.path.match(\"sign-in\")) {\r\n\t\t\tuserService.signOut();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (to.meta.roles) {\r\n\t\t\tlet userInfo = userService.getUserInfo();\r\n\t\t\tif (!userInfo) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!userInfo.roles) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t!userInfo.roles.filter((role) => {\r\n\t\t\t\t\treturn to.meta.roles.includes(role.id);\r\n\t\t\t\t})\r\n\t\t\t) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (to.meta.requiresAuth) {\r\n\t\t\treturn userService.getUserInfo();\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nconst guardService = new GuardService();\r\nexport default guardService;\r\n"],"mappings":";;;;;;;;AAAA,OAAOA,WAAP,MAAwB,iBAAxB;;IAEMC,Y;;;;;;;WACL,mBAAUC,EAAV,EAAc;MACb,IAAIA,EAAE,CAACC,IAAH,CAAQC,KAAR,CAAc,SAAd,CAAJ,EAA8B;QAC7BJ,WAAW,CAACK,OAAZ;QACA,OAAO,IAAP;MACA;;MACD,IAAIH,EAAE,CAACI,IAAH,CAAQC,KAAZ,EAAmB;QAClB,IAAIC,QAAQ,GAAGR,WAAW,CAACS,WAAZ,EAAf;;QACA,IAAI,CAACD,QAAL,EAAe;UACd,OAAO,KAAP;QACA;;QACD,IAAI,CAACA,QAAQ,CAACD,KAAd,EAAqB;UACpB,OAAO,KAAP;QACA;;QACD,IACC,CAACC,QAAQ,CAACD,KAAT,CAAeG,MAAf,CAAsB,UAACC,IAAD,EAAU;UAChC,OAAOT,EAAE,CAACI,IAAH,CAAQC,KAAR,CAAcK,QAAd,CAAuBD,IAAI,CAACE,EAA5B,CAAP;QACA,CAFA,CADF,EAIE;UACD,OAAO,KAAP;QACA;;QACD,OAAO,IAAP;MACA;;MACD,IAAIX,EAAE,CAACI,IAAH,CAAQQ,YAAZ,EAA0B;QACzB,OAAOd,WAAW,CAACS,WAAZ,EAAP;MACA;;MACD,OAAO,IAAP;IACA;;;;;;AAGF,IAAMM,YAAY,GAAG,IAAId,YAAJ,EAArB;AACA,eAAec,YAAf"},"metadata":{},"sourceType":"module"}