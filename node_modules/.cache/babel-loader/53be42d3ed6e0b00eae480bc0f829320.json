{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.sort.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../../administrator/administrator.api\";\nimport moment from \"moment\";\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\nexport default {\n  components: {\n    BreadcrumbsVue: BreadcrumbsVue,\n    DeleteDialogVue: DeleteDialogVue\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      isShowFilter: false,\n      user_info: this.getUserInfo(),\n      listRequestData: [],\n      selected: [],\n      dateFormat: \"DD/MM/yyyy HH:mm\",\n      dialogDelete: false,\n      showPicker: false,\n      createdDate: null,\n      createdName: \"\",\n      ALL_STATUS: [],\n      s_title: \"\",\n      s_requestDataName: \"\",\n      s_approverName: \"\",\n      s_statusName: \"\",\n      s_createdOrgName: \"\",\n      isDeleting: false,\n      dialog: {\n        delete: false\n      },\n      json_fields: [],\n      json_data: [],\n      json_meta: [[{\n        key: \"charset\",\n        value: \"utf-8\"\n      }]],\n      filterItems: [this.$t(\"label.show_all\"), this.$t(\"label.used\"), this.$t(\"label.unused\")],\n      isActive: this.$t(\"label.show_all\"),\n      headers: [{\n        text: \"Tiêu đề\",\n        value: \"title\",\n        filter: function filter(value) {\n          if (!_this.s_title) return true;\n          if (!value) return;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.s_title).toLocaleUpperCase());\n        }\n      }, {\n        text: \"Loại yêu cầu\",\n        value: \"requestDataName\",\n        filter: function filter(value) {\n          if (!_this.s_requestDataName) return true;\n          if (!value) return;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.s_requestDataName).toLocaleUpperCase());\n        }\n      }, {\n        text: \"Trạng thái\",\n        value: \"statusName\",\n        filter: function filter(value) {\n          if (_this.isActive == _this.$t(\"label.used\")) {\n            return value == true;\n          }\n\n          if (_this.isActive == _this.$t(\"label.unused\")) {\n            return value == false;\n          }\n\n          return true;\n        }\n      }, {\n        text: \"Người duyệt\",\n        value: \"approverName\",\n        filter: function filter(value) {\n          if (!_this.s_approverName) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this._approverName).toLocaleUpperCase());\n        }\n      }, {\n        text: \"Bộ phận trình\",\n        value: \"createdOrgName\",\n        filter: function filter(value) {\n          if (!_this.s_createdOrgName) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.s_createdOrgName).toLocaleUpperCase());\n        }\n      }, {\n        text: \"Người soạn\",\n        value: \"createdName\",\n        filter: function filter(value) {\n          if (!_this.createdName) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.createdName).toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.created_date\"),\n        value: \"createdDate\",\n        formatter: function formatter(x) {\n          return x ? moment(x).format(_this.dateFormat) : null;\n        },\n        filter: function filter(value) {\n          if (!_this.createdDate) return true;\n          return value.includes(_this.createdDate);\n        }\n      }]\n    };\n  },\n  watch: {\n    \"dialog.delete\": function dialogDelete(val) {\n      val || this.closeDelete();\n    }\n  },\n  computed: {\n    formatDateFns: function formatDateFns() {\n      return this.createdDate ? moment(this.createdDate).format(this.dateFormat) : \"\";\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this2.getAllStatus();\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  mounted: function mounted() {\n    this.getAllRequestApproved();\n  },\n  methods: {\n    getColor: function getColor(item) {\n      var _item$status;\n\n      if (!((_item$status = item.status) !== null && _item$status !== void 0 && _item$status.id)) return \"#000000\";\n      var status = this.ALL_STATUS.find(function (ele) {\n        return ele.id == item.status.id;\n      });\n      if (!(status !== null && status !== void 0 && status.statusColor)) return \"#000000\";\n      return \"#\" + status.statusColor;\n    },\n    getAllRequestApproved: function getAllRequestApproved() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return globalService.getData_Async(administratorAPI.API_GetRequestApproved(_this3.user_info.id));\n\n              case 2:\n                response = _context2.sent;\n\n                if (!(!response || !response.state)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", _this3.toastError(_this3.$t(\"error.load\")));\n\n              case 5:\n                _this3.listRequestData = response.data.filter(function (entry) {\n                  {\n                    return !entry.isDelete;\n                  }\n                });\n\n                _this3.sortList(_this3.listRequestData);\n\n                _this3.json_fields = _this3.getJsonFields(_this3.headers);\n                _this3.json_data = Object.assign([], _this3.listRequestData);\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    getAllStatus: function getAllStatus() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return globalService.getData_Async(administratorAPI.API_GetAllStatus());\n\n              case 2:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _this4.toastError(_this4.$t(\"error.load\")));\n\n              case 5:\n                _this4.ALL_STATUS = response.data.filter(function (entry) {\n                  {\n                    return !entry.isDelete && entry.isActive;\n                  }\n                });\n\n                _this4.sortList(_this4.ALL_STATUS);\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    deleteAll: function deleteAll() {\n      if (this.selected.length > 0) {\n        this.dialog.delete = true;\n      } else {\n        this.toastError(this.$t(\"label.no_selected\"));\n      }\n    },\n    onConfirmDelete: function onConfirmDelete(value) {\n      if (!value) {\n        this.closeDelete();\n      } else {\n        if (this.selected) {\n          this.deleteAllConfirm();\n        }\n      }\n    },\n    deleteItem: function deleteItem(item) {\n      this.selected = [item];\n      this.dialog.delete = true;\n    },\n    closeDelete: function closeDelete() {\n      this.dialog.delete = false;\n    },\n    deleteAllConfirm: function deleteAllConfirm() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!_this5.isDeleting) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 2:\n                _this5.isDeleting = true;\n                _this5.selected = _this5.selected.map(function (entry) {\n                  entry.isDelete = true;\n                  return entry;\n                });\n                _context4.next = 6;\n                return globalService.postData_Async(administratorAPI.API_DeleteAllRequestData(), _this5.selected);\n\n              case 6:\n                response = _context4.sent;\n\n                if (!response.state) {\n                  _this5.toastError(response.message);\n                }\n\n                if (response.state) {\n                  _this5.isDeleting = true;\n\n                  _this5.toastSuccess(_this5.$t(\"message.delete_success\"));\n                }\n\n                _this5.selected = [];\n                _this5.isDeleting = false;\n\n                _this5.getAllRequestApproved();\n\n                _this5.closeDelete();\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    sortList: function sortList(arr) {\n      return arr.sort(function (a, b) {\n        return moment(b.createdDate).toDate().getTime() - moment(a.createdDate).toDate().getTime();\n      });\n    },\n    getFilenameExcel: function getFilenameExcel() {\n      var str = \"Phieu_dang_soan_\" + new Date().getTime() + \".xls\";\n      return str;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["components","BreadcrumbsVue","DeleteDialogVue","data","isShowFilter","user_info","listRequestData","selected","dateFormat","dialogDelete","showPicker","createdDate","createdName","ALL_STATUS","s_title","s_requestDataName","s_approverName","s_statusName","s_createdOrgName","isDeleting","dialog","delete","json_fields","json_data","json_meta","key","value","filterItems","isActive","headers","text","filter","toLocaleUpperCase","includes","formatter","x","watch","val","computed","formatDateFns","moment","created","mounted","methods","getColor","item","getAllRequestApproved","globalService","administratorAPI","response","getAllStatus","deleteAll","onConfirmDelete","deleteItem","closeDelete","deleteAllConfirm","entry","sortList","arr","getFilenameExcel"],"sourceRoot":"src/views/modules/khai-phieu-yeu-cau/RequestAppoved","sources":["ListRequestApproved.vue"],"sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<BreadcrumbsVue />\r\n\t\t<v-dialog v-model=\"dialog.delete\" max-width=\"fit-content\">\r\n\t\t\t<DeleteDialogVue\r\n\t\t\t\t@close=\"closeDelete\"\r\n\t\t\t\t@confirmDelete=\"onConfirmDelete\"\r\n\t\t\t/>\r\n\t\t</v-dialog>\r\n\t\t<v-row>\r\n\t\t\t<v-col\r\n\t\t\t\tcols=\"12\"\r\n\t\t\t\tmd=\"12\"\r\n\t\t\t\tclass=\"d-flex w-full\"\r\n\t\t\t\tstyle=\"justify-content: space-between\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"d-flex\">\r\n\t\t\t\t\t<div class=\"d-flex\">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\t\t\tpath: '/phieu-yeu-cau/tao-moi',\r\n\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tclass=\"mb-4 mr-2 rounded\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon> mdi-plus </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.create\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t<v-btn text class=\"mb-4 mr-2 rounded\">\r\n\t\t\t\t\t\t\t<v-icon> mdi-arrow-up </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.import\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\tclass=\"mb-4 mr-2 rounded\"\r\n\t\t\t\t\t\t\t@click=\"deleteAll\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon> mdi-trash-can-outline </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.delete_all\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"d-flex\">\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<vue-excel-xlsx\r\n\t\t\t\t\t\t\t:data=\"json_data\"\r\n\t\t\t\t\t\t\t:file-name=\"getFilenameExcel()\"\r\n\t\t\t\t\t\t\t:columns=\"json_fields\"\r\n\t\t\t\t\t\t\t:file-type=\"'xlsx'\"\r\n\t\t\t\t\t\t\t:sheet-name=\"'Phiếu đang soạn'\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<!-- <v-btn text tile color=\"orange\">\r\n\t\t\t\t\t\t\t\t<v-icon color=\"orange\">\r\n\t\t\t\t\t\t\t\t\tmdi-swap-vertical\r\n\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t\tXuất excel\r\n\t\t\t\t\t\t\t</v-btn> -->\r\n\t\t\t\t\t\t\t<v-btn text>\r\n\t\t\t\t\t\t\t\t<v-icon> mdi-swap-vertical </v-icon>\r\n\t\t\t\t\t\t\t\tExport\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</vue-excel-xlsx>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-icon @click=\"isShowFilter = !isShowFilter\">\r\n\t\t\t\t\t\t\tmdi-filter-outline</v-icon\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t</div>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t\t<v-data-table\r\n\t\t\tv-model=\"selected\"\r\n\t\t\t:headers=\"headers\"\r\n\t\t\t:items=\"listRequestData\"\r\n\t\t\titem-key=\"id\"\r\n\t\t\tshow-select\r\n\t\t\tloading=\"true\"\r\n\t\t\t:loading-text=\"$t('label.loading')\"\r\n\t\t>\r\n\t\t\t<template v-slot:[`body.prepend`] v-if=\"isShowFilter\">\r\n\t\t\t\t<v-divider></v-divider>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"s_title\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Tiêu đề\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"s_requestDataName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Loại yêu cầu\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"s_statusName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Trạng thái\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"s_approverName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Người phê duyệt\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"s_createdOrgName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Bộ phận trình\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"createdName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Người soạn\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-menu\r\n\t\t\t\t\t\t\tv-model=\"showPicker\"\r\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\r\n\t\t\t\t\t\t\tmax-width=\"290\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t:value=\"formatDateFns\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.created_date')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\t\t@click:clear=\"createdDate = null\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t\t\tv-model=\"createdDate\"\r\n\t\t\t\t\t\t\t\t@change=\"showPicker = false\"\r\n\t\t\t\t\t\t\t\tno-title\r\n\t\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\t\trange\r\n\t\t\t\t\t\t\t></v-date-picker>\r\n\t\t\t\t\t\t</v-menu>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.title`]=\"{ item }\">\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\t\tpath: `/phieu-yeu-cau/chi-tiet/${item.id}`,\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\ttext\r\n\t\t\t\t\t\tclass=\"blue--text text-decoration-underline\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ item.title }}</v-btn\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<v-menu offset-y>\r\n\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\tclass=\"float-right\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-icon>mdi-dots-vertical</v-icon>\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<v-list>\r\n\t\t\t\t\t\t\t<v-list-item\r\n\t\t\t\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\t\t\t\tpath: `/phieu-yeu-cau/chi-tiet/${item.id}`,\r\n\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-list-item-icon>\r\n\t\t\t\t\t\t\t\t\t<v-icon color=\"green darken-2\">\r\n\t\t\t\t\t\t\t\t\t\tmdi-eye-circle\r\n\t\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t\t</v-list-item-icon>\r\n\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"button.view\") }}\r\n\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t</v-list-item>\r\n\r\n\t\t\t\t\t\t\t<v-list-item\r\n\t\t\t\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\t\t\t\tpath: `/phieu-yeu-cau/${item.id}/chi-tiet`,\r\n\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-list-item-icon>\r\n\t\t\t\t\t\t\t\t\t<v-icon color=\"blue darken-2\">\r\n\t\t\t\t\t\t\t\t\t\tmdi-pencil-circle\r\n\t\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t\t</v-list-item-icon>\r\n\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"button.edit\") }}\r\n\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t<v-list-item @click=\"deleteItem(item)\">\r\n\t\t\t\t\t\t\t\t<v-list-item-icon>\r\n\t\t\t\t\t\t\t\t\t<v-icon color=\"red darken-2\">\r\n\t\t\t\t\t\t\t\t\t\tmdi-delete-circle\r\n\t\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t\t</v-list-item-icon>\r\n\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"button.delete\") }}\r\n\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t</v-list>\r\n\t\t\t\t\t</v-menu>\r\n\t\t\t\t</td>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template v-slot:[`item.actions`]=\"{ item }\">\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\ticon\r\n\t\t\t\t\tclass=\"mr-2\"\r\n\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t:to=\"{ path: `/phieu-yeu-cau/${item.id}/chi-tiet` }\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-icon> mdi-pencil </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn icon color=\"red\" @click=\"deleteItem(item)\">\r\n\t\t\t\t\t<v-icon> mdi-trash-can-outline </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.opproverName`]=\"{ item }\">\r\n\t\t\t\t<v-list-item-avatar class=\"mx-0\">\r\n\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t<span class=\"white--text\" v-if=\"item.opproverName\">\r\n\t\t\t\t\t\t\t{{ getAvatarText(item.opproverName) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</v-avatar>\r\n\t\t\t\t</v-list-item-avatar>\r\n\t\t\t\t{{ item.opproverName }}\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.createdName`]=\"{ item }\">\r\n\t\t\t\t<v-list-item>\r\n\t\t\t\t\t<v-list-item-avatar class=\"mx-0\">\r\n\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t<span class=\"white--text\" v-if=\"item.createdName\">\r\n\t\t\t\t\t\t\t\t{{ getAvatarText(item.createdName) }}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t</v-list-item-avatar>\r\n\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t{{ item.createdName }}\r\n\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t<v-list-item-subtitle>\r\n\t\t\t\t\t\t\t{{ item.createdOrgName }}\r\n\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t</template>\r\n\t\t\t<template\r\n\t\t\t\tv-for=\"header in headers.filter((header) =>\r\n\t\t\t\t\theader.hasOwnProperty('formatter'),\r\n\t\t\t\t)\"\r\n\t\t\t\tv-slot:[`item.${header.value}`]=\"{ headers, value }\"\r\n\t\t\t>\r\n\t\t\t\t{{ header.formatter(value) }}\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.isActive`]=\"{ item }\">\r\n\t\t\t\t<v-simple-checkbox\r\n\t\t\t\t\tv-model=\"item.isActive\"\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t></v-simple-checkbox>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.statusName`]=\"{ item }\">\r\n\t\t\t\t<span :style=\"{ color: getColor(item) }\">\r\n\t\t\t\t\t<span class=\"iconify\" data-icon=\"mdi:brightness-1\"></span>\r\n\t\t\t\t\t{{ item.statusName }}</span\r\n\t\t\t\t>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:no-data>\r\n\t\t\t\t<h3>{{ $t(\"message.no_data\") }}</h3>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../../administrator/administrator.api\";\r\nimport moment from \"moment\";\r\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\r\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\r\nexport default {\r\n\tcomponents: { BreadcrumbsVue, DeleteDialogVue },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisShowFilter: false,\r\n\t\t\tuser_info: this.getUserInfo(),\r\n\t\t\tlistRequestData: [],\r\n\t\t\tselected: [],\r\n\t\t\tdateFormat: \"DD/MM/yyyy HH:mm\",\r\n\t\t\tdialogDelete: false,\r\n\t\t\tshowPicker: false,\r\n\t\t\tcreatedDate: null,\r\n\t\t\tcreatedName: \"\",\r\n\t\t\tALL_STATUS: [],\r\n\t\t\ts_title: \"\",\r\n\t\t\ts_requestDataName: \"\",\r\n\t\t\ts_approverName: \"\",\r\n\t\t\ts_statusName: \"\",\r\n\t\t\ts_createdOrgName: \"\",\r\n\t\t\tisDeleting: false,\r\n\t\t\tdialog: { delete: false },\r\n\t\t\tjson_fields: [],\r\n\t\t\tjson_data: [],\r\n\t\t\tjson_meta: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: \"charset\",\r\n\t\t\t\t\t\tvalue: \"utf-8\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tfilterItems: [\r\n\t\t\t\tthis.$t(\"label.show_all\"),\r\n\t\t\t\tthis.$t(\"label.used\"),\r\n\t\t\t\tthis.$t(\"label.unused\"),\r\n\t\t\t],\r\n\t\t\tisActive: this.$t(\"label.show_all\"),\r\n\t\t\theaders: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Tiêu đề\",\r\n\t\t\t\t\tvalue: \"title\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.s_title) return true;\r\n\t\t\t\t\t\tif (!value) return;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.s_title,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Loại yêu cầu\",\r\n\t\t\t\t\tvalue: \"requestDataName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.s_requestDataName) return true;\r\n\t\t\t\t\t\tif (!value) return;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.s_requestDataName,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Trạng thái\",\r\n\t\t\t\t\tvalue: \"statusName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.used\")) {\r\n\t\t\t\t\t\t\treturn value == true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.unused\")) {\r\n\t\t\t\t\t\t\treturn value == false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Người duyệt\",\r\n\t\t\t\t\tvalue: \"approverName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.s_approverName) return true;\r\n\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis._approverName,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Bộ phận trình\",\r\n\t\t\t\t\tvalue: \"createdOrgName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.s_createdOrgName) return true;\r\n\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.s_createdOrgName,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Người soạn\",\r\n\t\t\t\t\tvalue: \"createdName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.createdName) return true;\r\n\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.createdName,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.created_date\"),\r\n\t\t\t\t\tvalue: \"createdDate\",\r\n\r\n\t\t\t\t\tformatter: (x) =>\r\n\t\t\t\t\t\tx ? moment(x).format(this.dateFormat) : null,\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.createdDate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.createdDate);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\t\"dialog.delete\"(val) {\r\n\t\t\tval || this.closeDelete();\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\tformatDateFns() {\r\n\t\t\treturn this.createdDate\r\n\t\t\t\t? moment(this.createdDate).format(this.dateFormat)\r\n\t\t\t\t: \"\";\r\n\t\t},\r\n\t},\r\n\tasync created() {\r\n\t\tawait this.getAllStatus();\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getAllRequestApproved();\r\n\t},\r\n\tmethods: {\r\n\t\tgetColor(item) {\r\n\t\t\tif (!item.status?.id) return \"#000000\";\r\n\t\t\tlet status = this.ALL_STATUS.find(\r\n\t\t\t\t(ele) => ele.id == item.status.id,\r\n\t\t\t);\r\n\t\t\tif (!status?.statusColor) return \"#000000\";\r\n\t\t\treturn \"#\" + status.statusColor;\r\n\t\t},\r\n\t\tasync getAllRequestApproved() {\r\n\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\tadministratorAPI.API_GetRequestApproved(this.user_info.id),\r\n\t\t\t);\r\n\t\t\tif (!response || !response.state) {\r\n\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t}\r\n\t\t\tthis.listRequestData = response.data.filter((entry) => {\r\n\t\t\t\t{\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.sortList(this.listRequestData);\r\n\t\t\tthis.json_fields = this.getJsonFields(this.headers);\r\n\t\t\tthis.json_data = Object.assign([], this.listRequestData);\r\n\t\t},\r\n\t\tasync getAllStatus() {\r\n\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\tadministratorAPI.API_GetAllStatus(),\r\n\t\t\t);\r\n\t\t\tif (!response || !response.state) {\r\n\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t}\r\n\t\t\tthis.ALL_STATUS = response.data.filter((entry) => {\r\n\t\t\t\t{\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.sortList(this.ALL_STATUS);\r\n\t\t},\r\n\t\tdeleteAll() {\r\n\t\t\tif (this.selected.length > 0) {\r\n\t\t\t\tthis.dialog.delete = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"label.no_selected\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tonConfirmDelete(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tthis.closeDelete();\r\n\t\t\t} else {\r\n\t\t\t\tif (this.selected) {\r\n\t\t\t\t\tthis.deleteAllConfirm();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteItem(item) {\r\n\t\t\tthis.selected = [item];\r\n\t\t\tthis.dialog.delete = true;\r\n\t\t},\r\n\t\tcloseDelete() {\r\n\t\t\tthis.dialog.delete = false;\r\n\t\t},\r\n\t\tasync deleteAllConfirm() {\r\n\t\t\tif (this.isDeleting) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isDeleting = true;\r\n\t\t\tthis.selected = this.selected.map((entry) => {\r\n\t\t\t\tentry.isDelete = true;\r\n\t\t\t\treturn entry;\r\n\t\t\t});\r\n\t\t\tlet response = await globalService.postData_Async(\r\n\t\t\t\tadministratorAPI.API_DeleteAllRequestData(),\r\n\t\t\t\tthis.selected,\r\n\t\t\t);\r\n\t\t\tif (!response.state) {\r\n\t\t\t\tthis.toastError(response.message);\r\n\t\t\t}\r\n\t\t\tif (response.state) {\r\n\t\t\t\tthis.isDeleting = true;\r\n\t\t\t\tthis.toastSuccess(this.$t(\"message.delete_success\"));\r\n\t\t\t}\r\n\r\n\t\t\tthis.selected = [];\r\n\t\t\tthis.isDeleting = false;\r\n\t\t\tthis.getAllRequestApproved();\r\n\t\t\tthis.closeDelete();\r\n\t\t},\r\n\t\tsortList(arr) {\r\n\t\t\treturn arr.sort((a, b) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tmoment(b.createdDate).toDate().getTime() -\r\n\t\t\t\t\tmoment(a.createdDate).toDate().getTime()\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetFilenameExcel() {\r\n\t\t\tlet str = \"Phieu_dang_soan_\" + new Date().getTime() + \".xls\";\r\n\t\t\treturn str;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.text-color {\r\n\tcolor: var(--status-color);\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}