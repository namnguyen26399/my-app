{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.keys.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nexport default {\n  name: \"EditStatus\",\n  props: {\n    editedItem: {}\n  },\n  watch: {\n    editedItem: function editedItem(value) {\n      this.m_editedItem = value;\n    }\n  },\n  created: function created() {\n    this.m_editedItem = this.editedItem;\n  },\n  data: function data() {\n    return {\n      user_current: this.getUserInfo(),\n      statusName: \"\",\n      m_editedItem: {\n        created: null,\n        createdDate: new Date(),\n        createdName: \"\",\n        createdOrgName: \"\",\n        createdRankName: \"\",\n        description: \"\",\n        id: null,\n        isActive: true,\n        isDelete: false,\n        mailTemplate: null,\n        modified: null,\n        modifiedDate: null,\n        modifiedName: \"\",\n        statusCode: \"\",\n        statusName: \"\",\n        statusType: \"\",\n        tennant: null,\n        tennantCode: \"\",\n        tennantName: \"\"\n      },\n      errorStatusName: \"\"\n    };\n  },\n  computed: {\n    form: function form() {\n      return {\n        status_name: this.m_editedItem.statusName\n      };\n    }\n  },\n  methods: {\n    save: function save() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _i, _Object$keys, key, response;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.m_editedItem.statusName = _this.m_editedItem.statusName.trim();\n                _this.m_editedItem.description = _this.m_editedItem.description.trim();\n\n                for (_i = 0, _Object$keys = Object.keys(_this.form); _i < _Object$keys.length; _i++) {\n                  key = _Object$keys[_i];\n\n                  if (!_this.form[key]) {\n                    _this.formHasErrors = true;\n\n                    _this.$refs[key].focus();\n                  }\n\n                  _this.$refs[key].validate(true);\n                }\n\n                if (!(_this.m_editedItem.statusName == \"\")) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _this.errorStatusName = _this.$t(\"message.msg_1\");\n                return _context.abrupt(\"return\");\n\n              case 6:\n                _this.m_editedItem.created = _this.user_current;\n                _this.m_editedItem.modified = _this.user_current;\n                _this.m_editedItem.modifiedName = _this.user_current.fullName;\n                _this.m_editedItem.modifiedDate = new Date();\n                console.log(\"save\", _this.m_editedItem);\n                _context.prev = 11;\n\n                if (!_this.m_editedItem.id) {\n                  _context.next = 21;\n                  break;\n                }\n\n                _context.next = 15;\n                return globalService.putData_Async(administratorAPI.API_UpdateStatus(_this.m_editedItem.id), _this.m_editedItem);\n\n              case 15:\n                response = _context.sent;\n\n                if (!(!response || !response.state)) {\n                  _context.next = 18;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this.toastError(_this.$t(\"message.update_error\")));\n\n              case 18:\n                _this.toastSuccess(_this.$t(\"message.update_success\"));\n\n                _context.next = 29;\n                break;\n\n              case 21:\n                _this.m_editedItem.createdDate = new Date();\n                _this.m_editedItem.createdName = _this.user_current.fullName;\n                _context.next = 25;\n                return globalService.postData_Async(administratorAPI.API_CreateStatus(), _this.m_editedItem);\n\n              case 25:\n                response = _context.sent;\n\n                if (!(!response || !response.state)) {\n                  _context.next = 28;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this.toastError(_this.$t(\"message.add_error\")));\n\n              case 28:\n                _this.toastSuccess(_this.$t(\"message.add_success\"));\n\n              case 29:\n                _this.closeDialog();\n\n                _context.next = 35;\n                break;\n\n              case 32:\n                _context.prev = 32;\n                _context.t0 = _context[\"catch\"](11);\n\n                _this.toastError(_context.t0);\n\n              case 35:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[11, 32]]);\n      }))();\n    },\n    onchangeStatusName: function onchangeStatusName() {\n      this.errorStatusName = \"\";\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;EACAA,kBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC;IACAD,UADA,sBACAE,KADA,EACA;MACA;IACA;EAHA,CAHA;EAQAC,OARA,qBAQA;IACA;EACA,CAVA;EAWAC,IAXA,kBAWA;IACA;MACAC,gCADA;MAEAC,cAFA;MAGAC;QACAJ,aADA;QAEAK,uBAFA;QAGAC,eAHA;QAIAC,kBAJA;QAKAC,mBALA;QAMAC,eANA;QAOAC,QAPA;QAQAC,cARA;QASAC,eATA;QAUAC,kBAVA;QAWAC,cAXA;QAYAC,kBAZA;QAaAC,gBAbA;QAcAC,cAdA;QAeAd,cAfA;QAgBAe,cAhBA;QAiBAC,aAjBA;QAkBAC,eAlBA;QAmBAC;MAnBA,CAHA;MAwBAC;IAxBA;EA0BA,CAtCA;EAuCAC;IACAC,IADA,kBACA;MACA;QACAC;MADA;IAGA;EALA,CAvCA;EA+CAC;IACAC,IADA,kBACA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA,iCACA,qCADA;;gBAEA;kBAAAC;;kBACA;oBACA;;oBACA;kBACA;;kBACA;gBACA;;gBAVA,MAWA,mCAXA;kBAAA;kBAAA;gBAAA;;gBAYA;gBAZA;;cAAA;gBAeA;gBACA;gBACA;gBACA;gBACAC;gBAnBA;;gBAAA,KAsBA,qBAtBA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAuBAC,4BACAC,wDADA,EAEA,kBAFA,CAvBA;;cAAA;gBAuBAC,QAvBA;;gBAAA,MA2BA,4BA3BA;kBAAA;kBAAA;gBAAA;;gBAAA,iCA4BA,kDA5BA;;cAAA;gBA8BA;;gBA9BA;gBAAA;;cAAA;gBAgCA;gBACA;gBAjCA;gBAAA,OAkCAF,6BACAC,mCADA,EAEA,kBAFA,CAlCA;;cAAA;gBAkCAC,QAlCA;;gBAAA,MAsCA,4BAtCA;kBAAA;kBAAA;gBAAA;;gBAAA,iCAuCA,+CAvCA;;cAAA;gBAyCA;;cAzCA;gBA2CA;;gBA3CA;gBAAA;;cAAA;gBAAA;gBAAA;;gBA6CA;;cA7CA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA+CA,CAhDA;IAiDAC,kBAjDA,gCAiDA;MACA;IACA;EAnDA;AA/CA","names":["name","props","editedItem","watch","value","created","data","user_current","statusName","m_editedItem","createdDate","createdName","createdOrgName","createdRankName","description","id","isActive","isDelete","mailTemplate","modified","modifiedDate","modifiedName","statusCode","statusType","tennant","tennantCode","tennantName","errorStatusName","computed","form","status_name","methods","save","key","console","globalService","administratorAPI","response","onchangeStatusName"],"sourceRoot":"src/views/modules/administrator/Status","sources":["EditStatus.vue"],"sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<v-toolbar elevation=\"0\" color=\"grey lighten-4\">\r\n\t\t\t<v-toolbar-title>\r\n\t\t\t\t{{ $t(\"label.information\") }}\r\n\t\t\t</v-toolbar-title>\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</v-toolbar>\r\n\t\t<v-form ref=\"form\" class=\"mt-4\">\r\n\t\t\t<v-container>\r\n\t\t\t\t<v-row class=\"mt-4\">\r\n\t\t\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tref=\"status_name\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.name')\"\r\n\t\t\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\t\tm_editedItem.statusName.trim().length <=\r\n\t\t\t\t\t\t\t\t\t\t255 || $t('message.msg_2'),\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\tv-model=\"m_editedItem.statusName\"\r\n\t\t\t\t\t\t\t:error-messages=\"errorStatusName\"\r\n\t\t\t\t\t\t\t@keyup=\"onchangeStatusName\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t{{ $t(\"label.name\") }}\r\n\t\t\t\t\t\t\t\t<span class=\"red--text\">*</span>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-text-field>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t:label=\"$t('label.description')\"\r\n\t\t\t\t\t\t\tv-model=\"m_editedItem.description\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\tv-model=\"m_editedItem.statusType\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.is_process_end')\"\r\n\t\t\t\t\t\t></v-checkbox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t</v-container>\r\n\t\t\t<v-card-actions class=\"white\">\r\n\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\t\tdark\r\n\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t@click=\"save\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ $t(\"button.ok\") }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t@click=\"closeDialog\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ $t(\"button.cancel\") }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-card-actions>\r\n\t\t</v-form>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nexport default {\r\n\tname: \"EditStatus\",\r\n\tprops: { editedItem: {} },\r\n\twatch: {\r\n\t\teditedItem(value) {\r\n\t\t\tthis.m_editedItem = value;\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.m_editedItem = this.editedItem;\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuser_current: this.getUserInfo(),\r\n\t\t\tstatusName: \"\",\r\n\t\t\tm_editedItem: {\r\n\t\t\t\tcreated: null,\r\n\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tcreatedOrgName: \"\",\r\n\t\t\t\tcreatedRankName: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tid: null,\r\n\t\t\t\tisActive: true,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tmailTemplate: null,\r\n\t\t\t\tmodified: null,\r\n\t\t\t\tmodifiedDate: null,\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tstatusCode: \"\",\r\n\t\t\t\tstatusName: \"\",\r\n\t\t\t\tstatusType: \"\",\r\n\t\t\t\ttennant: null,\r\n\t\t\t\ttennantCode: \"\",\r\n\t\t\t\ttennantName: \"\",\r\n\t\t\t},\r\n\t\t\terrorStatusName: \"\",\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tform() {\r\n\t\t\treturn {\r\n\t\t\t\tstatus_name: this.m_editedItem.statusName,\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync save() {\r\n\t\t\tthis.m_editedItem.statusName = this.m_editedItem.statusName.trim();\r\n\t\t\tthis.m_editedItem.description =\r\n\t\t\t\tthis.m_editedItem.description.trim();\r\n\t\t\tfor (let key of Object.keys(this.form)) {\r\n\t\t\t\tif (!this.form[key]) {\r\n\t\t\t\t\tthis.formHasErrors = true;\r\n\t\t\t\t\tthis.$refs[key].focus();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs[key].validate(true);\r\n\t\t\t}\r\n\t\t\tif (this.m_editedItem.statusName == \"\") {\r\n\t\t\t\tthis.errorStatusName = this.$t(\"message.msg_1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.m_editedItem.created = this.user_current;\r\n\t\t\tthis.m_editedItem.modified = this.user_current;\r\n\t\t\tthis.m_editedItem.modifiedName = this.user_current.fullName;\r\n\t\t\tthis.m_editedItem.modifiedDate = new Date();\r\n\t\t\tconsole.log(\"save\", this.m_editedItem);\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tif (this.m_editedItem.id) {\r\n\t\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_UpdateStatus(this.m_editedItem.id),\r\n\t\t\t\t\t\tthis.m_editedItem,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"message.update_error\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.update_success\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.m_editedItem.createdDate = new Date();\r\n\t\t\t\t\tthis.m_editedItem.createdName = this.user_current.fullName;\r\n\t\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_CreateStatus(),\r\n\t\t\t\t\t\tthis.m_editedItem,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"message.add_error\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.add_success\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis.closeDialog();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonchangeStatusName() {\r\n\t\t\tthis.errorStatusName = \"\";\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}