{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.join.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport store from \"@/store\";\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\nimport moment from \"moment\";\nimport constant from \"@/common/constant\";\nexport default {\n  name: \"UserGroupListVue\",\n  components: {\n    BreadcrumbsVue: BreadcrumbsVue,\n    DeleteDialogVue: DeleteDialogVue\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      groupUser_groupName: \"\",\n      groupUser_description: \"\",\n      groupUser_roles: this.$t(\"label.show_all\"),\n      filterRole: [],\n      groupUser_created: \"\",\n      groupUser_date_create: null,\n      showPicker: false,\n      dateFormat: \"DD/MM/yyyy\",\n      dialog: {\n        delete: false\n      },\n      headers: [{\n        text: this.$t(\"label.group_name\"),\n        align: \"start\",\n        value: \"groupName\",\n        filter: function filter(value) {\n          if (!_this.groupUser_groupName || !value) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.groupUser_groupName).trim().toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.description\"),\n        align: \"start\",\n        value: \"description\",\n        filter: function filter(value) {\n          if (!_this.groupUser_description || !value) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.groupUser_description).trim().toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.roles\"),\n        align: \"start\",\n        value: \"roles\",\n        filter: function filter(value) {\n          if (_this.groupUser_roles == _this.$t(\"label.show_all\")) return true;\n          return value.filter(function (entry) {\n            return entry.roleCode.includes(_this.groupUser_roles);\n          }).length;\n        }\n      }, {\n        text: this.$t(\"label.created\"),\n        align: \"start\",\n        value: \"createdName\",\n        filter: function filter(value) {\n          if (!_this.groupUser_created || !value) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.groupUser_created).trim().toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.date_create\"),\n        align: \"start\",\n        value: \"dateCreate\",\n        formatter: function formatter(value) {\n          return moment(value).isValid() ? moment(value).format(_this.dateFormat) : \"\";\n        },\n        filter: function filter(value) {\n          if (!_this.groupUser_date_create) return true;\n          var values = \"\".concat(_this.groupUser_date_create).split(constant.values.DATE_RANGE_SEPARATOR);\n          values = values.map(function (x) {\n            return moment(\"\".concat(x)).toDate().getTime();\n          }).sort(function (a, b) {\n            return a - b;\n          });\n          var target = moment(value).toDate().getTime();\n          return target >= values[0] && target <= values[values.length - 1] + 24 * 60 * 60 * 1000;\n        }\n      }, {\n        text: this.$t(\"label.actions\"),\n        align: \"start\",\n        sortale: false,\n        value: \"action\"\n      }],\n      groups: [],\n      selected: []\n    };\n  },\n  created: function created() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              store.state.loading = true;\n              _context.next = 3;\n              return _this2.getAllUserGroup();\n\n            case 3:\n              _context.next = 5;\n              return _this2.getAllRole();\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  mounted: function mounted() {\n    store.state.loading = false;\n  },\n  computed: {\n    formatDateFns: function formatDateFns() {\n      if (!this.groupUser_date_create) {\n        return \"\";\n      }\n\n      var values = \"\".concat(this.groupUser_date_create).split(constant.values.DATE_RANGE_SEPARATOR);\n      var result = [];\n      result = values.map(function (x) {\n        return moment(x).format(\"DD/MM/yyyy\");\n      });\n      return result.join(\"~\");\n    }\n  },\n  watch: {\n    \"dialog.delete\": function dialogDelete(val) {\n      val || this.close();\n    }\n  },\n  methods: {\n    getAllUserGroup: function getAllUserGroup() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllUserGroup());\n\n              case 3:\n                response = _context2.sent;\n\n                _this3.preHandleResponse(response);\n\n                _this3.groups = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n                _this3.sortList(_this3.groups);\n\n                _context2.next = 12;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                _this3.toastError(_context2.t0);\n\n              case 12:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      }))();\n    },\n    getAllRole: function getAllRole() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return globalService.getData_Async(administratorAPI.API_GetAllRole());\n\n              case 2:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 5:\n                _this4.filterRole = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n                _this4.filterRole.unshift(_this4.$t(\"label.show_all\"));\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    editItem: function editItem(item) {\n      this.$router.push({\n        path: \"\".concat(item.id),\n        append: true\n      });\n    },\n    deleteItem: function deleteItem(item) {\n      this.selected = [item];\n      this.dialog.delete = true;\n    },\n    onConfirmDelete: function onConfirmDelete(value) {\n      if (!value) {\n        this.close();\n      } else {\n        if (this.selected) {\n          this.deleteConfirm();\n        }\n      }\n    },\n    sortList: function sortList(arr) {\n      return arr.sort(function (a, b) {\n        return moment(b.createdDate).toDate().getTime() - moment(a.createdDate).toDate().getTime();\n      });\n    },\n    deleteAll: function deleteAll() {\n      if (this.selected.length > 0) {\n        this.dialog.delete = true;\n      } else {\n        this.toastError(this.$t(\"label.no_selected\"));\n      }\n    },\n    deleteConfirm: function deleteConfirm() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this5.selected = _this5.selected.map(function (x) {\n                  x.isDelete = true;\n                  return x;\n                });\n                _context4.prev = 1;\n                _context4.next = 4;\n                return globalService.postData_Async(administratorAPI.API_SaveAllUserGroup(), _this5.selected);\n\n              case 4:\n                response = _context4.sent;\n\n                if (!response || !response.state) {\n                  _this5.toastError(_this5.$t(\"message.delete_error\"));\n                } else {\n                  _this5.toastSuccess(_this5.$t(\"message.delete_success\"));\n                }\n\n                _context4.next = 11;\n                break;\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](1);\n\n                _this5.toastError(_this5.$t(\"error.load\"));\n\n              case 11:\n                _context4.prev = 11;\n                _this5.selected = [];\n\n                _this5.getAllUserGroup();\n\n                _this5.close();\n\n                return _context4.finish(11);\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[1, 8, 11, 16]]);\n      }))();\n    },\n    close: function close() {\n      this.dialog.delete = false;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","BreadcrumbsVue","DeleteDialogVue","data","groupUser_groupName","groupUser_description","groupUser_roles","filterRole","groupUser_created","groupUser_date_create","showPicker","dateFormat","dialog","delete","headers","text","align","value","filter","toLocaleUpperCase","includes","trim","length","formatter","moment","constant","values","map","sort","target","sortale","groups","selected","created","store","mounted","computed","formatDateFns","result","watch","val","methods","getAllUserGroup","globalService","administratorAPI","response","getAllRole","editItem","item","path","append","deleteItem","onConfirmDelete","sortList","arr","deleteAll","deleteConfirm","x","close"],"sourceRoot":"src/views/modules/administrator/UserGroup","sources":["UserGroupList.vue"],"sourcesContent":["<template>\n\t<v-card elevation=\"0\">\n\t\t<BreadcrumbsVue />\n\t\t<v-data-table\n\t\t\tv-model=\"selected\"\n\t\t\t:headers=\"headers\"\n\t\t\t:items=\"groups\"\n\t\t\tmulti-sort\n\t\t\tshow-select\n\t\t\t:loading=\"!groups\"\n\t\t\t:loading-text=\"$t('label.loading')\"\n\t\t\t:no-data-text=\"$t('message.no_results')\"\n\t\t\t:no-results-text=\"$t('message.no_results')\"\n\t\t>\n\t\t\t<template v-slot:top=\"{ on, attrs }\">\n\t\t\t\t<v-card-title class=\"p-0 w-full\">\n\t\t\t\t\t<v-btn\n\t\t\t\t\t\televation=\"0\"\n\t\t\t\t\t\tclass=\"rounded-0 text-capitalize font-weight-regular\"\n\t\t\t\t\t\tv-bind=\"attrs\"\n\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\tto=\"tao-moi\"\n\t\t\t\t\t\ttext\n\t\t\t\t\t\tappend\n\t\t\t\t\t>\n\t\t\t\t\t\t<v-icon small class=\"mr-2\"> mdi-plus </v-icon>\n\t\t\t\t\t\t{{ $t(\"button.create\") }}\n\t\t\t\t\t</v-btn>\n\t\t\t\t\t<v-btn\n\t\t\t\t\t\televation=\"0\"\n\t\t\t\t\t\tclass=\"rounded-0 text-capitalize font-weight-regular\"\n\t\t\t\t\t\ttext\n\t\t\t\t\t\t@click=\"deleteAll\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<v-icon small class=\"mr-2\">\n\t\t\t\t\t\t\tmdi-trash-can-outline\n\t\t\t\t\t\t</v-icon>\n\t\t\t\t\t\t{{ $t(\"button.delete\") }}\n\t\t\t\t\t</v-btn>\n\t\t\t\t\t<v-spacer></v-spacer>\n\t\t\t\t\t<v-btn icon @click=\"filterExist = !filterExist\">\n\t\t\t\t\t\t<v-icon>mdi-filter </v-icon>\n\t\t\t\t\t</v-btn>\n\t\t\t\t</v-card-title>\n\t\t\t\t<v-divider></v-divider>\n\t\t\t</template>\n\t\t\t<template\n\t\t\t\tv-for=\"header in headers.filter((header) =>\n\t\t\t\t\theader.hasOwnProperty('formatter'),\n\t\t\t\t)\"\n\t\t\t\tv-slot:[`item.${header.value}`]=\"{ headers, value }\"\n\t\t\t>\n\t\t\t\t{{ header.formatter(value) }}\n\t\t\t</template>\n\t\t\t<template v-slot:[`item.createdName`]=\"{ item }\">\n\t\t\t\t<template>\n\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"28\">\n\t\t\t\t\t\t<span class=\"white--text\">\n\t\t\t\t\t\t\t{{ getAvatarText(item.createdName, 2) }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</v-avatar>\n\t\t\t\t\t{{ item.createdName }}\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t\t<template v-slot:[`item.roles`]=\"{ item }\">\n\t\t\t\t<span v-if=\"item.roles.length > 0\">\n\t\t\t\t\t<i v-for=\"role of item.roles\" :key=\"role.id\">\n\t\t\t\t\t\t{{ role.roleCode }} &nbsp;\n\t\t\t\t\t</i>\n\t\t\t\t</span>\n\t\t\t</template>\n\t\t\t<template v-slot:[`item.action`]=\"{ item }\">\n\t\t\t\t<v-icon class=\"mr-2\" color=\"blue\" @click=\"editItem(item)\">\n\t\t\t\t\tmdi-pencil-circle\n\t\t\t\t</v-icon>\n\t\t\t\t<v-icon color=\"error\" @click=\"deleteItem(item)\">\n\t\t\t\t\tmdi-close-circle\n\t\t\t\t</v-icon>\n\t\t\t</template>\n\t\t\t<template v-if=\"filterExist\" v-slot:[`body.prepend`]>\n\t\t\t\t<v-divider></v-divider>\n\t\t\t\t<tr>\n\t\t\t\t\t<td></td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\tv-model=\"groupUser_groupName\"\n\t\t\t\t\t\t\t:label=\"$t('label.group_name')\"\n\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\tclass=\"mt-2 rounded-pill\"\n\t\t\t\t\t\t></v-text-field>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\tv-model=\"groupUser_description\"\n\t\t\t\t\t\t\t:label=\"$t('label.description')\"\n\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\tclass=\"mt-2 rounded-pill\"\n\t\t\t\t\t\t></v-text-field>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<!-- <v-select\n\t\t\t\t\t\t\tv-model=\"groupUser_roles\"\n\t\t\t\t\t\t\titem-text=\"roleCode\"\n\t\t\t\t\t\t\t:items=\"filterRole\"\n\t\t\t\t\t\t\t:label=\"$t('label.roles')\"\n\t\t\t\t\t\t\t:item-value=\"(item) => item.roleCode\"\n\t\t\t\t\t\t\tclass=\"mt-2 rounded-pill\"\n\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t></v-select> -->\n\t\t\t\t\t\t<v-autocomplete\n\t\t\t\t\t\t\tv-model=\"groupUser_roles\"\n\t\t\t\t\t\t\titem-text=\"roleCode\"\n\t\t\t\t\t\t\t:items=\"filterRole\"\n\t\t\t\t\t\t\t:label=\"$t('label.roles')\"\n\t\t\t\t\t\t\t:item-value=\"(item) => item.roleCode\"\n\t\t\t\t\t\t\tclass=\"mt-2 rounded-pill\"\n\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</v-autocomplete>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\tv-model=\"groupUser_created\"\n\t\t\t\t\t\t\t:label=\"$t('label.created')\"\n\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\tclass=\"mt-2 rounded-pill\"\n\t\t\t\t\t\t></v-text-field>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<v-menu\n\t\t\t\t\t\t\tv-model=\"showPicker\"\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\n\t\t\t\t\t\t\ttransition=\"scale-transition\"\n\t\t\t\t\t\t\toffset-y\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\n\t\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\t\t\t:value=\"formatDateFns\"\n\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.created_date')\"\n\t\t\t\t\t\t\t\t\treadonly\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\n\t\t\t\t\t\t\t\t\t@click:clear=\"groupUser_date_create = null\"\n\t\t\t\t\t\t\t\t\tappend-icon=\"mdi-calendar\"\n\t\t\t\t\t\t\t\t\toutlined\n\t\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\t\tclass=\"mt-2 rounded-pill\"\n\t\t\t\t\t\t\t\t></v-text-field>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<v-date-picker\n\t\t\t\t\t\t\t\tv-model=\"groupUser_date_create\"\n\t\t\t\t\t\t\t\t@change=\"showPicker = false\"\n\t\t\t\t\t\t\t\tno-title\n\t\t\t\t\t\t\t\tscrollable\n\t\t\t\t\t\t\t\trange\n\t\t\t\t\t\t\t></v-date-picker>\n\t\t\t\t\t\t</v-menu>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</template>\n\t\t</v-data-table>\n\t\t<v-dialog v-model=\"dialog.delete\" width=\"fit-content\">\n\t\t\t<DeleteDialogVue @close=\"close\" @confirmDelete=\"onConfirmDelete\" />\n\t\t</v-dialog>\n\t</v-card>\n</template>\n\n<script>\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport store from \"@/store\";\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\nimport moment from \"moment\";\nimport constant from \"@/common/constant\";\n\nexport default {\n\tname: \"UserGroupListVue\",\n\tcomponents: { BreadcrumbsVue, DeleteDialogVue },\n\tdata() {\n\t\treturn {\n\t\t\tgroupUser_groupName: \"\",\n\t\t\tgroupUser_description: \"\",\n\t\t\tgroupUser_roles: this.$t(\"label.show_all\"),\n\t\t\tfilterRole: [],\n\t\t\tgroupUser_created: \"\",\n\t\t\tgroupUser_date_create: null,\n\t\t\tshowPicker: false,\n\t\t\tdateFormat: \"DD/MM/yyyy\",\n\t\t\tdialog: {\n\t\t\t\tdelete: false,\n\t\t\t},\n\t\t\theaders: [\n\t\t\t\t{\n\t\t\t\t\ttext: this.$t(\"label.group_name\"),\n\t\t\t\t\talign: \"start\",\n\t\t\t\t\tvalue: \"groupName\",\n\t\t\t\t\tfilter: (value) => {\n\t\t\t\t\t\tif (!this.groupUser_groupName || !value) return true;\n\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\n\t\t\t\t\t\t\t.toLocaleUpperCase()\n\t\t\t\t\t\t\t.includes(\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\n\t\t\t\t\t\t\t\t\tthis.groupUser_groupName,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t.toLocaleUpperCase(),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.$t(\"label.description\"),\n\t\t\t\t\talign: \"start\",\n\t\t\t\t\tvalue: \"description\",\n\t\t\t\t\tfilter: (value) => {\n\t\t\t\t\t\tif (!this.groupUser_description || !value) return true;\n\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\n\t\t\t\t\t\t\t.toLocaleUpperCase()\n\t\t\t\t\t\t\t.includes(\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\n\t\t\t\t\t\t\t\t\tthis.groupUser_description,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t.toLocaleUpperCase(),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.$t(\"label.roles\"),\n\t\t\t\t\talign: \"start\",\n\t\t\t\t\tvalue: \"roles\",\n\n\t\t\t\t\tfilter: (value) => {\n\t\t\t\t\t\tif (this.groupUser_roles == this.$t(\"label.show_all\"))\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\treturn value.filter((entry) => {\n\t\t\t\t\t\t\treturn entry.roleCode.includes(\n\t\t\t\t\t\t\t\tthis.groupUser_roles,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}).length;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.$t(\"label.created\"),\n\t\t\t\t\talign: \"start\",\n\t\t\t\t\tvalue: \"createdName\",\n\t\t\t\t\tfilter: (value) => {\n\t\t\t\t\t\tif (!this.groupUser_created || !value) return true;\n\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\n\t\t\t\t\t\t\t.toLocaleUpperCase()\n\t\t\t\t\t\t\t.includes(\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(this.groupUser_created)\n\t\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t\t.toLocaleUpperCase(),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.$t(\"label.date_create\"),\n\t\t\t\t\talign: \"start\",\n\t\t\t\t\tvalue: \"dateCreate\",\n\n\t\t\t\t\tformatter: (value) =>\n\t\t\t\t\t\tmoment(value).isValid()\n\t\t\t\t\t\t\t? moment(value).format(this.dateFormat)\n\t\t\t\t\t\t\t: \"\",\n\n\t\t\t\t\tfilter: (value) => {\n\t\t\t\t\t\tif (!this.groupUser_date_create) return true;\n\t\t\t\t\t\tlet values = `${this.groupUser_date_create}`.split(\n\t\t\t\t\t\t\tconstant.values.DATE_RANGE_SEPARATOR,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvalues = values\n\t\t\t\t\t\t\t.map((x) => {\n\t\t\t\t\t\t\t\treturn moment(`${x}`).toDate().getTime();\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.sort((a, b) => a - b);\n\t\t\t\t\t\tlet target = moment(value).toDate().getTime();\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\ttarget >= values[0] &&\n\t\t\t\t\t\t\ttarget <=\n\t\t\t\t\t\t\t\tvalues[values.length - 1] + 24 * 60 * 60 * 1000\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.$t(\"label.actions\"),\n\t\t\t\t\talign: \"start\",\n\t\t\t\t\tsortale: false,\n\t\t\t\t\tvalue: \"action\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tgroups: [],\n\t\t\tselected: [],\n\t\t};\n\t},\n\tasync created() {\n\t\tstore.state.loading = true;\n\t\tawait this.getAllUserGroup();\n\t\tawait this.getAllRole();\n\t},\n\tmounted() {\n\t\tstore.state.loading = false;\n\t},\n\tcomputed: {\n\t\tformatDateFns() {\n\t\t\tif (!this.groupUser_date_create) {\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t\tlet values = `${this.groupUser_date_create}`.split(\n\t\t\t\tconstant.values.DATE_RANGE_SEPARATOR,\n\t\t\t);\n\t\t\tlet result = [];\n\t\t\tresult = values.map((x) => {\n\t\t\t\treturn moment(x).format(\"DD/MM/yyyy\");\n\t\t\t});\n\t\t\treturn result.join(\"~\");\n\t\t},\n\t},\n\twatch: {\n\t\t\"dialog.delete\"(val) {\n\t\t\tval || this.close();\n\t\t},\n\t},\n\tmethods: {\n\t\tasync getAllUserGroup() {\n\t\t\tlet response;\n\t\t\ttry {\n\t\t\t\tresponse = await globalService.getData_Async(\n\t\t\t\t\tadministratorAPI.API_GetAllUserGroup(),\n\t\t\t\t);\n\n\t\t\t\tthis.preHandleResponse(response);\n\t\t\t\tthis.groups = response.data.filter((entry) => {\n\t\t\t\t\treturn !entry.isDelete;\n\t\t\t\t});\n\t\t\t\tthis.sortList(this.groups);\n\t\t\t} catch (error) {\n\t\t\t\tthis.toastError(error);\n\t\t\t}\n\t\t},\n\t\tasync getAllRole() {\n\t\t\tlet response = await globalService.getData_Async(\n\t\t\t\tadministratorAPI.API_GetAllRole(),\n\t\t\t);\n\t\t\tif (!response || !response.state) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.filterRole = response.data.filter((entry) => {\n\t\t\t\treturn !entry.isDelete;\n\t\t\t});\n\t\t\tthis.filterRole.unshift(this.$t(\"label.show_all\"));\n\t\t},\n\t\teditItem(item) {\n\t\t\tthis.$router.push({ path: `${item.id}`, append: true });\n\t\t},\n\t\tdeleteItem(item) {\n\t\t\tthis.selected = [item];\n\t\t\tthis.dialog.delete = true;\n\t\t},\n\t\tonConfirmDelete(value) {\n\t\t\tif (!value) {\n\t\t\t\tthis.close();\n\t\t\t} else {\n\t\t\t\tif (this.selected) {\n\t\t\t\t\tthis.deleteConfirm();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsortList(arr) {\n\t\t\treturn arr.sort((a, b) => {\n\t\t\t\treturn (\n\t\t\t\t\tmoment(b.createdDate).toDate().getTime() -\n\t\t\t\t\tmoment(a.createdDate).toDate().getTime()\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\tdeleteAll() {\n\t\t\tif (this.selected.length > 0) {\n\t\t\t\tthis.dialog.delete = true;\n\t\t\t} else {\n\t\t\t\tthis.toastError(this.$t(\"label.no_selected\"));\n\t\t\t}\n\t\t},\n\t\tasync deleteConfirm() {\n\t\t\tthis.selected = this.selected.map((x) => {\n\t\t\t\tx.isDelete = true;\n\t\t\t\treturn x;\n\t\t\t});\n\t\t\ttry {\n\t\t\t\tlet response = await globalService.postData_Async(\n\t\t\t\t\tadministratorAPI.API_SaveAllUserGroup(),\n\t\t\t\t\tthis.selected,\n\t\t\t\t);\n\t\t\t\tif (!response || !response.state) {\n\t\t\t\t\tthis.toastError(this.$t(\"message.delete_error\"));\n\t\t\t\t} else {\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.delete_success\"));\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.toastError(this.$t(\"error.load\"));\n\t\t\t} finally {\n\t\t\t\tthis.selected = [];\n\t\t\t\tthis.getAllUserGroup();\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t},\n\t\tclose() {\n\t\t\tthis.dialog.delete = false;\n\t\t},\n\t},\n};\n</script>\n\n<style></style>\n"]},"metadata":{},"sourceType":"module"}