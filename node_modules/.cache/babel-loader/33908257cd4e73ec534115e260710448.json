{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport EditRequestDetailVue from \"./EditRequestDetail.vue\";\nimport EditRequestGeneralInformationVue from \"./EditRequestGeneralInformation.vue\";\nimport CauHinhBieuMauVue from \"./CauHinhBieuMau.vue\";\nimport RequestDto from \"@/models/request.dto\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\"; // import EditRequestStorageVue from \"./EditRequestStorage.vue\";\n\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nexport default {\n  name: \"EditRequestVue\",\n  components: {\n    EditRequestGeneralInformationVue: EditRequestGeneralInformationVue,\n    EditRequestDetailVue: EditRequestDetailVue,\n    // EditRequestStorageVue,\n    CauHinhBieuMauVue: CauHinhBieuMauVue,\n    BreadcrumbsVue: BreadcrumbsVue\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      requiredRules: [function (v) {\n        return !!v || _this.$t(\"message.msg_1\");\n      }],\n      requestDto: RequestDto,\n      tab: null,\n      requestGroups: [],\n      requestTypes: [],\n      processInfos: [],\n      templateForms: [],\n      response_EForm_Id: null,\n      form: []\n    };\n  },\n  created: function created() {\n    this.$Progress.start();\n    this.init();\n  },\n  mounted: function mounted() {\n    this.$Progress.finish();\n  },\n  methods: {\n    init: function init() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this2._requestGroups();\n\n              case 2:\n                _this2.requestGroups = _context.sent;\n                _context.next = 5;\n                return _this2._requestTypes();\n\n              case 5:\n                _this2.requestTypes = _context.sent;\n                _context.next = 8;\n                return _this2._processInfos();\n\n              case 8:\n                _this2.processInfos = _context.sent;\n                _context.next = 11;\n                return _this2._templateForms();\n\n              case 11:\n                _this2.templateForms = _context.sent;\n\n                if (_this2.$router.currentRoute.params.id) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _this2.requestDto = {\n                  created: null,\n                  createdDate: new Date(),\n                  createdName: \"\",\n                  description: \"\",\n                  directoryPath: \"\",\n                  form: null,\n                  id: null,\n                  isActive: true,\n                  isDelete: false,\n                  modified: null,\n                  modifiedDate: new Date(),\n                  modifiedName: \"\",\n                  numberRequestData: 0,\n                  processInfo: null,\n                  requestCode: \"\",\n                  requestGroup: null,\n                  requestName: \"\",\n                  requestType: null,\n                  templateForms: [],\n                  tennant: null,\n                  tennantCode: \"\",\n                  tennantName: \"\"\n                };\n                return _context.abrupt(\"return\");\n\n              case 17:\n                _context.prev = 17;\n                _context.next = 20;\n                return globalService.getData_Async(administratorAPI.API_GetRequest(_this2.$router.currentRoute.params.id));\n\n              case 20:\n                response = _context.sent;\n\n                if (!(!response || !response.state)) {\n                  _context.next = 23;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this2.toastError(_this2.$t(\"error.load\")));\n\n              case 23:\n                _this2.requestDto = response.data;\n\n                _this2.m_update();\n\n                _context.next = 29;\n                break;\n\n              case 27:\n                _context.prev = 27;\n                _context.t0 = _context[\"catch\"](17);\n\n              case 29:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[17, 27]]);\n      }))();\n    },\n    _requestGroups: function _requestGroups() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestGroup());\n\n              case 3:\n                response = _context2.sent;\n\n                if (response) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 8:\n                return _context2.abrupt(\"return\", response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                }));\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                return _context2.abrupt(\"return\", []);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 11]]);\n      }))();\n    },\n    _requestTypes: function _requestTypes() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestType());\n\n              case 3:\n                response = _context3.sent;\n\n                if (response) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", []);\n\n              case 8:\n                return _context3.abrupt(\"return\", response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                }));\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](0);\n                return _context3.abrupt(\"return\", []);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 11]]);\n      }))();\n    },\n    _processInfos: function _processInfos() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllProcessInfo());\n\n              case 3:\n                response = _context4.sent;\n\n                if (response) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", []);\n\n              case 8:\n                return _context4.abrupt(\"return\", response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                }));\n\n              case 11:\n                _context4.prev = 11;\n                _context4.t0 = _context4[\"catch\"](0);\n                return _context4.abrupt(\"return\", []);\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 11]]);\n      }))();\n    },\n    _templateForms: function _templateForms() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllTemplateForm());\n\n              case 3:\n                response = _context5.sent;\n\n                if (response) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", []);\n\n              case 8:\n                return _context5.abrupt(\"return\", response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                }));\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                return _context5.abrupt(\"return\", []);\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 11]]);\n      }))();\n    },\n    m_update: function m_update() {\n      var that = this.requestDto;\n      this.requestDto.requestGroup = this.requestGroups.find(function (entry) {\n        return entry.id == that.requestGroup.id;\n      });\n      this.requestDto.requestType = this.requestTypes.find(function (entry) {\n        return entry.id == that.requestType.id;\n      });\n      this.requestDto.processInfo = this.processInfos.find(function (entry) {\n        return entry.id == that.processInfo.id;\n      });\n    },\n    onSaveRequestDto: function onSaveRequestDto(value) {\n      console.log(10);\n      this.requestDto = value;\n      this.tab = 1;\n    },\n    onSaveForm: function onSaveForm(value) {\n      this.response_EForm_Id = value.eformId;\n      this.form = value.form_;\n      console.log(this.response_EForm_Id, this.form);\n    },\n    onSaveTemplate: function onSaveTemplate(value) {\n      console.log(value);\n    },\n    saveRequest: function saveRequest() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var response_quest;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this3.requestDto.form = {\n                  id: null\n                };\n                _this3.requestDto.form.id = _this3.response_EForm_Id;\n                _context6.next = 4;\n                return globalService.putData_Async(\"/api/requests/\" + _this3.requestDto.id, _this3.requestDto);\n\n              case 4:\n                response_quest = _context6.sent;\n\n                if (response_quest.state) {\n                  _this3.toastSuccess(_this3.$t(\"message.success\"));\n                } else {\n                  _this3.toastError(_this3.$t(\"message.error\"));\n                }\n\n                _this3.$router.push({\n                  path: \"/administrator/list-request\"\n                });\n\n              case 7:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","EditRequestGeneralInformationVue","EditRequestDetailVue","CauHinhBieuMauVue","BreadcrumbsVue","data","requiredRules","requestDto","tab","requestGroups","requestTypes","processInfos","templateForms","response_EForm_Id","form","created","mounted","methods","init","createdDate","createdName","description","directoryPath","id","isActive","isDelete","modified","modifiedDate","modifiedName","numberRequestData","processInfo","requestCode","requestGroup","requestName","requestType","tennant","tennantCode","tennantName","globalService","administratorAPI","response","_requestGroups","_requestTypes","_processInfos","_templateForms","m_update","onSaveRequestDto","value","console","onSaveForm","onSaveTemplate","saveRequest","response_quest","path"],"sourceRoot":"src/views/modules/administrator/Request","sources":["EditRequest.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<BreadcrumbsVue />\r\n\t\t<v-row>\r\n\t\t\t<v-col cols=\"12\" md=\"8\"\r\n\t\t\t\t><v-tabs v-model=\"tab\" color=\"primary\">\r\n\t\t\t\t\t<v-tab key=\"general_information\">\r\n\t\t\t\t\t\t{{ $t(\"tab.general_information\") }}\r\n\t\t\t\t\t</v-tab>\r\n\t\t\t\t\t<v-tab :disabled=\"!requestDto.id\" key=\"detail\">\r\n\t\t\t\t\t\t{{ $t(\"tab.configuration_form\") }}\r\n\t\t\t\t\t</v-tab>\r\n\t\t\t\t\t<!-- <v-tab :disabled=\"!requestDto.id\" key=\"storage\">\r\n\t\t\t\t\t\t{{ $t(\"tab.storage\") }}\r\n\t\t\t\t\t</v-tab> -->\r\n\t\t\t\t\t<v-tab :disabled=\"!requestDto.id\" key=\"cauhinhbieumau\">\r\n\t\t\t\t\t\t{{ $t(\"Cấu hình biểu mẫu\") }}\r\n\t\t\t\t\t</v-tab>\r\n\t\t\t\t</v-tabs>\r\n\t\t\t</v-col>\r\n\t\t\t<v-col cols=\"12\" md=\"4\">\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\tcolor=\"red darken-1\"\r\n\t\t\t\t\tdark\r\n\t\t\t\t\tclass=\"float-right mt-1 rounded-pill\"\r\n\t\t\t\t\tto=\"/quan-tri/quan-tri-nhom-loai-yeu-cau\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-icon> mdi-keyboard-backspace</v-icon>\r\n\t\t\t\t\t{{ $t(\"button.back\") }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t\t<v-divider></v-divider>\r\n\t\t<v-tabs-items v-model=\"tab\">\r\n\t\t\t<v-tab-item key=\"general_information\">\r\n\t\t\t\t<EditRequestGeneralInformationVue\r\n\t\t\t\t\t:requestDto=\"requestDto\"\r\n\t\t\t\t\t@save=\"onSaveRequestDto\"\r\n\t\t\t\t/>\r\n\t\t\t</v-tab-item>\r\n\t\t\t<v-tab-item v-if=\"!!requestDto.id\" key=\"detail\">\r\n\t\t\t\t<EditRequestDetailVue\r\n\t\t\t\t\t:requestDto=\"requestDto\"\r\n\t\t\t\t\t@save=\"onSaveForm\"\r\n\t\t\t\t/>\r\n\t\t\t</v-tab-item>\r\n\t\t\t<!-- <v-tab-item v-if=\"!!requestDto.id\" key=\"storage\">\r\n\t\t\t\t<EditRequestStorageVue\r\n\t\t\t\t\t:requestDto=\"requestDto\"\r\n\t\t\t\t\t@save=\"onSaveForm\"\r\n\t\t\t\t/>\r\n\t\t\t</v-tab-item> -->\r\n\t\t\t<v-tab-item v-if=\"!!requestDto.id\" key=\"cauhinhbieumau\">\r\n\t\t\t\t<CauHinhBieuMauVue\r\n\t\t\t\t\t:requestDto=\"requestDto\"\r\n\t\t\t\t\t:Form=\"form\"\r\n\t\t\t\t\t@save=\"onSaveTemplate\"\r\n\t\t\t\t/>\r\n\t\t\t</v-tab-item>\r\n\t\t</v-tabs-items>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport EditRequestDetailVue from \"./EditRequestDetail.vue\";\r\nimport EditRequestGeneralInformationVue from \"./EditRequestGeneralInformation.vue\";\r\nimport CauHinhBieuMauVue from \"./CauHinhBieuMau.vue\";\r\nimport RequestDto from \"@/models/request.dto\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\n// import EditRequestStorageVue from \"./EditRequestStorage.vue\";\r\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\r\n\r\nexport default {\r\n\tname: \"EditRequestVue\",\r\n\tcomponents: {\r\n\t\tEditRequestGeneralInformationVue,\r\n\t\tEditRequestDetailVue,\r\n\t\t// EditRequestStorageVue,\r\n\t\tCauHinhBieuMauVue,\r\n\t\tBreadcrumbsVue,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trequiredRules: [(v) => !!v || this.$t(\"message.msg_1\")],\r\n\t\t\trequestDto: RequestDto,\r\n\t\t\ttab: null,\r\n\t\t\trequestGroups: [],\r\n\t\t\trequestTypes: [],\r\n\t\t\tprocessInfos: [],\r\n\t\t\ttemplateForms: [],\r\n\t\t\tresponse_EForm_Id: null,\r\n\t\t\tform: [],\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.$Progress.start();\r\n\t\tthis.init();\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$Progress.finish();\r\n\t},\r\n\tmethods: {\r\n\t\tasync init() {\r\n\t\t\tthis.requestGroups = await this._requestGroups();\r\n\t\t\tthis.requestTypes = await this._requestTypes();\r\n\t\t\tthis.processInfos = await this._processInfos();\r\n\t\t\tthis.templateForms = await this._templateForms();\r\n\t\t\tif (!this.$router.currentRoute.params.id) {\r\n\t\t\t\tthis.requestDto = {\r\n\t\t\t\t\tcreated: null,\r\n\t\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\t\tcreatedName: \"\",\r\n\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\tdirectoryPath: \"\",\r\n\t\t\t\t\tform: null,\r\n\t\t\t\t\tid: null,\r\n\t\t\t\t\tisActive: true,\r\n\t\t\t\t\tisDelete: false,\r\n\t\t\t\t\tmodified: null,\r\n\t\t\t\t\tmodifiedDate: new Date(),\r\n\t\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\t\tnumberRequestData: 0,\r\n\t\t\t\t\tprocessInfo: null,\r\n\t\t\t\t\trequestCode: \"\",\r\n\t\t\t\t\trequestGroup: null,\r\n\t\t\t\t\trequestName: \"\",\r\n\t\t\t\t\trequestType: null,\r\n\t\t\t\t\ttemplateForms: [],\r\n\t\t\t\t\ttennant: null,\r\n\t\t\t\t\ttennantCode: \"\",\r\n\t\t\t\t\ttennantName: \"\",\r\n\t\t\t\t};\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tlet response;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_GetRequest(\r\n\t\t\t\t\t\t\tthis.$router.currentRoute.params.id,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.requestDto = response.data;\r\n\t\t\t\t\tthis.m_update();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\t// //this.toastError(error);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _requestGroups() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestGroup(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\t//this.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _requestTypes() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestType(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\t//this.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _processInfos() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllProcessInfo(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\t//this.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _templateForms() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllTemplateForm(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\t//this.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tm_update() {\r\n\t\t\tlet that = this.requestDto;\r\n\t\t\tthis.requestDto.requestGroup = this.requestGroups.find((entry) => {\r\n\t\t\t\treturn entry.id == that.requestGroup.id;\r\n\t\t\t});\r\n\t\t\tthis.requestDto.requestType = this.requestTypes.find((entry) => {\r\n\t\t\t\treturn entry.id == that.requestType.id;\r\n\t\t\t});\r\n\t\t\tthis.requestDto.processInfo = this.processInfos.find((entry) => {\r\n\t\t\t\treturn entry.id == that.processInfo.id;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonSaveRequestDto(value) {\r\n\t\t\tconsole.log(10);\r\n\t\t\tthis.requestDto = value;\r\n\t\t\tthis.tab = 1;\r\n\t\t},\r\n\t\tonSaveForm(value) {\r\n\t\t\tthis.response_EForm_Id = value.eformId;\r\n\t\t\tthis.form = value.form_;\r\n\t\t\tconsole.log(this.response_EForm_Id, this.form);\r\n\t\t},\r\n\t\tonSaveTemplate(value) {\r\n\t\t\tconsole.log(value);\r\n\t\t},\r\n\t\tasync saveRequest() {\r\n\t\t\tthis.requestDto.form = {\r\n\t\t\t\tid: null,\r\n\t\t\t};\r\n\t\t\tthis.requestDto.form.id = this.response_EForm_Id;\r\n\t\t\tlet response_quest = await globalService.putData_Async(\r\n\t\t\t\t\"/api/requests/\" + this.requestDto.id,\r\n\t\t\t\tthis.requestDto,\r\n\t\t\t);\r\n\t\t\tif (response_quest.state) {\r\n\t\t\t\tthis.toastSuccess(this.$t(\"message.success\"));\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"message.error\"));\r\n\t\t\t}\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tpath: \"/administrator/list-request\",\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}