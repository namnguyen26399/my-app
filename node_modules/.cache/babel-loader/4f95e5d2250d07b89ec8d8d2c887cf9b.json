{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.splice.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TabVue from \"@/components/Tab.vue\";\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nimport store from \"@/store\";\nimport UserGroupDto from \"@/models/user-group.dto\";\nimport SelectListVue from \"@/components/SelectList.vue\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nexport default {\n  name: \"EditUserGroupVue\",\n  components: {\n    TabVue: TabVue,\n    BreadcrumbsVue: BreadcrumbsVue,\n    SelectListVue: SelectListVue\n  },\n  data: function data() {\n    return {\n      tabs: [{\n        key: \"information\",\n        title: this.$t(\"label.information\")\n      }],\n      buttons: [{\n        icon: \"mdi-content-save\",\n        title: this.$t(\"button.save\"),\n        color: \"blue darken-2\",\n        transparent: true,\n        dark: true,\n        event: this.save\n      }, // {\n      // \ticon: \"mdi-trash-can-outline\",\n      // \ttitle: this.$t(\"button.delete\"),\n      // \tcolor: \"black\",\n      // \ttransparent: true,\n      // \tdark: false,\n      // \tevent: this.delete,\n      // },\n      {\n        icon: \"mdi-arrow-left-top\",\n        title: this.$t(\"button.back\"),\n        color: \"black\",\n        transparent: true,\n        dark: false,\n        event: this.redirectBack\n      }],\n      group: {\n        groupName: \"\",\n        description: \"\"\n      },\n      users: [],\n      roles: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              store.state.loading = true;\n              _this.group = Object.assign({}, UserGroupDto);\n              _context.next = 4;\n              return _this.getAllUser();\n\n            case 4:\n              _context.next = 6;\n              return _this.getAllRole();\n\n            case 6:\n              _context.next = 8;\n              return _this.initialize();\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  mounted: function mounted() {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              store.state.loading = false;\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  methods: {\n    handleButtonClick: function handleButtonClick(event) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return event();\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    back: function back() {\n      this.$router.push({\n        path: \".\"\n      });\n    },\n    getAllUser: function getAllUser() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllUserInfo());\n\n              case 3:\n                response = _context4.sent;\n\n                if (_this2.preHandleResponse(response)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 6:\n                _this2.users = response.data.filter(function (x) {\n                  return !x.isDelete;\n                });\n                _context4.next = 12;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                _this2.toastError(_context4.t0);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 9]]);\n      }))();\n    },\n    getAllRole: function getAllRole() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRole());\n\n              case 3:\n                response = _context5.sent;\n\n                if (_this3.preHandleResponse(response)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 6:\n                _this3.roles = response.data.filter(function (x) {\n                  return !x.isDelete;\n                });\n                _context5.next = 12;\n                break;\n\n              case 9:\n                _context5.prev = 9;\n                _context5.t0 = _context5[\"catch\"](0);\n\n                _this3.toastError(_context5.t0);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 9]]);\n      }))();\n    },\n    handleUser: function handleUser(value) {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _this4.group.userInfos = value;\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }))();\n    },\n    handleRole: function handleRole(value) {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _this5.group.roles = value;\n\n              case 1:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }))();\n    },\n    save: function save() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _this6.group.groupName = _this6.group.groupName ? \"\".concat(_this6.group.groupName).trim() : \"\";\n                _this6.group.description = _this6.group.description ? \"\".concat(_this6.group.description).trim() : \"\";\n\n                if (_this6.validRequiredText(_this6.group.groupName)) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                _this6.toastError(_this6.$t(\"error.group_name\"));\n\n                return _context8.abrupt(\"return\");\n\n              case 5:\n                if (_this6.validText(_this6.group.description)) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 7:\n                if (!_this6.group.id) {\n                  _this6.group.createdDate = new Date();\n                  _this6.group.createdName = _this6.getUserInfo().fullName;\n                }\n\n                _this6.group.modifiedDate = new Date();\n                _this6.group.modifiedName = _this6.getUserInfo().fullName;\n                _context8.prev = 10;\n\n                if (_this6.group.id) {\n                  _context8.next = 18;\n                  break;\n                }\n\n                _context8.next = 14;\n                return globalService.postData_Async(administratorAPI.API_CreateUserGroup(), _this6.group);\n\n              case 14:\n                response = _context8.sent;\n\n                if (!response || !response.state) {\n                  _this6.toastError(_this6.$t(\"message.add_error\"));\n                } else {\n                  _this6.toastSuccess(_this6.$t(\"message.add_success\"));\n                }\n\n                _context8.next = 22;\n                break;\n\n              case 18:\n                _context8.next = 20;\n                return globalService.putData_Async(administratorAPI.API_SaveUserGroup(_this6.group.id), _this6.group);\n\n              case 20:\n                response = _context8.sent;\n\n                if (!response || !response.state) {\n                  _this6.toastError(_this6.$t(\"message.update_error\"));\n                } else {\n                  _this6.toastSuccess(_this6.$t(\"message.update_success\"));\n                }\n\n              case 22:\n                if (_this6.preHandleResponse(response)) {\n                  _context8.next = 24;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 24:\n                _this6.group = response.data;\n                _context8.next = 30;\n                break;\n\n              case 27:\n                _context8.prev = 27;\n                _context8.t0 = _context8[\"catch\"](10);\n\n                _this6.toastError(_context8.t0);\n\n              case 30:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[10, 27]]);\n      }))();\n    },\n    delete: function _delete() {\n      var _this7 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (_this7.group.id) {\n                  _context9.next = 3;\n                  break;\n                }\n\n                _this7.$router.push({\n                  path: \".\"\n                });\n\n                return _context9.abrupt(\"return\");\n\n              case 3:\n                _this7.group.isDelete = true;\n                _context9.prev = 4;\n                _context9.next = 7;\n                return globalService.putData_Async(administratorAPI.API_SaveUserGroup(_this7.group.id), _this7.group);\n\n              case 7:\n                response = _context9.sent;\n\n                if (_this7.preHandleResponse(response)) {\n                  _context9.next = 10;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 10:\n                _this7.$router.push({\n                  path: \".\"\n                });\n\n                _context9.next = 16;\n                break;\n\n              case 13:\n                _context9.prev = 13;\n                _context9.t0 = _context9[\"catch\"](4);\n\n                _this7.toastError(_context9.t0);\n\n              case 16:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[4, 13]]);\n      }))();\n    },\n    initialize: function initialize() {\n      var _this8 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        var response, _iterator, _step, user, index, _iterator2, _step2, role, _index;\n\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (_this8.$router.currentRoute.params.id) {\n                  _context10.next = 2;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\");\n\n              case 2:\n                _context10.prev = 2;\n                _context10.next = 5;\n                return globalService.getData_Async(administratorAPI.API_GetUserGroup(_this8.$router.currentRoute.params.id));\n\n              case 5:\n                response = _context10.sent;\n\n                if (_this8.preHandleResponse(response)) {\n                  _context10.next = 8;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\");\n\n              case 8:\n                _this8.group = response.data;\n                _iterator = _createForOfIteratorHelper(_this8.group.userInfos);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    user = _step.value;\n                    index = _this8.users.indexOf(user);\n\n                    _this8.users.splice(index, 1);\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                _iterator2 = _createForOfIteratorHelper(_this8.group.roles);\n\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    role = _step2.value;\n                    _index = _this8.roles.indexOf(role);\n\n                    _this8.roles.splice(_index, 1);\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n\n                _context10.next = 18;\n                break;\n\n              case 15:\n                _context10.prev = 15;\n                _context10.t0 = _context10[\"catch\"](2);\n\n                _this8.toastError(_context10.t0);\n\n              case 18:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[2, 15]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","TabVue","BreadcrumbsVue","SelectListVue","data","tabs","key","title","buttons","icon","color","transparent","dark","event","group","groupName","description","users","roles","created","store","mounted","methods","handleButtonClick","back","path","getAllUser","globalService","administratorAPI","response","getAllRole","handleUser","value","handleRole","save","delete","initialize","user","index","role"],"sourceRoot":"src/views/modules/administrator/UserGroup","sources":["EditUserGroup.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<BreadcrumbsVue />\r\n\t\t<TabVue\r\n\t\t\t:tabs=\"tabs\"\r\n\t\t\t:buttons=\"buttons\"\r\n\t\t\t@buttonClick=\"handleButtonClick\"\r\n\t\t/>\r\n\t\t<v-row class=\"mt-2\">\r\n\t\t\t<v-col cols=\"12\" md=\"6\">\r\n\t\t\t\t<m-text-field\r\n\t\t\t\t\t:label=\"$t('label.group_name')\"\r\n\t\t\t\t\t:value=\"group.groupName\"\r\n\t\t\t\t\t@value=\"(v) => (group.groupName = v)\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t>\r\n\t\t\t\t</m-text-field>\r\n\t\t\t</v-col>\r\n\t\t\t<v-col cols=\"12\" md=\"6\">\r\n\t\t\t\t<m-text-field\r\n\t\t\t\t\t:label=\"$t('label.description')\"\r\n\t\t\t\t\t:value=\"group.description\"\r\n\t\t\t\t\t@value=\"(v) => (group.description = v)\"\r\n\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t>\r\n\t\t\t\t</m-text-field>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t\t<TabVue\r\n\t\t\t:tabs=\"[{ key: 'user', title: $t('label.user') }]\"\r\n\t\t\t:buttons=\"[]\"\r\n\t\t/>\r\n\t\t<v-row>\r\n\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t<SelectListVue\r\n\t\t\t\t\t:items=\"users\"\r\n\t\t\t\t\t:selected=\"group.userInfos\"\r\n\t\t\t\t\tkeyName=\"id\"\r\n\t\t\t\t\tvalueName=\"fullName\"\r\n\t\t\t\t\t@update=\"handleUser\"\r\n\t\t\t\t/>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t\t<TabVue\r\n\t\t\t:tabs=\"[{ key: 'role', title: $t('label.role') }]\"\r\n\t\t\t:buttons=\"[]\"\r\n\t\t/>\r\n\t\t<v-row>\r\n\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t<SelectListVue\r\n\t\t\t\t\t:items=\"roles\"\r\n\t\t\t\t\t:selected=\"group.roles\"\r\n\t\t\t\t\tkeyName=\"id\"\r\n\t\t\t\t\tvalueName=\"roleName\"\r\n\t\t\t\t\t@update=\"handleRole\"\r\n\t\t\t\t/>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport TabVue from \"@/components/Tab.vue\";\r\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\r\nimport store from \"@/store\";\r\nimport UserGroupDto from \"@/models/user-group.dto\";\r\nimport SelectListVue from \"@/components/SelectList.vue\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\n\r\nexport default {\r\n\tname: \"EditUserGroupVue\",\r\n\tcomponents: { TabVue, BreadcrumbsVue, SelectListVue },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttabs: [{ key: \"information\", title: this.$t(\"label.information\") }],\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"mdi-content-save\",\r\n\t\t\t\t\ttitle: this.$t(\"button.save\"),\r\n\t\t\t\t\tcolor: \"blue darken-2\",\r\n\t\t\t\t\ttransparent: true,\r\n\t\t\t\t\tdark: true,\r\n\t\t\t\t\tevent: this.save,\r\n\t\t\t\t},\r\n\t\t\t\t// {\r\n\t\t\t\t// \ticon: \"mdi-trash-can-outline\",\r\n\t\t\t\t// \ttitle: this.$t(\"button.delete\"),\r\n\t\t\t\t// \tcolor: \"black\",\r\n\t\t\t\t// \ttransparent: true,\r\n\t\t\t\t// \tdark: false,\r\n\t\t\t\t// \tevent: this.delete,\r\n\t\t\t\t// },\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"mdi-arrow-left-top\",\r\n\t\t\t\t\ttitle: this.$t(\"button.back\"),\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\ttransparent: true,\r\n\t\t\t\t\tdark: false,\r\n\t\t\t\t\tevent: this.redirectBack,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tgroup: {\r\n\t\t\t\tgroupName: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t},\r\n\t\t\tusers: [],\r\n\t\t\troles: [],\r\n\t\t};\r\n\t},\r\n\tasync created() {\r\n\t\tstore.state.loading = true;\r\n\t\tthis.group = Object.assign({}, UserGroupDto);\r\n\t\tawait this.getAllUser();\r\n\t\tawait this.getAllRole();\r\n\t\tawait this.initialize();\r\n\t},\r\n\tasync mounted() {\r\n\t\tstore.state.loading = false;\r\n\t},\r\n\tmethods: {\r\n\t\tasync handleButtonClick(event) {\r\n\t\t\tawait event();\r\n\t\t},\r\n\t\tback() {\r\n\t\t\tthis.$router.push({ path: \".\" });\r\n\t\t},\r\n\t\tasync getAllUser() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllUserInfo(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!this.preHandleResponse(response)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.users = response.data.filter((x) => !x.isDelete);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getAllRole() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRole(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!this.preHandleResponse(response)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.roles = response.data.filter((x) => !x.isDelete);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync handleUser(value) {\r\n\t\t\tthis.group.userInfos = value;\r\n\t\t},\r\n\t\tasync handleRole(value) {\r\n\t\t\tthis.group.roles = value;\r\n\t\t},\r\n\t\tasync save() {\r\n\t\t\tthis.group.groupName = this.group.groupName\r\n\t\t\t\t? `${this.group.groupName}`.trim()\r\n\t\t\t\t: \"\";\r\n\t\t\tthis.group.description = this.group.description\r\n\t\t\t\t? `${this.group.description}`.trim()\r\n\t\t\t\t: \"\";\r\n\t\t\tif (!this.validRequiredText(this.group.groupName)) {\r\n\t\t\t\tthis.toastError(this.$t(\"error.group_name\"));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.validText(this.group.description)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet response;\r\n\t\t\tif (!this.group.id) {\r\n\t\t\t\tthis.group.createdDate = new Date();\r\n\t\t\t\tthis.group.createdName = this.getUserInfo().fullName;\r\n\t\t\t}\r\n\t\t\tthis.group.modifiedDate = new Date();\r\n\t\t\tthis.group.modifiedName = this.getUserInfo().fullName;\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.group.id) {\r\n\t\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_CreateUserGroup(),\r\n\t\t\t\t\t\tthis.group,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\t\tthis.toastError(this.$t(\"message.add_error\"));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toastSuccess(this.$t(\"message.add_success\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_SaveUserGroup(this.group.id),\r\n\t\t\t\t\t\tthis.group,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\t\tthis.toastError(this.$t(\"message.update_error\"));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toastSuccess(this.$t(\"message.update_success\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.preHandleResponse(response)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.group = response.data;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync delete() {\r\n\t\t\tif (!this.group.id) {\r\n\t\t\t\tthis.$router.push({ path: \".\" });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet response;\r\n\t\t\tthis.group.isDelete = true;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\tadministratorAPI.API_SaveUserGroup(this.group.id),\r\n\t\t\t\t\tthis.group,\r\n\t\t\t\t);\r\n\t\t\t\tif (!this.preHandleResponse(response)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$router.push({ path: \".\" });\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync initialize() {\r\n\t\t\tif (!this.$router.currentRoute.params.id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetUserGroup(\r\n\t\t\t\t\t\tthis.$router.currentRoute.params.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!this.preHandleResponse(response)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.group = response.data;\r\n\t\t\t\tfor (let user of this.group.userInfos) {\r\n\t\t\t\t\tlet index = this.users.indexOf(user);\r\n\t\t\t\t\tthis.users.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t\tfor (let role of this.group.roles) {\r\n\t\t\t\t\tlet index = this.roles.indexOf(role);\r\n\t\t\t\t\tthis.roles.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}