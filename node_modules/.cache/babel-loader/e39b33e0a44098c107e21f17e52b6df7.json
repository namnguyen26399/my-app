{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _typeof from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.sort.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport RequestDto from \"@/models/request.dto\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport EditRequestGroupVue from \"../RequestGroup/EditRequestGroup.vue\";\nimport EditRequestTypeVue from \"../RequestType/EditRequestType.vue\";\nimport EditTemplateFormVue from \"../TemplateForm/EditTemplateForm.vue\";\nimport TemplateFormGridVue from \"./TemplateFormGrid.vue\";\nimport moment from \"moment\";\nexport default {\n  name: \"EditRequestGeneralInformationVue\",\n  components: {\n    EditRequestGroupVue: EditRequestGroupVue,\n    EditRequestTypeVue: EditRequestTypeVue,\n    EditTemplateFormVue: EditTemplateFormVue,\n    TemplateFormGridVue: TemplateFormGridVue\n  },\n  props: [\"requestDto\"],\n  data: function data() {\n    var _this = this;\n\n    return {\n      errorMessageProcessInfo: \"\",\n      errorMessageRequestGroupName: \"\",\n      errorMessageRequestTypeName: \"\",\n      requiredRules: [function (v) {\n        return !!v || _this.$t(\"message.msg_1\");\n      }],\n      m_requestDto: RequestDto,\n      requestGroups: [],\n      requestGroups_full: [],\n      requestTypes: [],\n      requestTypes_full: [],\n      processInfos: [],\n      processInfos_full: [],\n      templateForms: [],\n      templateForms_full: [],\n      generateCodeOption: [],\n      ruleGenerateCodes: [],\n      isSaving: false,\n      editRequestGroupDialog: false,\n      editRequestTypeDialog: false,\n      editTemplateFormDialog: false,\n      templateFormGridDialog: false,\n      stepInProcesses: [],\n      defaultItemForm: {\n        created: null,\n        createdDate: new Date(),\n        createdName: \"\",\n        description: \"\",\n        fileExtension: \"\",\n        fullPath: \"\",\n        id: null,\n        isActive: true,\n        isDelete: false,\n        modified: null,\n        modifiedDate: new Date(),\n        modifiedName: \"\",\n        ofice365Path: \"\",\n        path: \"\",\n        templateFormCode: \"\",\n        templateFormName: \"\",\n        tennant: null,\n        tennantCode: \"\",\n        tennantName: \"\"\n      }\n    };\n  },\n  created: function created() {\n    this.$Progress.start();\n  },\n  mounted: function mounted() {\n    this.$Progress.finish();\n    this.initialize();\n  },\n  watch: {\n    requestDto: function requestDto(value) {\n      this.m_requestDto = value; // console.log(\"this.m_requestDto \", this.m_requestDto);\n    },\n    m_requestDto: function m_requestDto(val) {\n      val || this.resetRequestDto();\n\n      if (val) {\n        this.ruleGenerateCodes = [];\n\n        if (this.m_requestDto.ruleGenerateCode && this.m_requestDto.ruleGenerateCode.length > 0) {\n          this.ruleGenerateCodes = this.m_requestDto.ruleGenerateCode.split(\"$\").map(function (ele) {\n            return ele.slice(1, ele.length - 1);\n          }).filter(function (ele) {\n            return ele.length > 0;\n          });\n        }\n      }\n    }\n  },\n  computed: {\n    form: function form() {\n      return {\n        requestGroup: this.m_requestDto.requestGroup,\n        requestType: this.m_requestDto.requestType,\n        processInfo: this.m_requestDto.processInfos\n      };\n    },\n    m_templateForms: {\n      get: function get() {\n        return this.m_requestDto.templateForms;\n      },\n      set: function set(value) {\n        this.m_requestDto.templateForms = this.removeBlankId(value);\n      }\n    },\n    m_processInfo: {\n      get: function get() {\n        return this.m_requestDto.processInfos;\n      }\n    }\n  },\n  watchs: {},\n  methods: {\n    initialize: function initialize() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this2.m_requestDto = _this2.requestDto;\n                _context.next = 3;\n                return _this2._requestGroups();\n\n              case 3:\n                _context.next = 5;\n                return _this2._requestTypes();\n\n              case 5:\n                _context.next = 7;\n                return _this2.getAllgenerateCodeOption();\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    _requestGroups: function _requestGroups() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestGroup());\n\n              case 3:\n                response = _context2.sent;\n\n                if (response) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 8:\n                _this3.requestGroups = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _this3.requestGroups_full = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _this3.requestGroups = _this3.sortList(_this3.requestGroups);\n                _context2.next = 17;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                _this3.toastError(_context2.t0);\n\n                return _context2.abrupt(\"return\", []);\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 13]]);\n      }))();\n    },\n    getAllgenerateCodeOption: function getAllgenerateCodeOption() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return globalService.getData_Async(\"/api/_all/generate-code-option\");\n\n              case 3:\n                response = _context3.sent;\n\n                if (response) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _this4.toastError(_this4.$t(\"error.load\")));\n\n              case 6:\n                if (response.state) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _this4.toastError(_this4.$t(\"error.load\")));\n\n              case 8:\n                _this4.generateCodeOption = response.data;\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                _this4.toastError(_context3.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 11]]);\n      }))();\n    },\n    _requestTypes: function _requestTypes() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestType());\n\n              case 3:\n                response = _context4.sent;\n\n                if (response) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", []);\n\n              case 8:\n                _this5.requestTypes = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _this5.requestTypes_full = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _this5.requestTypes = _this5.sortList(_this5.requestTypes);\n                _context4.next = 17;\n                break;\n\n              case 13:\n                _context4.prev = 13;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                _this5.toastError(_context4.t0);\n\n                return _context4.abrupt(\"return\", []);\n\n              case 17:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 13]]);\n      }))();\n    },\n    _processInfos: function _processInfos() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response, i;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllProcessInfo());\n\n              case 3:\n                response = _context5.sent;\n\n                if (response) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", []);\n\n              case 8:\n                _this6.processInfos = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _this6.processInfos_full = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n                for (i = 0; i < _this6.processInfos.length; i++) {\n                  _this6.processInfos[i] = {\n                    id: _this6.processInfos[i].id,\n                    processName: _this6.processInfos[i].processName\n                  };\n                }\n\n                _this6.processInfos = _this6.sortList(_this6.processInfos);\n                _context5.next = 18;\n                break;\n\n              case 14:\n                _context5.prev = 14;\n                _context5.t0 = _context5[\"catch\"](0);\n\n                _this6.toastError(_context5.t0);\n\n                return _context5.abrupt(\"return\", []);\n\n              case 18:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 14]]);\n      }))();\n    },\n    _templateForms: function _templateForms() {\n      var _this7 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllTemplateForm());\n\n              case 3:\n                response = _context6.sent;\n\n                if (response) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", []);\n\n              case 8:\n                _this7.templateForms = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _this7.templateForms_full = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _this7.templateForms = _this7.sortList(_this7.templateForms);\n                _context6.next = 17;\n                break;\n\n              case 13:\n                _context6.prev = 13;\n                _context6.t0 = _context6[\"catch\"](0);\n\n                _this7.toastError(_context6.t0);\n\n                return _context6.abrupt(\"return\", []);\n\n              case 17:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 13]]);\n      }))();\n    },\n    save: function save() {\n      var _this8 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var _i, _Object$keys, key, response, editing;\n\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _this8.formError = false;\n                _i = 0, _Object$keys = Object.keys(_this8.form);\n\n              case 2:\n                if (!(_i < _Object$keys.length)) {\n                  _context7.next = 16;\n                  break;\n                }\n\n                key = _Object$keys[_i];\n\n                if (!_this8.form[key] || _this8.form[key] == null || _typeof(_this8.form[key]) !== \"object\") {\n                  _this8.formError = true;\n\n                  _this8.$refs[key].focus();\n                }\n\n                _this8.$refs[key].validate(true);\n\n                if (!_this8.formError) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                if (!(key == \"requestGroup\")) {\n                  _context7.next = 9;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _this8.errorMessageRequestGroupName = _this8.$t(\"message.msg_1\"));\n\n              case 9:\n                if (!(key == \"requestType\")) {\n                  _context7.next = 11;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _this8.errorMessageRequestTypeName = _this8.$t(\"message.msg_1\"));\n\n              case 11:\n                if (!(key == \"processInfo\")) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _this8.errorMessageProcessInfo = _this8.$t(\"message.msg_1\"));\n\n              case 13:\n                _i++;\n                _context7.next = 2;\n                break;\n\n              case 16:\n                editing = !!_this8.m_requestDto.id;\n\n                if (!_this8.isSaving) {\n                  _context7.next = 19;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\");\n\n              case 19:\n                _this8.isSaving = true;\n                _this8.m_requestDto.modified = _this8.getUserInfo();\n                _this8.m_requestDto.modifiedDate = new Date();\n                _this8.m_requestDto.requestName = _this8.m_requestDto.requestType.requestTypeName;\n                _context7.prev = 23;\n\n                if (!editing) {\n                  _context7.next = 37;\n                  break;\n                }\n\n                _this8.ruleGenerateCodes = _this8.ruleGenerateCodes.map(function (ele) {\n                  return ele = \"${\" + ele + \"}\";\n                });\n                _this8.m_requestDto.ruleGenerateCode = _this8.ruleGenerateCodes.join(\"\");\n                _context7.next = 29;\n                return globalService.putData_Async(administratorAPI.API_SaveRequest(_this8.m_requestDto.id), _this8.m_requestDto);\n\n              case 29:\n                response = _context7.sent;\n\n                if (response) {\n                  _context7.next = 32;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _this8.toastError(_this8.$t(\"message.update_error\")));\n\n              case 32:\n                if (response.state) {\n                  _context7.next = 34;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _this8.toastError(_this8.$t(\"message.update_error\")));\n\n              case 34:\n                _this8.toastSuccess(_this8.$t(\"message.update_success\"));\n\n                _context7.next = 51;\n                break;\n\n              case 37:\n                _this8.ruleGenerateCodes = _this8.ruleGenerateCodes.map(function (ele) {\n                  return ele = \"${\" + ele + \"}\";\n                });\n                _this8.m_requestDto.ruleGenerateCode = _this8.ruleGenerateCodes.join(\"\");\n                _this8.m_requestDto.created = _this8.getUserInfo();\n                _this8.m_requestDto.createdName = _this8.getUserInfo().createdName;\n                _this8.m_requestDto.createdDate = new Date();\n                _context7.next = 44;\n                return globalService.postData_Async(administratorAPI.API_CreateRequest(), _this8.m_requestDto);\n\n              case 44:\n                response = _context7.sent;\n\n                if (response) {\n                  _context7.next = 47;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _this8.toastError(_this8.$t(\"message.add_error\")));\n\n              case 47:\n                if (response.state) {\n                  _context7.next = 49;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", _this8.toastError(_this8.$t(\"message.add_error\")));\n\n              case 49:\n                _this8.toastSuccess(_this8.$t(\"message.add_success\"));\n\n                console.log(123);\n\n              case 51:\n                _this8.m_requestDto = response.data;\n                console.log(\"this.m_requestDto\", _this8.m_requestDto); // this.m_update();\n\n                _this8.$emit(\"save\", _this8.m_requestDto);\n\n                _context7.next = 60;\n                break;\n\n              case 56:\n                _context7.prev = 56;\n                _context7.t0 = _context7[\"catch\"](23);\n                console.log(456);\n\n                _this8.toastError(_context7.t0);\n\n              case 60:\n                _context7.prev = 60;\n                _this8.isSaving = false;\n                return _context7.finish(60);\n\n              case 63:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[23, 56, 60, 63]]);\n      }))();\n    },\n    m_update: function m_update() {\n      var that = this.m_requestDto;\n      this.m_requestDto.requestGroup = this.requestGroups_full.find(function (entry) {\n        return entry.id == that.requestGroup.id;\n      });\n      this.m_requestDto.requestType = this.requestTypes_full.find(function (entry) {\n        return entry.id == that.requestType.id;\n      });\n      this.m_requestDto.processInfo = this.processInfos_full.find(function (entry) {\n        return entry.id == that.processInfo.id;\n      });\n    },\n    openEditRequestGroup: function openEditRequestGroup() {\n      this.editRequestGroupDialog = true;\n    },\n    onClose: function onClose(value) {\n      if (value) {\n        this.editRequestGroupDialog = false;\n        this.editRequestTypeDialog = false;\n        this.editTemplateFormDialog = false;\n        this.templateFormGridDialog = false;\n      }\n    },\n    onSaveRequestGroup: function onSaveRequestGroup(value) {\n      this.requestGroups.push(value);\n\n      this._requestGroups();\n    },\n    openEditRequestType: function openEditRequestType() {\n      this.editRequestTypeDialog = true;\n    },\n    onSaveRequestType: function onSaveRequestType(value) {\n      this.requestTypes.push(value);\n\n      this._requestTypes();\n    },\n    openEditTemplateForm: function openEditTemplateForm() {\n      this.editTemplateFormDialog = true;\n    },\n    onSaveTemplateForm: function onSaveTemplateForm(value) {\n      this.templateForms.push(value);\n\n      this._templateForms();\n    },\n    openRequestSelection: function openRequestSelection() {\n      this.templateFormGridDialog = true;\n    },\n    getStepInProcesses: function getStepInProcesses(processInfos) {\n      var _this9 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var _iterator, _step, processInfo;\n\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _iterator = _createForOfIteratorHelper(processInfos);\n                _context8.prev = 1;\n\n                _iterator.s();\n\n              case 3:\n                if ((_step = _iterator.n()).done) {\n                  _context8.next = 10;\n                  break;\n                }\n\n                processInfo = _step.value;\n                _context8.next = 7;\n                return _this9._getStepInProcesses(processInfo);\n\n              case 7:\n                _this9.stepInProcesses[processInfo.id] = _context8.sent;\n\n              case 8:\n                _context8.next = 3;\n                break;\n\n              case 10:\n                _context8.next = 15;\n                break;\n\n              case 12:\n                _context8.prev = 12;\n                _context8.t0 = _context8[\"catch\"](1);\n\n                _iterator.e(_context8.t0);\n\n              case 15:\n                _context8.prev = 15;\n\n                _iterator.f();\n\n                return _context8.finish(15);\n\n              case 18:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[1, 12, 15, 18]]);\n      }))();\n    },\n    _getStepInProcesses: function _getStepInProcesses(processInfo) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllStepInProcessByProcessInfoId(processInfo.id));\n\n              case 3:\n                response = _context9.sent;\n\n                if (response) {\n                  _context9.next = 6;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\", []);\n\n              case 6:\n                if (response.state) {\n                  _context9.next = 8;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\", []);\n\n              case 8:\n                return _context9.abrupt(\"return\", response.data);\n\n              case 11:\n                _context9.prev = 11;\n                _context9.t0 = _context9[\"catch\"](0);\n                return _context9.abrupt(\"return\", []);\n\n              case 14:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 11]]);\n      }))();\n    },\n    selectProcessInfo: function selectProcessInfo(item) {\n      if (this.m_requestDto.processInfos) {\n        this.m_requestDto.processInfos.push({\n          processName: item.processName,\n          id: item.id\n        }); // console.log(this.m_requestDto.processInfos);\n\n        console.log(\"this.m_requestDto.process\", this.mrequestDto.processInfos);\n      } else {\n        this.m_requestDto.processInfos = [];\n        this.m_requestDto.processInfos.push({\n          processName: item.processName,\n          id: item.id\n        });\n      }\n    },\n    onSelectTemplateForm: function onSelectTemplateForm(value) {\n      this.m_requestDto.templateForms = value;\n      this.templateFormGridDialog = false;\n    },\n    deselectTemplateForm: function deselectTemplateForm(item) {\n      this.m_requestDto.templateForms.splice(this.requestDto.templateForms.indexOf(item), 1);\n    },\n    deselectProcessInfo: function deselectProcessInfo(item) {\n      this.m_requestDto.processInfos.splice(this.requestDto.processInfos.indexOf(item), 1);\n    },\n    sortList: function sortList(arr) {\n      return arr.sort(function (a, b) {\n        return moment(b.createdDate).toDate().getTime() - moment(a.createdDate).toDate().getTime();\n      });\n    },\n    resetRequestDto: function resetRequestDto() {\n      this.m_requestDto = RequestDto;\n    },\n    changeRG: function changeRG() {\n      var check = 0;\n\n      var _iterator2 = _createForOfIteratorHelper(this.requestGroups),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var requestGroup = _step2.value;\n          check = 0;\n\n          if (this.m_requestDto.requestGroup == requestGroup.requestGroupName) {\n            this.m_requestDto.requestGroup = requestGroup;\n            check = check + 1;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      if (check == 0 && typeof this.m_requestDto.requestGroup == \"string\" && this.m_requestDto.requestGroup.length > 0) {\n        this.errorMessageRequestGroupName = this.$t(\"error.correct_information\");\n      }\n\n      if (_typeof(this.m_requestDto.requestGroup) == \"object\") {\n        this.errorMessageRequestGroupName = \"\";\n      }\n    },\n    changeRT: function changeRT() {\n      var check = 0;\n\n      var _iterator3 = _createForOfIteratorHelper(this.requestTypes),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var requestType = _step3.value;\n          check = 0;\n\n          if (this.m_requestDto.requestType == requestType.requestTypeName) {\n            this.m_requestDto.requestType = requestType;\n            check = check + 1;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      if (check == 0 && typeof this.m_requestDto.requestType == \"string\" && this.m_requestDto.requestType.length > 0) {\n        this.errorMessageRequestTypeName = this.$t(\"error.correct_information\");\n      }\n\n      if (_typeof(this.m_requestDto.requestType) == \"object\") {\n        this.errorMessageRequestTypeName = \"\";\n      }\n    },\n    changePI: function changePI() {\n      var check = 0;\n\n      var _iterator4 = _createForOfIteratorHelper(this.processInfos),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var processInfo = _step4.value;\n          check = 0;\n\n          if (this.m_requestDto.processInfo == processInfo.processName) {\n            this.m_requestDto.processInfo = processInfo;\n            check = check + 1;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      if (check == 0 && typeof this.m_requestDto.processInfo == \"string\" && this.m_requestDto.processInfo.length > 0) {\n        this.errorMessageProcessInfo = this.$t(\"error.correct_information\");\n      }\n\n      if (_typeof(this.m_requestDto.processInfo) == \"object\") {\n        this.errorMessageProcessInfo = \"\";\n      }\n    },\n    loadTemplate: function loadTemplate() {\n      var _this10 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.next = 2;\n                return _this10._templateForms();\n\n              case 2:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }))();\n    },\n    loadProcessInfo: function loadProcessInfo() {\n      var _this11 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return _this11._processInfos();\n\n              case 2:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11);\n      }))();\n    },\n    deselectGenerateCode: function deselectGenerateCode(item) {\n      this.ruleGenerateCodes.splice(this.ruleGenerateCodes.indexOf(item), 1);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","EditRequestGroupVue","EditRequestTypeVue","EditTemplateFormVue","TemplateFormGridVue","props","data","errorMessageProcessInfo","errorMessageRequestGroupName","errorMessageRequestTypeName","requiredRules","m_requestDto","requestGroups","requestGroups_full","requestTypes","requestTypes_full","processInfos","processInfos_full","templateForms","templateForms_full","generateCodeOption","ruleGenerateCodes","isSaving","editRequestGroupDialog","editRequestTypeDialog","editTemplateFormDialog","templateFormGridDialog","stepInProcesses","defaultItemForm","created","createdDate","createdName","description","fileExtension","fullPath","id","isActive","isDelete","modified","modifiedDate","modifiedName","ofice365Path","path","templateFormCode","templateFormName","tennant","tennantCode","tennantName","mounted","watch","requestDto","value","val","split","map","filter","computed","form","requestGroup","requestType","processInfo","m_templateForms","get","set","m_processInfo","watchs","methods","initialize","_requestGroups","globalService","administratorAPI","response","getAllgenerateCodeOption","_requestTypes","_processInfos","processName","_templateForms","save","Object","key","editing","console","m_update","openEditRequestGroup","onClose","onSaveRequestGroup","openEditRequestType","onSaveRequestType","openEditTemplateForm","onSaveTemplateForm","openRequestSelection","getStepInProcesses","_getStepInProcesses","selectProcessInfo","item","onSelectTemplateForm","deselectTemplateForm","deselectProcessInfo","sortList","arr","moment","resetRequestDto","changeRG","check","changeRT","changePI","loadTemplate","loadProcessInfo","deselectGenerateCode"],"sourceRoot":"src/views/modules/administrator/Request","sources":["EditRequestGeneralInformation.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<v-dialog max-width=\"60vw\" persistent v-model=\"editRequestGroupDialog\">\r\n\t\t\t<EditRequestGroupVue @close=\"onClose\" @save=\"onSaveRequestGroup\" />\r\n\t\t</v-dialog>\r\n\t\t<v-dialog max-width=\"60vw\" persistent v-model=\"editRequestTypeDialog\">\r\n\t\t\t<EditRequestTypeVue @close=\"onClose\" @save=\"onSaveRequestType\" />\r\n\t\t</v-dialog>\r\n\t\t<v-dialog max-width=\"60vw\" persistent v-model=\"editTemplateFormDialog\">\r\n\t\t\t<EditTemplateFormVue\r\n\t\t\t\t@close=\"onClose\"\r\n\t\t\t\t@save=\"onSaveTemplateForm\"\r\n\t\t\t\t:templateFormDto=\"defaultItemForm\"\r\n\t\t\t/>\r\n\t\t</v-dialog>\r\n\t\t<v-dialog v-model=\"templateFormGridDialog\" persistent max-width=\"60vw\">\r\n\t\t\t<TemplateFormGridVue\r\n\t\t\t\t:items=\"templateForms\"\r\n\t\t\t\t:selected=\"requestDto.templateForms\"\r\n\t\t\t\t@close=\"onClose\"\r\n\t\t\t\t@save=\"onSelectTemplateForm\"\r\n\t\t\t/>\r\n\t\t</v-dialog>\r\n\t\t<v-row>\r\n\t\t\t<v-col cols=\"12\" md=\"12\">\r\n\t\t\t\t<v-row class=\"mt-4\">\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"10\">\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tref=\"requestGroup\"\r\n\t\t\t\t\t\t\tv-model=\"m_requestDto.requestGroup\"\r\n\t\t\t\t\t\t\t:items=\"requestGroups\"\r\n\t\t\t\t\t\t\titem-text=\"requestGroupName\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tprepend-inner-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t@change=\"changeRG\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t:error-messages=\"errorMessageRequestGroupName\"\r\n\t\t\t\t\t\t\tmaxLength=\"255\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t{{ $t(\"label.request_group\") }}\r\n\t\t\t\t\t\t\t\t<span class=\"text-red\">\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"label.star\") }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"2\">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\t@click=\"openEditRequestGroup()\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon>mdi-plus-circle</v-icon>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"10\">\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tref=\"requestType\"\r\n\t\t\t\t\t\t\tv-model=\"m_requestDto.requestType\"\r\n\t\t\t\t\t\t\t:items=\"requestTypes\"\r\n\t\t\t\t\t\t\titem-text=\"requestTypeName\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t@change=\"changeRT\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tprepend-inner-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t\t:error-messages=\"errorMessageRequestTypeName\"\r\n\t\t\t\t\t\t\tmaxLength=\"255\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t{{ $t(\"label.request_type\") }}\r\n\t\t\t\t\t\t\t\t<span class=\"text-red\">\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"label.star\") }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"2\">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\t@click=\"openEditRequestType()\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon>mdi-plus-circle</v-icon>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"10\">\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tref=\"processInfo\"\r\n\t\t\t\t\t\t\tv-model=\"m_requestDto.processInfos\"\r\n\t\t\t\t\t\t\t:items=\"processInfos\"\r\n\t\t\t\t\t\t\titem-text=\"processName\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t@click=\"loadProcessInfo()\"\r\n\t\t\t\t\t\t\t@change=\"changePI\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tprepend-inner-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t\t:error-messages=\"errorMessageProcessInfo\"\r\n\t\t\t\t\t\t\tmaxLength=\"255\"\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t{{ $t(\"label.application_process\") }}\r\n\t\t\t\t\t\t\t\t<span class=\"text-red\">\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"label.star\") }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<!-- <template v-slot:item=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<v-list-item\r\n\t\t\t\t\t\t\t\t\tclass=\"rounded-lg bordered border-dashed m-2\"\r\n\t\t\t\t\t\t\t\t\t@click.stop=\"selectProcessInfo(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-subtitle-2 text-primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.processName }}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"stepInProcess in stepInProcesses[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"rounded-lg mr-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\t\t\t\t\t\tx-small\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"stepInProcess.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstepInProcess.stepInProcessName\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t</template> -->\r\n\t\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item }\">\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tclass=\"ma-2\"\r\n\t\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\t@click:close=\"deselectProcessInfo(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ item.processName }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"2\">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\tto=\"/administrator/quy-trinh/tao-moi-v2\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon>mdi-plus-circle</v-icon>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"10\">\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tv-model=\"m_templateForms\"\r\n\t\t\t\t\t\t\t:items=\"templateForms\"\r\n\t\t\t\t\t\t\t@click=\"loadTemplate()\"\r\n\t\t\t\t\t\t\titem-text=\"templateFormName\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.template_form')\"\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tprepend-inner-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t\tmaxLength=\"255\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item }\">\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tclass=\"ma-2\"\r\n\t\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\t@click:close=\"deselectTemplateForm(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ item.templateFormName }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col cols=\"12\" md=\"2\">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\t@click=\"openEditTemplateForm()\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon>mdi-plus-circle</v-icon>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\t@click=\"openRequestSelection()\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon>mdi-grid </v-icon>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\" sm=\"12\" md=\"10\">\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tv-model=\"ruleGenerateCodes\"\r\n\t\t\t\t\t\t\t:items=\"generateCodeOption\"\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\tchips\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tprepend-inner-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t{{ $t(\"label.code_generation_rules\") }}\r\n\t\t\t\t\t\t\t\t<span class=\"text-red\">\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"label.star\") }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item }\">\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tclass=\"ma-2\"\r\n\t\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\t@click:close=\"deselectGenerateCode(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t\t\t@click=\"save()\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon> mdi-content-save</v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.save\") }}\r\n\t\t\t\t\t\t</v-btn></v-col\r\n\t\t\t\t\t>\r\n\t\t\t\t</v-row></v-col\r\n\t\t\t>\r\n\t\t</v-row>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport RequestDto from \"@/models/request.dto\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nimport EditRequestGroupVue from \"../RequestGroup/EditRequestGroup.vue\";\r\nimport EditRequestTypeVue from \"../RequestType/EditRequestType.vue\";\r\nimport EditTemplateFormVue from \"../TemplateForm/EditTemplateForm.vue\";\r\nimport TemplateFormGridVue from \"./TemplateFormGrid.vue\";\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n\tname: \"EditRequestGeneralInformationVue\",\r\n\tcomponents: {\r\n\t\tEditRequestGroupVue,\r\n\t\tEditRequestTypeVue,\r\n\t\tEditTemplateFormVue,\r\n\t\tTemplateFormGridVue,\r\n\t},\r\n\tprops: [\"requestDto\"],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\terrorMessageProcessInfo: \"\",\r\n\t\t\terrorMessageRequestGroupName: \"\",\r\n\t\t\terrorMessageRequestTypeName: \"\",\r\n\t\t\trequiredRules: [(v) => !!v || this.$t(\"message.msg_1\")],\r\n\t\t\tm_requestDto: RequestDto,\r\n\t\t\trequestGroups: [],\r\n\t\t\trequestGroups_full: [],\r\n\t\t\trequestTypes: [],\r\n\t\t\trequestTypes_full: [],\r\n\t\t\tprocessInfos: [],\r\n\t\t\tprocessInfos_full: [],\r\n\t\t\ttemplateForms: [],\r\n\t\t\ttemplateForms_full: [],\r\n\t\t\tgenerateCodeOption: [],\r\n\t\t\truleGenerateCodes: [],\r\n\t\t\tisSaving: false,\r\n\t\t\teditRequestGroupDialog: false,\r\n\t\t\teditRequestTypeDialog: false,\r\n\t\t\teditTemplateFormDialog: false,\r\n\t\t\ttemplateFormGridDialog: false,\r\n\t\t\tstepInProcesses: [],\r\n\t\t\tdefaultItemForm: {\r\n\t\t\t\tcreated: null,\r\n\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tfileExtension: \"\",\r\n\t\t\t\tfullPath: \"\",\r\n\t\t\t\tid: null,\r\n\t\t\t\tisActive: true,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tmodified: null,\r\n\t\t\t\tmodifiedDate: new Date(),\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tofice365Path: \"\",\r\n\t\t\t\tpath: \"\",\r\n\t\t\t\ttemplateFormCode: \"\",\r\n\t\t\t\ttemplateFormName: \"\",\r\n\t\t\t\ttennant: null,\r\n\t\t\t\ttennantCode: \"\",\r\n\t\t\t\ttennantName: \"\",\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.$Progress.start();\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$Progress.finish();\r\n\t\tthis.initialize();\r\n\t},\r\n\twatch: {\r\n\t\trequestDto(value) {\r\n\t\t\tthis.m_requestDto = value;\r\n\t\t\t// console.log(\"this.m_requestDto \", this.m_requestDto);\r\n\t\t},\r\n\t\tm_requestDto(val) {\r\n\t\t\tval || this.resetRequestDto();\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.ruleGenerateCodes = [];\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.m_requestDto.ruleGenerateCode &&\r\n\t\t\t\t\tthis.m_requestDto.ruleGenerateCode.length > 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.ruleGenerateCodes = this.m_requestDto.ruleGenerateCode\r\n\t\t\t\t\t\t.split(\"$\")\r\n\t\t\t\t\t\t.map((ele) => ele.slice(1, ele.length - 1))\r\n\t\t\t\t\t\t.filter((ele) => ele.length > 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\tform() {\r\n\t\t\treturn {\r\n\t\t\t\trequestGroup: this.m_requestDto.requestGroup,\r\n\t\t\t\trequestType: this.m_requestDto.requestType,\r\n\t\t\t\tprocessInfo: this.m_requestDto.processInfos,\r\n\t\t\t};\r\n\t\t},\r\n\t\tm_templateForms: {\r\n\t\t\tget: function () {\r\n\t\t\t\treturn this.m_requestDto.templateForms;\r\n\t\t\t},\r\n\t\t\tset: function (value) {\r\n\t\t\t\tthis.m_requestDto.templateForms = this.removeBlankId(value);\r\n\t\t\t},\r\n\t\t},\r\n\t\tm_processInfo: {\r\n\t\t\tget: function () {\r\n\t\t\t\treturn this.m_requestDto.processInfos;\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\twatchs: {},\r\n\tmethods: {\r\n\t\tasync initialize() {\r\n\t\t\tthis.m_requestDto = this.requestDto;\r\n\t\t\tawait this._requestGroups();\r\n\t\t\tawait this._requestTypes();\r\n\t\t\tawait this.getAllgenerateCodeOption();\r\n\t\t},\r\n\t\tasync _requestGroups() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestGroup(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tthis.requestGroups = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tthis.requestGroups_full = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.requestGroups = this.sortList(this.requestGroups);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getAllgenerateCodeOption() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\t\"/api/_all/generate-code-option\",\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis.generateCodeOption = response.data;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error.message);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _requestTypes() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestType(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tthis.requestTypes = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tthis.requestTypes_full = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.requestTypes = this.sortList(this.requestTypes);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _processInfos() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllProcessInfo(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tthis.processInfos = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tthis.processInfos_full = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tfor (let i = 0; i < this.processInfos.length; i++) {\r\n\t\t\t\t\tthis.processInfos[i] = {\r\n\t\t\t\t\t\tid: this.processInfos[i].id,\r\n\t\t\t\t\t\tprocessName: this.processInfos[i].processName,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tthis.processInfos = this.sortList(this.processInfos);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _templateForms() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllTemplateForm(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tthis.templateForms = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tthis.templateForms_full = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.templateForms = this.sortList(this.templateForms);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync save() {\r\n\t\t\tthis.formError = false;\r\n\t\t\tfor (let key of Object.keys(this.form)) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t!this.form[key] ||\r\n\t\t\t\t\tthis.form[key] == null ||\r\n\t\t\t\t\ttypeof this.form[key] !== \"object\"\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.formError = true;\r\n\t\t\t\t\tthis.$refs[key].focus();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$refs[key].validate(true);\r\n\t\t\t\tif (this.formError) {\r\n\t\t\t\t\tif (key == \"requestGroup\") {\r\n\t\t\t\t\t\treturn (this.errorMessageRequestGroupName =\r\n\t\t\t\t\t\t\tthis.$t(\"message.msg_1\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key == \"requestType\") {\r\n\t\t\t\t\t\treturn (this.errorMessageRequestTypeName =\r\n\t\t\t\t\t\t\tthis.$t(\"message.msg_1\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key == \"processInfo\") {\r\n\t\t\t\t\t\treturn (this.errorMessageProcessInfo =\r\n\t\t\t\t\t\t\tthis.$t(\"message.msg_1\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet response;\r\n\t\t\tlet editing = !!this.m_requestDto.id;\r\n\t\t\tif (this.isSaving) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isSaving = true;\r\n\t\t\tthis.m_requestDto.modified = this.getUserInfo();\r\n\t\t\tthis.m_requestDto.modifiedDate = new Date();\r\n\t\t\tthis.m_requestDto.requestName =\r\n\t\t\t\tthis.m_requestDto.requestType.requestTypeName;\r\n\t\t\ttry {\r\n\t\t\t\tif (editing) {\r\n\t\t\t\t\tthis.ruleGenerateCodes = this.ruleGenerateCodes.map(\r\n\t\t\t\t\t\t(ele) => (ele = \"${\" + ele + \"}\"),\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.m_requestDto.ruleGenerateCode =\r\n\t\t\t\t\t\tthis.ruleGenerateCodes.join(\"\");\r\n\t\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_SaveRequest(this.m_requestDto.id),\r\n\t\t\t\t\t\tthis.m_requestDto,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"message.update_error\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!response.state) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"message.update_error\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.update_success\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ruleGenerateCodes = this.ruleGenerateCodes.map(\r\n\t\t\t\t\t\t(ele) => (ele = \"${\" + ele + \"}\"),\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.m_requestDto.ruleGenerateCode =\r\n\t\t\t\t\t\tthis.ruleGenerateCodes.join(\"\");\r\n\t\t\t\t\tthis.m_requestDto.created = this.getUserInfo();\r\n\t\t\t\t\tthis.m_requestDto.createdName =\r\n\t\t\t\t\t\tthis.getUserInfo().createdName;\r\n\t\t\t\t\tthis.m_requestDto.createdDate = new Date();\r\n\t\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_CreateRequest(),\r\n\t\t\t\t\t\tthis.m_requestDto,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"message.add_error\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!response.state) {\r\n\t\t\t\t\t\treturn this.toastError(this.$t(\"message.add_error\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.add_success\"));\r\n\t\t\t\t\tconsole.log(123);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.m_requestDto = response.data;\r\n\t\t\t\tconsole.log(\"this.m_requestDto\", this.m_requestDto);\r\n\t\t\t\t// this.m_update();\r\n\t\t\t\tthis.$emit(\"save\", this.m_requestDto);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(456);\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.isSaving = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tm_update() {\r\n\t\t\tlet that = this.m_requestDto;\r\n\t\t\tthis.m_requestDto.requestGroup = this.requestGroups_full.find(\r\n\t\t\t\t(entry) => {\r\n\t\t\t\t\treturn entry.id == that.requestGroup.id;\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t\tthis.m_requestDto.requestType = this.requestTypes_full.find(\r\n\t\t\t\t(entry) => {\r\n\t\t\t\t\treturn entry.id == that.requestType.id;\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t\tthis.m_requestDto.processInfo = this.processInfos_full.find(\r\n\t\t\t\t(entry) => {\r\n\t\t\t\t\treturn entry.id == that.processInfo.id;\r\n\t\t\t\t},\r\n\t\t\t);\r\n\t\t},\r\n\t\topenEditRequestGroup() {\r\n\t\t\tthis.editRequestGroupDialog = true;\r\n\t\t},\r\n\t\tonClose(value) {\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.editRequestGroupDialog = false;\r\n\t\t\t\tthis.editRequestTypeDialog = false;\r\n\t\t\t\tthis.editTemplateFormDialog = false;\r\n\t\t\t\tthis.templateFormGridDialog = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSaveRequestGroup(value) {\r\n\t\t\tthis.requestGroups.push(value);\r\n\t\t\tthis._requestGroups();\r\n\t\t},\r\n\t\topenEditRequestType() {\r\n\t\t\tthis.editRequestTypeDialog = true;\r\n\t\t},\r\n\t\tonSaveRequestType(value) {\r\n\t\t\tthis.requestTypes.push(value);\r\n\t\t\tthis._requestTypes();\r\n\t\t},\r\n\t\topenEditTemplateForm() {\r\n\t\t\tthis.editTemplateFormDialog = true;\r\n\t\t},\r\n\t\tonSaveTemplateForm(value) {\r\n\t\t\tthis.templateForms.push(value);\r\n\t\t\tthis._templateForms();\r\n\t\t},\r\n\t\topenRequestSelection() {\r\n\t\t\tthis.templateFormGridDialog = true;\r\n\t\t},\r\n\t\tasync getStepInProcesses(processInfos) {\r\n\t\t\tfor (let processInfo of processInfos) {\r\n\t\t\t\tthis.stepInProcesses[processInfo.id] =\r\n\t\t\t\t\tawait this._getStepInProcesses(processInfo);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _getStepInProcesses(processInfo) {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllStepInProcessByProcessInfoId(\r\n\t\t\t\t\t\tprocessInfo.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data;\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectProcessInfo(item) {\r\n\t\t\tif (this.m_requestDto.processInfos) {\r\n\t\t\t\tthis.m_requestDto.processInfos.push({\r\n\t\t\t\t\tprocessName: item.processName,\r\n\t\t\t\t\tid: item.id,\r\n\t\t\t\t});\r\n\t\t\t\t// console.log(this.m_requestDto.processInfos);\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"this.m_requestDto.process\",\r\n\t\t\t\t\tthis.mrequestDto.processInfos,\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tthis.m_requestDto.processInfos = [];\r\n\t\t\t\tthis.m_requestDto.processInfos.push({\r\n\t\t\t\t\tprocessName: item.processName,\r\n\t\t\t\t\tid: item.id,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSelectTemplateForm(value) {\r\n\t\t\tthis.m_requestDto.templateForms = value;\r\n\t\t\tthis.templateFormGridDialog = false;\r\n\t\t},\r\n\t\tdeselectTemplateForm(item) {\r\n\t\t\tthis.m_requestDto.templateForms.splice(\r\n\t\t\t\tthis.requestDto.templateForms.indexOf(item),\r\n\t\t\t\t1,\r\n\t\t\t);\r\n\t\t},\r\n\t\tdeselectProcessInfo(item) {\r\n\t\t\tthis.m_requestDto.processInfos.splice(\r\n\t\t\t\tthis.requestDto.processInfos.indexOf(item),\r\n\t\t\t\t1,\r\n\t\t\t);\r\n\t\t},\r\n\t\tsortList(arr) {\r\n\t\t\treturn arr.sort((a, b) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tmoment(b.createdDate).toDate().getTime() -\r\n\t\t\t\t\tmoment(a.createdDate).toDate().getTime()\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\tresetRequestDto() {\r\n\t\t\tthis.m_requestDto = RequestDto;\r\n\t\t},\r\n\t\tchangeRG() {\r\n\t\t\tlet check = 0;\r\n\t\t\tfor (const requestGroup of this.requestGroups) {\r\n\t\t\t\tcheck = 0;\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.m_requestDto.requestGroup ==\r\n\t\t\t\t\trequestGroup.requestGroupName\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.m_requestDto.requestGroup = requestGroup;\r\n\t\t\t\t\tcheck = check + 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tcheck == 0 &&\r\n\t\t\t\ttypeof this.m_requestDto.requestGroup == \"string\" &&\r\n\t\t\t\tthis.m_requestDto.requestGroup.length > 0\r\n\t\t\t) {\r\n\t\t\t\tthis.errorMessageRequestGroupName = this.$t(\r\n\t\t\t\t\t\"error.correct_information\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (typeof this.m_requestDto.requestGroup == \"object\") {\r\n\t\t\t\tthis.errorMessageRequestGroupName = \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangeRT() {\r\n\t\t\tlet check = 0;\r\n\t\t\tfor (const requestType of this.requestTypes) {\r\n\t\t\t\tcheck = 0;\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.m_requestDto.requestType == requestType.requestTypeName\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.m_requestDto.requestType = requestType;\r\n\t\t\t\t\tcheck = check + 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tcheck == 0 &&\r\n\t\t\t\ttypeof this.m_requestDto.requestType == \"string\" &&\r\n\t\t\t\tthis.m_requestDto.requestType.length > 0\r\n\t\t\t) {\r\n\t\t\t\tthis.errorMessageRequestTypeName = this.$t(\r\n\t\t\t\t\t\"error.correct_information\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (typeof this.m_requestDto.requestType == \"object\") {\r\n\t\t\t\tthis.errorMessageRequestTypeName = \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tchangePI() {\r\n\t\t\tlet check = 0;\r\n\t\t\tfor (const processInfo of this.processInfos) {\r\n\t\t\t\tcheck = 0;\r\n\t\t\t\tif (this.m_requestDto.processInfo == processInfo.processName) {\r\n\t\t\t\t\tthis.m_requestDto.processInfo = processInfo;\r\n\t\t\t\t\tcheck = check + 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tcheck == 0 &&\r\n\t\t\t\ttypeof this.m_requestDto.processInfo == \"string\" &&\r\n\t\t\t\tthis.m_requestDto.processInfo.length > 0\r\n\t\t\t) {\r\n\t\t\t\tthis.errorMessageProcessInfo = this.$t(\r\n\t\t\t\t\t\"error.correct_information\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (typeof this.m_requestDto.processInfo == \"object\") {\r\n\t\t\t\tthis.errorMessageProcessInfo = \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync loadTemplate() {\r\n\t\t\tawait this._templateForms();\r\n\t\t},\r\n\t\tasync loadProcessInfo() {\r\n\t\t\tawait this._processInfos();\r\n\t\t\t// await this.getStepInProcesses(this.processInfos);\r\n\t\t},\r\n\t\tdeselectGenerateCode(item) {\r\n\t\t\tthis.ruleGenerateCodes.splice(\r\n\t\t\t\tthis.ruleGenerateCodes.indexOf(item),\r\n\t\t\t\t1,\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.v-select-list,\r\n.v-list {\r\n\tmax-width: 100% !important;\r\n}\r\n.v-menu__content {\r\n\tmin-width: 1492px !important;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}