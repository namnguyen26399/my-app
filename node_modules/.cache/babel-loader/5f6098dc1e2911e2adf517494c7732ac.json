{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.array.splice.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nimport TabVue from \"@/components/Tab.vue\";\nimport store from \"@/store\";\nimport TemplateFormDto from \"@/models/template-form.dto\";\nimport MailTemplateDto from \"@/models/mail-template.dto\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport { TiptapVuetify, Heading, Bold, Italic, Strike, Underline, Code, Paragraph, BulletList, OrderedList, ListItem, Link, Blockquote, HardBreak, HorizontalRule, History } from \"tiptap-vuetify\";\nexport default {\n  name: \"EditTempalteFormV2Vue\",\n  components: {\n    BreadcrumbsVue: BreadcrumbsVue,\n    TabVue: TabVue,\n    TiptapVuetify: TiptapVuetify\n  },\n  computed: {\n    items: function items() {\n      try {\n        return JSON.parse(this.templateForm.mappingInfo);\n      } catch (_unused) {\n        return [];\n      }\n    }\n  },\n  watch: {\n    \"templateForm.attachmentFileDTOS\": function () {\n      var _templateFormAttachmentFileDTOS = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(value) {\n        var response, id;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                id = value[0].id;\n                _context.next = 4;\n                return globalService.getData_Async(administratorAPI.API_GetPreviewLink(id));\n\n              case 4:\n                response = _context.sent;\n\n                if (!(!response || !response.state)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 7:\n                this.previewLink = response.data;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                return _context.abrupt(\"return\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      function templateFormAttachmentFileDTOS(_x) {\n        return _templateFormAttachmentFileDTOS.apply(this, arguments);\n      }\n\n      return templateFormAttachmentFileDTOS;\n    }(),\n    \"mailTemplate.content\": function mailTemplateContent(value) {\n      this.mailTemplate.contentFile = (value ? value : \"\") + (this.mailTemplate.footer ? this.mailTemplate.footer : \"\");\n    },\n    \"mailTemplate.footer\": function mailTemplateFooter(value) {\n      this.mailTemplate.contentFile = (this.mailTemplate.content ? this.mailTemplate.content : \"\") + (value ? value : \"\");\n      return value;\n    }\n  },\n  data: function data() {\n    return {\n      tabs: [{\n        key: \"information\",\n        title: this.$t(\"label.information\")\n      }],\n      buttons: [{\n        icon: \"mdi-content-save\",\n        title: this.$t(\"button.save\"),\n        color: \"blue darken-2\",\n        transparent: false,\n        dark: true,\n        event: this.save\n      }, {\n        icon: \"mdi-trash-can-outline\",\n        title: this.$t(\"button.delete\"),\n        color: \"black\",\n        transparent: true,\n        dark: false,\n        event: this.delete\n      }, {\n        icon: \"mdi-arrow-left-top\",\n        title: this.$t(\"button.back\"),\n        color: \"black\",\n        transparent: true,\n        dark: false,\n        event: this.back\n      }],\n      templateForm: Object.assign({}, TemplateFormDto),\n      mailTemplate: Object.assign({}, MailTemplateDto),\n      headers: [{\n        text: this.$t(\"label.name\"),\n        align: \"start\",\n        value: \"name\"\n      }, {\n        text: this.$t(\"label.position_in_file\"),\n        align: \"start\",\n        value: \"position\"\n      }, {\n        text: this.$t(\"label.manipulation\"),\n        align: \"start\",\n        sortable: false,\n        value: \"action\"\n      }],\n      creating: false,\n      editing: false,\n      mapping: {\n        name: \"\",\n        position: \"\"\n      },\n      previewLink: \"\",\n      receiveUsers: [],\n      allUser_: [],\n      receiveUserFilters: [],\n      ccUsers: [],\n      ccUserFilters: [],\n      fileUploadInfo: null,\n      extensions: [History, Blockquote, Link, Underline, Strike, Italic, ListItem, BulletList, OrderedList, [Heading, {\n        options: {\n          levels: [1, 2, 3]\n        }\n      }], Bold, Code, HorizontalRule, Paragraph, HardBreak],\n      content: \"\"\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              store.state.loading = true;\n              _context2.next = 3;\n              return _this.initialize();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  mounted: function mounted() {\n    store.state.loading = false;\n  },\n  methods: {\n    initialize: function initialize() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (_this2.$router.currentRoute.params.id) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                _this2.templateForm = Object.assign({}, TemplateFormDto);\n                _this2.mailTemplate = Object.assign({}, MailTemplateDto);\n                _context3.next = 21;\n                break;\n\n              case 5:\n                _context3.prev = 5;\n                _context3.next = 8;\n                return globalService.getData_Async(administratorAPI.API_GetMailTemplate(_this2.$router.currentRoute.params.id));\n\n              case 8:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                _this2.$router.push({\n                  path: \"./\"\n                });\n\n                return _context3.abrupt(\"return\");\n\n              case 12:\n                _this2.mailTemplate = response.data;\n                _this2.receiveUsers = _this2.mailTemplate.receiverDefault ? JSON.parse(_this2.mailTemplate.receiverDefault) : [];\n                _this2.ccUsers = _this2.mailTemplate.ccerDefault ? JSON.parse(_this2.mailTemplate.ccerDefault) : [];\n                if (_this2.mailTemplate.pathFile) _this2.fileUploadInfo = {\n                  name: _this2.mailTemplate.pathFile\n                };\n                _context3.next = 21;\n                break;\n\n              case 18:\n                _context3.prev = 18;\n                _context3.t0 = _context3[\"catch\"](5);\n\n                _this2.$router.push({\n                  path: \"./\"\n                });\n\n              case 21:\n                _this2.getAllUser();\n\n              case 22:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[5, 18]]);\n      }))();\n    },\n    getAllUser: function getAllUser() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllUserInfo());\n\n              case 3:\n                response = _context4.sent;\n\n                if (!(!response || !response.state)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 6:\n                _this3.allUser_ = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _this3.receiveUserFilters = _this3.allUser_;\n                _this3.ccUserFilters = _this3.allUser_;\n                if (_this3.receiveUsers) _this3.receiveUserFilters = _this3.filerUser(_this3.receiveUserFilters, _this3.receiveUsers);\n                if (_this3.ccUsers) _this3.ccUserFilters = _this3.filerUser(_this3.ccUserFilters, _this3.ccUsers);\n                _context4.next = 16;\n                break;\n\n              case 13:\n                _context4.prev = 13;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                _this3.toastError(_context4.t0);\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[0, 13]]);\n      }))();\n    },\n\n    /**\r\n     * Hàm thực hiện loại bỏ các phần tử của mảng source mà đã tồn tại ở mảng target\r\n     * @param {*} source: mảng nguồn\r\n     * @param {*} target: mảng chứa phần tử cần loại bỏ\r\n     */\n    filerUser: function filerUser() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      return source.filter(function (ele) {\n        return !target.some(function (ele1) {\n          return ele.id == ele1.id;\n        });\n      });\n    },\n    handleButtonClick: function handleButtonClick(event) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return event();\n\n              case 2:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    handleFile: function handleFile(event) {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (event) {\n                  _this4.fileUploadInfo = event;\n                  _this4.mailTemplate.pathFile = _this4.fileUploadInfo.name ? _this4.fileUploadInfo.name : \"\";\n                } // if (!event) {\n                // \treturn;\n                // }\n                // let canUpload = true;\n                // if (!this.templateForm.id) {\n                // \tcanUpload = await this.save();\n                // }\n                // if (!canUpload) {\n                // \treturn;\n                // }\n                // let response;\n                // try {\n                // \tresponse = await globalService.upload_Async(\n                // \t\tadministratorAPI.API_UploadTemplateFileCloud(\n                // \t\t\tthis.templateForm.id,\n                // \t\t),\n                // \t\tevent,\n                // \t);\n                // \tif (!response) {\n                // \t\tthis.toastError(response);\n                // \t\treturn;\n                // \t}\n                // \tif (!response.state) {\n                // \t\tthis.toastError(response.messgage);\n                // \t\treturn;\n                // \t}\n                // \tif (!this.templateForm.attachmentFileDTOS) {\n                // \t\tthis.templateForm.attachmentFileDTOS = [];\n                // \t}\n                // \tthis.templateForm.attachmentFileDTOS.push(response.data);\n                // } catch (error) {\n                // \tthis.toastError(error);\n                // }\n\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }))();\n    },\n    save: function save() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _this5.mailTemplate.modified = _this5.getUserInfo();\n                _this5.mailTemplate.modifiedDate = new Date();\n                _this5.mailTemplate.modifiedName = _this5.getUserInfo().fullName;\n                _this5.mailTemplate.contentFile = _this5.mailTemplate.content + _this5.mailTemplate.footer;\n                _this5.mailTemplate.receiverDefault = JSON.stringify(_this5.receiveUsers // this.receiveUsers.map((ele) => {\n                // \tif (typeof ele == \"object\") return ele.email;\n                // \telse return ele;\n                // }),\n                );\n                _this5.mailTemplate.ccerDefault = JSON.stringify(_this5.ccUsers // this.ccUsers.map((ele) => {\n                // \tif (typeof ele == \"object\") return ele.email;\n                // \telse return ele;\n                // }),\n                );\n\n                if (!_this5.mailTemplate.id) {\n                  _this5.mailTemplate.created = _this5.getUserInfo();\n                  _this5.mailTemplate.createdDate = new Date();\n                  _this5.mailTemplate.createdName = _this5.getUserInfo().fullName;\n                }\n\n                _context7.prev = 7;\n\n                if (_this5.mailTemplate.id) {\n                  _context7.next = 14;\n                  break;\n                }\n\n                _context7.next = 11;\n                return globalService.postData_Async(administratorAPI.API_CreateMailTemplate(), _this5.mailTemplate);\n\n              case 11:\n                response = _context7.sent;\n                _context7.next = 17;\n                break;\n\n              case 14:\n                _context7.next = 16;\n                return globalService.putData_Async(administratorAPI.API_SaveMailTemplate(_this5.mailTemplate.id), _this5.mailTemplate);\n\n              case 16:\n                response = _context7.sent;\n\n              case 17:\n                if (response) {\n                  _context7.next = 20;\n                  break;\n                }\n\n                _this5.toastError(response);\n\n                return _context7.abrupt(\"return\", false);\n\n              case 20:\n                if (response.state) {\n                  _context7.next = 23;\n                  break;\n                }\n\n                _this5.toastError(response.message);\n\n                return _context7.abrupt(\"return\", false);\n\n              case 23:\n                // hiển thị thông báo\n                _this5.mailTemplate = response.data;\n\n                _this5.toastSuccess(response.message);\n\n                return _context7.abrupt(\"return\", true);\n\n              case 28:\n                _context7.prev = 28;\n                _context7.t0 = _context7[\"catch\"](7);\n\n                _this5.toastError(_context7.t0);\n\n                return _context7.abrupt(\"return\", false);\n\n              case 32:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[7, 28]]);\n      }))();\n    },\n    delete: function _delete() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                _context8.next = 3;\n                return globalService.deleteData_Async(administratorAPI.API_DeleteTemplateForm(_this6.templateForm.id));\n\n              case 3:\n                response = _context8.sent;\n\n                if (response) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                _this6.toastError(response);\n\n                return _context8.abrupt(\"return\");\n\n              case 7:\n                if (response.state) {\n                  _context8.next = 10;\n                  break;\n                }\n\n                _this6.toastError(response.messgage);\n\n                return _context8.abrupt(\"return\");\n\n              case 10:\n                _this6.$router.push({\n                  path: \".\"\n                });\n\n                _context8.next = 16;\n                break;\n\n              case 13:\n                _context8.prev = 13;\n                _context8.t0 = _context8[\"catch\"](0);\n\n                _this6.toastError(_context8.t0);\n\n              case 16:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[0, 13]]);\n      }))();\n    },\n    back: function back() {\n      this.$router.push({\n        path: \"./\"\n      });\n    },\n    appendItem: function appendItem() {\n      this.creating = true;\n      this.editing = null;\n      this.mapping = {\n        name: \"\",\n        position: \"\"\n      };\n    },\n    add: function add() {\n      var temp = [];\n\n      try {\n        temp = JSON.parse(this.templateForm.mappingInfo);\n      } catch (error) {\n        temp = [];\n      }\n\n      temp.push(this.mapping);\n      this.templateForm.mappingInfo = JSON.stringify(temp);\n      this.mapping = {\n        name: \"\",\n        position: \"\"\n      };\n    },\n    edit: function edit(item) {\n      this.editing = item;\n      this.mapping = item;\n      this.creating = false;\n    },\n    update: function update() {\n      this.templateForm.mappingInfo = JSON.stringify(this.items);\n      this.creating = false;\n      this.editing = null;\n    },\n\n    /**\r\n     * @return {Array}\r\n     */\n    _items: function _items() {\n      try {\n        return JSON.parse(this.templateForm.mappingInfo);\n      } catch (error) {\n        return [];\n      }\n    },\n    deleteItem: function deleteItem(item) {\n      var items = this._items();\n\n      var index = items.indexOf(item);\n      items.splice(index, 1);\n      this.templateForm.mappingInfo = JSON.stringify(items);\n    },\n    removeReceiveUserHandler: function removeReceiveUserHandler() {\n      var _this7 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _this7.receiveUserFilters = Object.assign([], _this7.allUser_);\n                _this7.receiveUsers = [];\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }))();\n    },\n    selectHandlerReceiveUser: function selectHandlerReceiveUser(item) {\n      this.receiveUsers.push(item);\n    },\n    removeReceiveUser: function removeReceiveUser(item) {\n      this.receiveUsers.splice(this.receiveUsers.indexOf(item), 1);\n    },\n    removeCCUserHandler: function removeCCUserHandler() {\n      var _this8 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _this8.ccUserFilters = Object.assign([], _this8.allUser_);\n                _this8.ccUsers = [];\n\n              case 2:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10);\n      }))();\n    },\n    selectHandlerCCUser: function selectHandlerCCUser(item) {\n      this.ccUsers.push(item);\n    },\n    removeCCUser: function removeCCUser(item) {\n      this.ccUsers.splice(this.ccUsers.indexOf(item), 1);\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["TiptapVuetify","Heading","Bold","Italic","Strike","Underline","Code","Paragraph","BulletList","OrderedList","ListItem","Link","Blockquote","HardBreak","HorizontalRule","History","name","components","BreadcrumbsVue","TabVue","computed","items","watch","id","value","globalService","administratorAPI","response","data","tabs","key","title","buttons","icon","color","transparent","dark","event","templateForm","mailTemplate","headers","text","align","sortable","creating","editing","mapping","position","previewLink","receiveUsers","allUser_","receiveUserFilters","ccUsers","ccUserFilters","fileUploadInfo","extensions","options","levels","content","created","store","mounted","methods","initialize","path","JSON","getAllUser","filerUser","handleButtonClick","handleFile","save","delete","back","appendItem","add","temp","edit","item","update","_items","deleteItem","removeReceiveUserHandler","selectHandlerReceiveUser","removeReceiveUser","removeCCUserHandler","selectHandlerCCUser","removeCCUser"],"sourceRoot":"src/views/modules/administrator/TemplateMail","sources":["EditTemplateMailV2.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<BreadcrumbsVue />\r\n\t\t<TabVue\r\n\t\t\t:tabs=\"tabs\"\r\n\t\t\t:buttons=\"buttons\"\r\n\t\t\t@buttonClick=\"handleButtonClick\"\r\n\t\t/>\r\n\t\t<v-row class=\"mt-4 px-4\">\r\n\t\t\t<v-col cols=\"12\" md=\"6\">\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t:label=\"$t('label.name')\"\r\n\t\t\t\t\t\t\tv-model=\"mailTemplate.mailTemplateName\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tv-model=\"receiveUsers\"\r\n\t\t\t\t\t\t\t:items=\"receiveUserFilters\"\r\n\t\t\t\t\t\t\titem-text=\"fullName\"\r\n\t\t\t\t\t\t\t:item-value=\"(item) => item\"\r\n\t\t\t\t\t\t\tchips\r\n\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\thide-selected\r\n\t\t\t\t\t\t\t:label=\"$t(`label.mail_template_receive`)\"\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t@click:clear=\"removeReceiveUserHandler\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:item=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<v-list-item\r\n\t\t\t\t\t\t\t\t\t@click=\"selectHandlerReceiveUser(item)\"\r\n\t\t\t\t\t\t\t\t\tclass=\"m-1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-chip>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"indigo mr-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"36\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"white--text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.fullName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<v-img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:src=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</v-img>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-avatar>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-html=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.fullName +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t' <br/> ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(item.email\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.email\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-subtitle\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treceiveUsers &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treceiveUsers.fullName\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ receiveUsers.fullName }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item }\">\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tv-if=\"typeof item == 'object'\"\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t\t@click:close=\"removeReceiveUser(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"white--text\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"!item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ getAvatarText(item.fullName) }}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<v-img\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t</v-img>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.fullName }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.email }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t\t@click:close=\"removeReceiveUser(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"white--text\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"!item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ getAvatarText(item) }}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<v-img\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t</v-img>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tv-model=\"ccUsers\"\r\n\t\t\t\t\t\t\t:items=\"ccUserFilters\"\r\n\t\t\t\t\t\t\titem-text=\"fullName\"\r\n\t\t\t\t\t\t\t:item-value=\"(item) => item\"\r\n\t\t\t\t\t\t\tchips\r\n\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\thide-selected\r\n\t\t\t\t\t\t\t:label=\"$t(`label.mail_template_cc`)\"\r\n\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t@click:clear=\"removeCCUserHandler\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:item=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<v-list-item\r\n\t\t\t\t\t\t\t\t\t@click=\"selectHandlerCCUser(item)\"\r\n\t\t\t\t\t\t\t\t\tclass=\"m-1\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-chip>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"indigo mr-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"36\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"white--text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.fullName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<v-img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:src=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</v-img>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-avatar>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-html=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.fullName +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t' <br/> ' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(item.email\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? item.email\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-subtitle\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tccUsers && ccUsers.fullName\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ ccUsers.fullName }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ ccUsers.email }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item }\">\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tv-if=\"typeof item == 'object'\"\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t\t@click:close=\"removeCCUser(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"white--text\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"!item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ getAvatarText(item.fullName) }}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<v-img\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t</v-img>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.fullName }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.email }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t\t@click:close=\"removeCCUser(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"white--text\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"!item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ getAvatarText(item) }}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<v-img\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t:src=\"item.avatar\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t</v-img>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item }}\r\n\t\t\t\t\t\t\t\t\t\t\t</v-list-item-subtitle>\r\n\t\t\t\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t:label=\"$t('label.mail_template_subject')\"\r\n\t\t\t\t\t\t\tv-model=\"mailTemplate.subject\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<tiptap-vuetify\r\n\t\t\t\t\t\t\tv-model=\"mailTemplate.content\"\r\n\t\t\t\t\t\t\t:extensions=\"extensions\"\r\n\t\t\t\t\t\t\tplaceholder=\"Write something to content …\"\r\n\t\t\t\t\t\t\tmin-height=\"300\"\r\n\t\t\t\t\t\t\t:card-props=\"{\r\n\t\t\t\t\t\t\t\tflat: true,\r\n\t\t\t\t\t\t\t\toutlined: true,\r\n\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\r\n\t\t\t\t<!-- <v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<tiptap-vuetify\r\n\t\t\t\t\t\t\tv-model=\"mailTemplate.footer\"\r\n\t\t\t\t\t\t\t:extensions=\"extensions\"\r\n\t\t\t\t\t\t\tplaceholder=\"Write something …\"\r\n\t\t\t\t\t\t\tmin-height=\"300\"\r\n\t\t\t\t\t\t\t:card-props=\"{\r\n\t\t\t\t\t\t\t\tflat: true,\r\n\t\t\t\t\t\t\t\toutlined: true,\r\n\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row> -->\r\n\r\n\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t<v-file-input\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tv-model=\"fileUploadInfo\"\r\n\t\t\t\t\t\tappend-icon=\"mdi-cloud-upload-outline\"\r\n\t\t\t\t\t\tprepend-icon=\"\"\r\n\t\t\t\t\t\t:label=\"$t('label.upload')\"\r\n\t\t\t\t\t\t@change=\"handleFile($event)\"\r\n\t\t\t\t\t></v-file-input>\r\n\t\t\t\t</v-col>\r\n\r\n\t\t\t\t<!-- <v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<v-btn text class=\"rounded-0\" @click=\"appendItem()\">\r\n\t\t\t\t\t\t\t<v-icon> mdi-plus-circle </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.create\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t<v-btn text class=\"rounded-0\">\r\n\t\t\t\t\t\t\t<v-icon> mdi-trash-can-outline </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.delete\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t\t<v-divider></v-divider> -->\r\n\t\t\t\t<!-- <v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<v-data-table\r\n\t\t\t\t\t\t\tshow-select\r\n\t\t\t\t\t\t\thide-default-footer\r\n\t\t\t\t\t\t\t:headers=\"headers\"\r\n\t\t\t\t\t\t\t:items=\"items\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:[`item.action`]=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\ticon\r\n\t\t\t\t\t\t\t\t\tv-if=\"editing != item\"\r\n\t\t\t\t\t\t\t\t\t@click=\"edit(item)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-pencil-circle </v-icon>\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn icon v-else @click=\"update\">\r\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-checkbox-marked-circle </v-icon>\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn icon @click=\"deleteItem(item)\">\r\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-delete-circle </v-icon>\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-slot:[`item.name`]=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<span v-if=\"editing != item\">\r\n\t\t\t\t\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t\t\t\t\tv-model=\"mapping.name\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t\t\t\t\t</v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-slot:[`item.position`]=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<span v-if=\"editing != item\">\r\n\t\t\t\t\t\t\t\t\t{{ item.position }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t\t\t\t\tv-model=\"mapping.position\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ item.position }}\r\n\t\t\t\t\t\t\t\t</v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-if=\"creating\" v-slot:[`body.append`]>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td></td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t\t\t\t\t\t\t:label=\"$t('label.name')\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"mapping.name\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t\t\t\t\t\t\t:label=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t$t('label.position_in_file')\r\n\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"mapping.position\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<v-btn icon @click=\"add\">\r\n\t\t\t\t\t\t\t\t\t\t\t<v-icon>mdi-plus-circle</v-icon>\r\n\t\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-data-table>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row> -->\r\n\t\t\t</v-col>\r\n\t\t\t<v-divider vertical></v-divider>\r\n\t\t\t<v-col cols=\"12\" md=\"6\">\r\n\t\t\t\t<div v-html=\"mailTemplate.contentFile\"></div>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\r\nimport TabVue from \"@/components/Tab.vue\";\r\nimport store from \"@/store\";\r\nimport TemplateFormDto from \"@/models/template-form.dto\";\r\nimport MailTemplateDto from \"@/models/mail-template.dto\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nimport {\r\n\tTiptapVuetify,\r\n\tHeading,\r\n\tBold,\r\n\tItalic,\r\n\tStrike,\r\n\tUnderline,\r\n\tCode,\r\n\tParagraph,\r\n\tBulletList,\r\n\tOrderedList,\r\n\tListItem,\r\n\tLink,\r\n\tBlockquote,\r\n\tHardBreak,\r\n\tHorizontalRule,\r\n\tHistory,\r\n} from \"tiptap-vuetify\";\r\nexport default {\r\n\tname: \"EditTempalteFormV2Vue\",\r\n\tcomponents: { BreadcrumbsVue, TabVue, TiptapVuetify },\r\n\tcomputed: {\r\n\t\titems() {\r\n\t\t\ttry {\r\n\t\t\t\treturn JSON.parse(this.templateForm.mappingInfo);\r\n\t\t\t} catch {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\t\"templateForm.attachmentFileDTOS\": async function (value) {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tlet id = value[0].id;\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetPreviewLink(id),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.previewLink = response.data;\r\n\t\t\t} catch {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\"mailTemplate.content\"(value) {\r\n\t\t\tthis.mailTemplate.contentFile =\r\n\t\t\t\t(value ? value : \"\") +\r\n\t\t\t\t(this.mailTemplate.footer ? this.mailTemplate.footer : \"\");\r\n\t\t},\r\n\t\t\"mailTemplate.footer\"(value) {\r\n\t\t\tthis.mailTemplate.contentFile =\r\n\t\t\t\t(this.mailTemplate.content ? this.mailTemplate.content : \"\") +\r\n\t\t\t\t(value ? value : \"\");\r\n\t\t\treturn value;\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttabs: [{ key: \"information\", title: this.$t(\"label.information\") }],\r\n\t\t\tbuttons: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"mdi-content-save\",\r\n\t\t\t\t\ttitle: this.$t(\"button.save\"),\r\n\t\t\t\t\tcolor: \"blue darken-2\",\r\n\t\t\t\t\ttransparent: false,\r\n\t\t\t\t\tdark: true,\r\n\t\t\t\t\tevent: this.save,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"mdi-trash-can-outline\",\r\n\t\t\t\t\ttitle: this.$t(\"button.delete\"),\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\ttransparent: true,\r\n\t\t\t\t\tdark: false,\r\n\t\t\t\t\tevent: this.delete,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: \"mdi-arrow-left-top\",\r\n\t\t\t\t\ttitle: this.$t(\"button.back\"),\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\ttransparent: true,\r\n\t\t\t\t\tdark: false,\r\n\t\t\t\t\tevent: this.back,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\ttemplateForm: Object.assign({}, TemplateFormDto),\r\n\t\t\tmailTemplate: Object.assign({}, MailTemplateDto),\r\n\t\t\theaders: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.name\"),\r\n\t\t\t\t\talign: \"start\",\r\n\t\t\t\t\tvalue: \"name\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.position_in_file\"),\r\n\t\t\t\t\talign: \"start\",\r\n\t\t\t\t\tvalue: \"position\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.manipulation\"),\r\n\t\t\t\t\talign: \"start\",\r\n\t\t\t\t\tsortable: false,\r\n\t\t\t\t\tvalue: \"action\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tcreating: false,\r\n\t\t\tediting: false,\r\n\t\t\tmapping: {\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tposition: \"\",\r\n\t\t\t},\r\n\t\t\tpreviewLink: \"\",\r\n\r\n\t\t\treceiveUsers: [],\r\n\t\t\tallUser_: [],\r\n\t\t\treceiveUserFilters: [],\r\n\r\n\t\t\tccUsers: [],\r\n\t\t\tccUserFilters: [],\r\n\r\n\t\t\tfileUploadInfo: null,\r\n\r\n\t\t\textensions: [\r\n\t\t\t\tHistory,\r\n\t\t\t\tBlockquote,\r\n\t\t\t\tLink,\r\n\t\t\t\tUnderline,\r\n\t\t\t\tStrike,\r\n\t\t\t\tItalic,\r\n\t\t\t\tListItem,\r\n\t\t\t\tBulletList,\r\n\t\t\t\tOrderedList,\r\n\t\t\t\t[\r\n\t\t\t\t\tHeading,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\tlevels: [1, 2, 3],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\tBold,\r\n\t\t\t\tCode,\r\n\t\t\t\tHorizontalRule,\r\n\t\t\t\tParagraph,\r\n\t\t\t\tHardBreak,\r\n\t\t\t],\r\n\t\t\tcontent: \"\",\r\n\t\t};\r\n\t},\r\n\tasync created() {\r\n\t\tstore.state.loading = true;\r\n\t\tawait this.initialize();\r\n\t},\r\n\tmounted() {\r\n\t\tstore.state.loading = false;\r\n\t},\r\n\tmethods: {\r\n\t\tasync initialize() {\r\n\t\t\tif (!this.$router.currentRoute.params.id) {\r\n\t\t\t\tthis.templateForm = Object.assign({}, TemplateFormDto);\r\n\t\t\t\tthis.mailTemplate = Object.assign({}, MailTemplateDto);\r\n\t\t\t} else {\r\n\t\t\t\tlet response;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_GetMailTemplate(\r\n\t\t\t\t\t\t\tthis.$router.currentRoute.params.id,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\t\tthis.$router.push({ path: \"./\" });\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.mailTemplate = response.data;\r\n\t\t\t\t\tthis.receiveUsers = this.mailTemplate.receiverDefault\r\n\t\t\t\t\t\t? JSON.parse(this.mailTemplate.receiverDefault)\r\n\t\t\t\t\t\t: [];\r\n\t\t\t\t\tthis.ccUsers = this.mailTemplate.ccerDefault\r\n\t\t\t\t\t\t? JSON.parse(this.mailTemplate.ccerDefault)\r\n\t\t\t\t\t\t: [];\r\n\t\t\t\t\tif (this.mailTemplate.pathFile)\r\n\t\t\t\t\t\tthis.fileUploadInfo = {\r\n\t\t\t\t\t\t\tname: this.mailTemplate.pathFile,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tthis.$router.push({ path: \"./\" });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getAllUser();\r\n\t\t},\r\n\t\tasync getAllUser() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllUserInfo(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.allUser_ = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tthis.receiveUserFilters = this.allUser_;\r\n\t\t\t\tthis.ccUserFilters = this.allUser_;\r\n\t\t\t\tif (this.receiveUsers)\r\n\t\t\t\t\tthis.receiveUserFilters = this.filerUser(\r\n\t\t\t\t\t\tthis.receiveUserFilters,\r\n\t\t\t\t\t\tthis.receiveUsers,\r\n\t\t\t\t\t);\r\n\t\t\t\tif (this.ccUsers)\r\n\t\t\t\t\tthis.ccUserFilters = this.filerUser(\r\n\t\t\t\t\t\tthis.ccUserFilters,\r\n\t\t\t\t\t\tthis.ccUsers,\r\n\t\t\t\t\t);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * Hàm thực hiện loại bỏ các phần tử của mảng source mà đã tồn tại ở mảng target\r\n\t\t * @param {*} source: mảng nguồn\r\n\t\t * @param {*} target: mảng chứa phần tử cần loại bỏ\r\n\t\t */\r\n\t\tfilerUser(source = [], target = []) {\r\n\t\t\treturn source.filter(\r\n\t\t\t\t(ele) => !target.some((ele1) => ele.id == ele1.id),\r\n\t\t\t);\r\n\t\t},\r\n\t\tasync handleButtonClick(event) {\r\n\t\t\tawait event();\r\n\t\t},\r\n\t\tasync handleFile(event) {\r\n\t\t\tif (event) {\r\n\t\t\t\tthis.fileUploadInfo = event;\r\n\t\t\t\tthis.mailTemplate.pathFile = this.fileUploadInfo.name\r\n\t\t\t\t\t? this.fileUploadInfo.name\r\n\t\t\t\t\t: \"\";\r\n\t\t\t}\r\n\t\t\t// if (!event) {\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\t\t\t// let canUpload = true;\r\n\t\t\t// if (!this.templateForm.id) {\r\n\t\t\t// \tcanUpload = await this.save();\r\n\t\t\t// }\r\n\t\t\t// if (!canUpload) {\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\t\t\t// let response;\r\n\t\t\t// try {\r\n\t\t\t// \tresponse = await globalService.upload_Async(\r\n\t\t\t// \t\tadministratorAPI.API_UploadTemplateFileCloud(\r\n\t\t\t// \t\t\tthis.templateForm.id,\r\n\t\t\t// \t\t),\r\n\t\t\t// \t\tevent,\r\n\t\t\t// \t);\r\n\t\t\t// \tif (!response) {\r\n\t\t\t// \t\tthis.toastError(response);\r\n\t\t\t// \t\treturn;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (!response.state) {\r\n\t\t\t// \t\tthis.toastError(response.messgage);\r\n\t\t\t// \t\treturn;\r\n\t\t\t// \t}\r\n\t\t\t// \tif (!this.templateForm.attachmentFileDTOS) {\r\n\t\t\t// \t\tthis.templateForm.attachmentFileDTOS = [];\r\n\t\t\t// \t}\r\n\t\t\t// \tthis.templateForm.attachmentFileDTOS.push(response.data);\r\n\t\t\t// } catch (error) {\r\n\t\t\t// \tthis.toastError(error);\r\n\t\t\t// }\r\n\t\t},\r\n\t\tasync save() {\r\n\t\t\tthis.mailTemplate.modified = this.getUserInfo();\r\n\t\t\tthis.mailTemplate.modifiedDate = new Date();\r\n\t\t\tthis.mailTemplate.modifiedName = this.getUserInfo().fullName;\r\n\t\t\tthis.mailTemplate.contentFile =\r\n\t\t\t\tthis.mailTemplate.content + this.mailTemplate.footer;\r\n\t\t\tthis.mailTemplate.receiverDefault = JSON.stringify(\r\n\t\t\t\tthis.receiveUsers,\r\n\t\t\t\t// this.receiveUsers.map((ele) => {\r\n\t\t\t\t// \tif (typeof ele == \"object\") return ele.email;\r\n\t\t\t\t// \telse return ele;\r\n\t\t\t\t// }),\r\n\t\t\t);\r\n\t\t\tthis.mailTemplate.ccerDefault = JSON.stringify(\r\n\t\t\t\tthis.ccUsers,\r\n\t\t\t\t// this.ccUsers.map((ele) => {\r\n\t\t\t\t// \tif (typeof ele == \"object\") return ele.email;\r\n\t\t\t\t// \telse return ele;\r\n\t\t\t\t// }),\r\n\t\t\t);\r\n\t\t\tif (!this.mailTemplate.id) {\r\n\t\t\t\tthis.mailTemplate.created = this.getUserInfo();\r\n\t\t\t\tthis.mailTemplate.createdDate = new Date();\r\n\t\t\t\tthis.mailTemplate.createdName = this.getUserInfo().fullName;\r\n\t\t\t}\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.mailTemplate.id) {\r\n\t\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_CreateMailTemplate(),\r\n\t\t\t\t\t\tthis.mailTemplate,\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_SaveMailTemplate(\r\n\t\t\t\t\t\t\tthis.mailTemplate.id,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tthis.mailTemplate,\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\tthis.toastError(response);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\tthis.toastError(response.message);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// hiển thị thông báo\r\n\t\t\t\tthis.mailTemplate = response.data;\r\n\t\t\t\tthis.toastSuccess(response.message);\r\n\t\t\t\treturn true;\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync delete() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.deleteData_Async(\r\n\t\t\t\t\tadministratorAPI.API_DeleteTemplateForm(\r\n\t\t\t\t\t\tthis.templateForm.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\tthis.toastError(response);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\tthis.toastError(response.messgage);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$router.push({ path: \".\" });\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tback() {\r\n\t\t\tthis.$router.push({ path: \"./\" });\r\n\t\t},\r\n\t\tappendItem() {\r\n\t\t\tthis.creating = true;\r\n\t\t\tthis.editing = null;\r\n\t\t\tthis.mapping = { name: \"\", position: \"\" };\r\n\t\t},\r\n\t\tadd() {\r\n\t\t\tlet temp = [];\r\n\t\t\ttry {\r\n\t\t\t\ttemp = JSON.parse(this.templateForm.mappingInfo);\r\n\t\t\t} catch (error) {\r\n\t\t\t\ttemp = [];\r\n\t\t\t}\r\n\t\t\ttemp.push(this.mapping);\r\n\t\t\tthis.templateForm.mappingInfo = JSON.stringify(temp);\r\n\t\t\tthis.mapping = { name: \"\", position: \"\" };\r\n\t\t},\r\n\t\tedit(item) {\r\n\t\t\tthis.editing = item;\r\n\t\t\tthis.mapping = item;\r\n\t\t\tthis.creating = false;\r\n\t\t},\r\n\t\tupdate() {\r\n\t\t\tthis.templateForm.mappingInfo = JSON.stringify(this.items);\r\n\t\t\tthis.creating = false;\r\n\t\t\tthis.editing = null;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @return {Array}\r\n\t\t */\r\n\t\t_items() {\r\n\t\t\ttry {\r\n\t\t\t\treturn JSON.parse(this.templateForm.mappingInfo);\r\n\t\t\t} catch (error) {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteItem(item) {\r\n\t\t\tlet items = this._items();\r\n\t\t\tlet index = items.indexOf(item);\r\n\t\t\titems.splice(index, 1);\r\n\t\t\tthis.templateForm.mappingInfo = JSON.stringify(items);\r\n\t\t},\r\n\r\n\t\tasync removeReceiveUserHandler() {\r\n\t\t\tthis.receiveUserFilters = Object.assign([], this.allUser_);\r\n\t\t\tthis.receiveUsers = [];\r\n\t\t},\r\n\t\tselectHandlerReceiveUser(item) {\r\n\t\t\tthis.receiveUsers.push(item);\r\n\t\t},\r\n\t\tremoveReceiveUser(item) {\r\n\t\t\tthis.receiveUsers.splice(this.receiveUsers.indexOf(item), 1);\r\n\t\t},\r\n\t\tasync removeCCUserHandler() {\r\n\t\t\tthis.ccUserFilters = Object.assign([], this.allUser_);\r\n\t\t\tthis.ccUsers = [];\r\n\t\t},\r\n\t\tselectHandlerCCUser(item) {\r\n\t\t\tthis.ccUsers.push(item);\r\n\t\t},\r\n\t\tremoveCCUser(item) {\r\n\t\t\tthis.ccUsers.splice(this.ccUsers.indexOf(item), 1);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}