{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\nexport default {\n  name: \"EditProcessStep\",\n  components: {\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  props: {\n    editedItem: {}\n  },\n  data: function data() {\n    return {\n      user_current: this.getUserInfo(),\n      stepNameMessage: \"\",\n      descriptionMessage: \"\",\n      processTermMessage: \"\",\n      regex: /^[0-9]{1,2}(\\.[0-9])?$/,\n      listOrganzine: [],\n      listRank: [],\n      editedIndex: -1,\n      m_editedItem: {\n        createdDate: null,\n        created: null,\n        createdName: \"\",\n        description: \"\",\n        id: null,\n        isActive: true,\n        isDelete: false,\n        modifiedDate: null,\n        modified: null,\n        isAuthorizedApproval: false,\n        isBack: false,\n        isCreateTFSTask: false,\n        isEdit: false,\n        isExamine: false,\n        isProcessRecover: false,\n        isRequestModify: false,\n        isRequiredSignature: false,\n        isSendMail: false,\n        tennant: null,\n        optionDeny: 0,\n        modifiedName: \"\",\n        processingTerm: 0,\n        stepCode: \"\",\n        stepName: \"\",\n        organization: null,\n        rank: null,\n        tennantCode: \"\",\n        tennantName: \"\"\n      },\n      defaultItem: {\n        createdDate: null,\n        created: null,\n        createdName: \"\",\n        description: \"\",\n        id: null,\n        isActive: true,\n        isDelete: false,\n        modifiedDate: null,\n        modified: null,\n        isAuthorizedApproval: false,\n        isBack: false,\n        isCreateTFSTask: false,\n        isEdit: false,\n        isExamine: false,\n        isProcessRecover: false,\n        isRequestModify: false,\n        isRequiredSignature: false,\n        isSendMail: false,\n        tennant: null,\n        optionDeny: 0,\n        modifiedName: \"\",\n        processingTerm: 0,\n        stepCode: \"\",\n        stepName: \"\",\n        organization: null,\n        rank: null,\n        tennantCode: \"\",\n        tennantName: \"\"\n      },\n      isSaving: false,\n      errFomat: false\n    };\n  },\n  watch: {\n    editedItem: function editedItem(value) {\n      this.m_editedItem = value;\n      this.stepNameMessage = \"\";\n      this.processTermMessage = \"\";\n    }\n  },\n  created: function created() {\n    this.initialize();\n    this.getAllOrganize();\n    this.getAllRank();\n  },\n  computed: {\n    formTitle: function formTitle() {\n      return this.editedItem.id === null ? this.$t(\"title.create_step\") : this.$t(\"label.edit_step\");\n    }\n  },\n  methods: {\n    initialize: function initialize() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.m_editedItem = _this.editedItem;\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    getAllOrganize: function getAllOrganize() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_FindAllOrganization());\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(!response || !response.state)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 6:\n                _this2.listOrganzine = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _context2.next = 13;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(\"Error\", _context2.t0);\n\n                _this2.toastError(_this2.$t(\"error.load\"));\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      }))();\n    },\n    getAllRank: function getAllRank() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRank());\n\n              case 3:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 6:\n                _this3.listRank = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _context3.next = 13;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(\"Error\", _context3.t0);\n\n                _this3.toastError(_this3.$t(\"error.load\"));\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 9]]);\n      }))();\n    },\n    selectRank: function selectRank(item) {\n      this.m_editedItem.rank = item;\n    },\n    selectOrganization: function selectOrganization(item) {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this4.m_editedItem.organization = item;\n                _context4.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRankByOrganizaionId(item.id));\n\n              case 3:\n                response = _context4.sent;\n\n                if (!(!response || !response.state)) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 6:\n                _this4.listRank = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                _this4.m_editedItem.rank = null;\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    removeOrganization: function removeOrganization() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this5.m_editedItem.rank = null;\n                _context5.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRank());\n\n              case 3:\n                response = _context5.sent;\n\n                if (!(!response || !response.state)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 6:\n                _this5.listRank = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    save: function save() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                console.log(\"processingTerm\", _this6.m_editedItem.processingTerm);\n                _context6.next = 3;\n                return _this6.onClickOutsideProcessingTerm();\n\n              case 3:\n                if (!(_this6.isSaving || _this6.m_editedItem.stepName.trim() == \"\")) {\n                  _context6.next = 7;\n                  break;\n                }\n\n                _this6.$refs[\"stepName\"].focus();\n\n                _this6.stepNameMessage = _this6.$t(\"message.msg_1\");\n                return _context6.abrupt(\"return\");\n\n              case 7:\n                _this6.stepNameMessage = \"\";\n\n                if (!(_this6.m_editedItem.stepName.trim().length > 255)) {\n                  _context6.next = 12;\n                  break;\n                }\n\n                _this6.toastError(_this6.$t(\"error.max_length_255\"));\n\n                _this6.$refs[\"stepName\"].focus();\n\n                return _context6.abrupt(\"return\");\n\n              case 12:\n                if (!(_this6.m_editedItem.description.trim().length > 255)) {\n                  _context6.next = 16;\n                  break;\n                }\n\n                _this6.toastError(_this6.$t(\"error.max_length_255\"));\n\n                _this6.$refs[\"description\"].focus();\n\n                return _context6.abrupt(\"return\");\n\n              case 16:\n                if (!(_this6.m_editedItem.processingTerm && _this6.m_editedItem.processingTerm < 0 || _this6.errFomat)) {\n                  _context6.next = 21;\n                  break;\n                }\n\n                _this6.processTermMessage = _this6.$t(\"message.error_format\");\n\n                _this6.$refs[\"processingTerm\"].focus();\n\n                _this6.toastError(_this6.$t(\"message.add_error\"));\n\n                return _context6.abrupt(\"return\");\n\n              case 21:\n                _this6.m_editedItem.stepName.trim();\n\n                _this6.m_editedItem.description.trim();\n\n                _this6.isSaving = true;\n                _context6.prev = 24;\n\n                if (_this6.m_editedItem.id) {\n                  _context6.next = 37;\n                  break;\n                }\n\n                _this6.m_editedItem.created = _this6.user_current;\n                _this6.m_editedItem.createdName = _this6.user_current.fullName;\n                _this6.m_editedItem.modifiedDate = new Date();\n                _this6.m_editedItem.createdDate = new Date();\n                _this6.m_editedItem.modifiedName = _this6.user_current.fullName;\n                _context6.next = 33;\n                return globalService.postData_Async(administratorAPI.API_CreateStep(), _this6.m_editedItem);\n\n              case 33:\n                response = _context6.sent;\n\n                if (!response.state) {\n                  _this6.isSaving = false;\n\n                  _this6.toastError(_this6.$t(\"message.add_error\"));\n                } else {\n                  _this6.toastSuccess(_this6.$t(\"message.add_success\"));\n\n                  _this6.isSaving = false;\n                }\n\n                _context6.next = 44;\n                break;\n\n              case 37:\n                _this6.m_editedItem.modifiedDate = new Date();\n                _this6.m_editedItem.modifiedName = _this6.user_current.fullName;\n                _context6.next = 41;\n                return globalService.putData_Async(administratorAPI.API_UpdateStep(_this6.m_editedItem.id), _this6.m_editedItem);\n\n              case 41:\n                response = _context6.sent;\n\n                if (!response.state) {\n                  _this6.isSaving = false;\n\n                  _this6.toastError(_this6.$t(\"message.update_error\"));\n                }\n\n                _this6.toastSuccess(_this6.$t(\"message.update_success\"));\n\n              case 44:\n                _this6.m_editedItem = _this6.defaultItem;\n                _this6.isSaving = false;\n\n                _this6.closeDialog();\n\n                _context6.next = 52;\n                break;\n\n              case 49:\n                _context6.prev = 49;\n                _context6.t0 = _context6[\"catch\"](24);\n\n                _this6.toastError(_this6.$t(\"error.load\"));\n\n              case 52:\n                _context6.prev = 52;\n                _this6.m_editedItem = _this6.defaultItem;\n                _this6.isSaving = false;\n\n                _this6.closeDialog();\n\n                return _context6.finish(52);\n\n              case 57:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[24, 49, 52, 57]]);\n      }))();\n    },\n    onchangeStepName: function onchangeStepName() {\n      this.stepNameMessage = \"\";\n    },\n    onchangeProcessingTerm: function onchangeProcessingTerm() {\n      if (!/e/.test(this.m_editedItem.processingTerm) && !this.regex.test(this.m_editedItem.processingTerm)) {\n        this.processTermMessage = this.$t(\"message.error_format\");\n        this.errFomat = true;\n      } else {\n        this.errFomat = false;\n        this.processTermMessage = \"\";\n      }\n    },\n    onClickOutsideProcessingTerm: function onClickOutsideProcessingTerm() {\n      if (!this.m_editedItem.processingTerm) {\n        this.errFomat = false;\n        this.m_editedItem.processingTerm = 0;\n        this.processTermMessage = \"\";\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","VuePerfectScrollbar","props","editedItem","data","user_current","stepNameMessage","descriptionMessage","processTermMessage","regex","listOrganzine","listRank","editedIndex","m_editedItem","createdDate","created","createdName","description","id","isActive","isDelete","modifiedDate","modified","isAuthorizedApproval","isBack","isCreateTFSTask","isEdit","isExamine","isProcessRecover","isRequestModify","isRequiredSignature","isSendMail","tennant","optionDeny","modifiedName","processingTerm","stepCode","stepName","organization","rank","tennantCode","tennantName","defaultItem","isSaving","errFomat","watch","value","computed","formTitle","methods","initialize","getAllOrganize","globalService","administratorAPI","response","console","getAllRank","selectRank","item","selectOrganization","removeOrganization","save","onchangeStepName","onchangeProcessingTerm","onClickOutsideProcessingTerm"],"sourceRoot":"src/views/modules/administrator/ProcessStep","sources":["EditProcessStep.vue"],"sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<v-toolbar>\r\n\t\t\t<v-toolbar-title>\r\n\t\t\t\t{{ formTitle }}\r\n\t\t\t</v-toolbar-title>\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</v-toolbar>\r\n\t\t<v-card-text class=\"white mt-3\">\r\n\t\t\t<VuePerfectScrollbar>\r\n\t\t\t\t<v-container>\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\tref=\"stepName\"\r\n\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\t\t\tm_editedItem.stepName.trim().length <=\r\n\t\t\t\t\t\t\t\t\t\t\t255 ||\r\n\t\t\t\t\t\t\t\t\t\t$t('message.maxlength_required_255'),\r\n\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.stepName\"\r\n\t\t\t\t\t\t\t\t:error-messages=\"stepNameMessage\"\r\n\t\t\t\t\t\t\t\t@keyup=\"onchangeStepName\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<template v-slot:label>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"label.step_name\") }}\r\n\t\t\t\t\t\t\t\t\t<span class=\"text-red\">{{\r\n\t\t\t\t\t\t\t\t\t\t$t(\"label.star\")\r\n\t\t\t\t\t\t\t\t\t}}</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</v-text-field>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t\t<v-textarea\r\n\t\t\t\t\t\t\t\tref=\"description\"\r\n\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\t\t\tm_editedItem.description.trim()\r\n\t\t\t\t\t\t\t\t\t\t\t.length <= 255 ||\r\n\t\t\t\t\t\t\t\t\t\t$t('message.maxlength_required_255'),\r\n\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.description\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.description')\"\r\n\t\t\t\t\t\t\t></v-textarea>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\tv-click-outside=\"onClickOutsideProcessingTerm\"\r\n\t\t\t\t\t\t\t\tref=\"processingTerm\"\r\n\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.processingTerm\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.processing_term')\"\r\n\t\t\t\t\t\t\t\tappend-icon=\"mdi-clock\"\r\n\t\t\t\t\t\t\t\tsuffix=\"Giờ\"\r\n\t\t\t\t\t\t\t\t:error-messages=\"processTermMessage\"\r\n\t\t\t\t\t\t\t\t@change=\"onchangeProcessingTerm\"\r\n\t\t\t\t\t\t\t\t@keyup=\"onchangeProcessingTerm\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</v-text-field>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isExamine\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.is_examine')\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isRequestModify\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.is_request_modify')\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isProcessRecover\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.is_process_recover')\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isCreateTFSTask\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.required_tfs')\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isSendMail\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.allow_send_email')\"\r\n\t\t\t\t\t\t\t></v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isRequiredSignature\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.is_required_signature')\"\r\n\t\t\t\t\t\t\t></v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isAuthorizedApproval\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.is_authorized_approval')\"\r\n\t\t\t\t\t\t\t></v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t<v-col cols=\"12\" md=\"3\">\r\n\t\t\t\t\t\t\t<v-checkbox\r\n\t\t\t\t\t\t\t\tv-model=\"m_editedItem.isActive\"\r\n\t\t\t\t\t\t\t\t:label=\"$t('label.is_active')\"\r\n\t\t\t\t\t\t\t></v-checkbox>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tref=\"cbbOranization\"\r\n\t\t\t\t\t\t\tv-model=\"m_editedItem.organization\"\r\n\t\t\t\t\t\t\t:items=\"listOrganzine\"\r\n\t\t\t\t\t\t\titem-text=\"organizationName\"\r\n\t\t\t\t\t\t\t:item-value=\"(item) => item\"\r\n\t\t\t\t\t\t\t:label=\"$t(`label.organization`)\"\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t@click:clear=\"removeOrganization\"\r\n\t\t\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:item=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<v-list-item @click=\"selectOrganization(item)\">\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.organizationName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t{{ item.organizationName }}\r\n\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item }\">\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tv-if=\"!!item && !!item.id\"\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.organizationName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t{{ item.organizationName }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\tref=\"cbbRank\"\r\n\t\t\t\t\t\t\tv-model=\"m_editedItem.rank\"\r\n\t\t\t\t\t\t\t:items=\"listRank\"\r\n\t\t\t\t\t\t\titem-text=\"rankName\"\r\n\t\t\t\t\t\t\t:item-value=\"(item) => item\"\r\n\t\t\t\t\t\t\t:label=\"$t(`label.rank`)\"\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:item=\"{ item }\">\r\n\t\t\t\t\t\t\t\t<v-list-item @click=\"selectRank(item)\">\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(item.rankName, 2)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t{{ item.rankName }}\r\n\t\t\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item }\">\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\tv-if=\"!!item && !!item.id\"\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"36\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetAvatarText(item.rankName, 2)\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t\t{{ item.rankName }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t</v-container>\r\n\t\t\t</VuePerfectScrollbar>\r\n\t\t</v-card-text>\r\n\r\n\t\t<v-card-actions class=\"white\">\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn color=\"error\" dark @click=\"closeDialog\" class=\"rounded-pill\">\r\n\t\t\t\t<v-icon>mdi-close </v-icon>\r\n\t\t\t\t{{ $t(\"button.close\") }}\r\n\t\t\t</v-btn>\r\n\t\t\t<v-btn\r\n\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\tdark\r\n\t\t\t\t@click=\"save\"\r\n\t\t\t\tclass=\"rounded-pill\"\r\n\t\t\t>\r\n\t\t\t\t<v-icon>mdi-content-save</v-icon>\r\n\t\t\t\t{{ $t(\"button.save\") }}\r\n\t\t\t</v-btn>\r\n\t\t</v-card-actions>\r\n\t</v-card>\r\n</template>\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nexport default {\r\n\tname: \"EditProcessStep\",\r\n\tcomponents: { VuePerfectScrollbar },\r\n\tprops: { editedItem: {} },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuser_current: this.getUserInfo(),\r\n\t\t\tstepNameMessage: \"\",\r\n\t\t\tdescriptionMessage: \"\",\r\n\t\t\tprocessTermMessage: \"\",\r\n\t\t\tregex: /^[0-9]{1,2}(\\.[0-9])?$/,\r\n\t\t\tlistOrganzine: [],\r\n\t\t\tlistRank: [],\r\n\t\t\teditedIndex: -1,\r\n\t\t\tm_editedItem: {\r\n\t\t\t\tcreatedDate: null,\r\n\t\t\t\tcreated: null,\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tid: null,\r\n\t\t\t\tisActive: true,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tmodifiedDate: null,\r\n\t\t\t\tmodified: null,\r\n\t\t\t\tisAuthorizedApproval: false,\r\n\t\t\t\tisBack: false,\r\n\t\t\t\tisCreateTFSTask: false,\r\n\t\t\t\tisEdit: false,\r\n\t\t\t\tisExamine: false,\r\n\t\t\t\tisProcessRecover: false,\r\n\t\t\t\tisRequestModify: false,\r\n\t\t\t\tisRequiredSignature: false,\r\n\t\t\t\tisSendMail: false,\r\n\t\t\t\ttennant: null,\r\n\t\t\t\toptionDeny: 0,\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tprocessingTerm: 0,\r\n\t\t\t\tstepCode: \"\",\r\n\t\t\t\tstepName: \"\",\r\n\t\t\t\torganization: null,\r\n\t\t\t\trank: null,\r\n\t\t\t\ttennantCode: \"\",\r\n\t\t\t\ttennantName: \"\",\r\n\t\t\t},\r\n\t\t\tdefaultItem: {\r\n\t\t\t\tcreatedDate: null,\r\n\t\t\t\tcreated: null,\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tid: null,\r\n\t\t\t\tisActive: true,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tmodifiedDate: null,\r\n\t\t\t\tmodified: null,\r\n\t\t\t\tisAuthorizedApproval: false,\r\n\t\t\t\tisBack: false,\r\n\t\t\t\tisCreateTFSTask: false,\r\n\t\t\t\tisEdit: false,\r\n\t\t\t\tisExamine: false,\r\n\t\t\t\tisProcessRecover: false,\r\n\t\t\t\tisRequestModify: false,\r\n\t\t\t\tisRequiredSignature: false,\r\n\t\t\t\tisSendMail: false,\r\n\t\t\t\ttennant: null,\r\n\t\t\t\toptionDeny: 0,\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tprocessingTerm: 0,\r\n\t\t\t\tstepCode: \"\",\r\n\t\t\t\tstepName: \"\",\r\n\t\t\t\torganization: null,\r\n\t\t\t\trank: null,\r\n\t\t\t\ttennantCode: \"\",\r\n\t\t\t\ttennantName: \"\",\r\n\t\t\t},\r\n\t\t\tisSaving: false,\r\n\t\t\terrFomat: false,\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\teditedItem(value) {\r\n\t\t\tthis.m_editedItem = value;\r\n\t\t\tthis.stepNameMessage = \"\";\r\n\t\t\tthis.processTermMessage = \"\";\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.initialize();\r\n\t\tthis.getAllOrganize();\r\n\t\tthis.getAllRank();\r\n\t},\r\n\tcomputed: {\r\n\t\tformTitle() {\r\n\t\t\treturn this.editedItem.id === null\r\n\t\t\t\t? this.$t(\"title.create_step\")\r\n\t\t\t\t: this.$t(\"label.edit_step\");\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tasync initialize() {\r\n\t\t\tthis.m_editedItem = this.editedItem;\r\n\t\t},\r\n\t\tasync getAllOrganize() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_FindAllOrganization(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.listOrganzine = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(\"Error\", error);\r\n\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getAllRank() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRank(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.listRank = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(\"Error\", error);\r\n\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectRank(item) {\r\n\t\t\tthis.m_editedItem.rank = item;\r\n\t\t},\r\n\r\n\t\tasync selectOrganization(item) {\r\n\t\t\tthis.m_editedItem.organization = item;\r\n\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\tadministratorAPI.API_GetAllRankByOrganizaionId(item.id),\r\n\t\t\t);\r\n\t\t\tif (!response || !response.state) return;\r\n\t\t\tthis.listRank = response.data.filter((entry) => {\r\n\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t});\r\n\t\t\tthis.m_editedItem.rank = null;\r\n\t\t},\r\n\t\tasync removeOrganization() {\r\n\t\t\tthis.m_editedItem.rank = null;\r\n\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\tadministratorAPI.API_GetAllRank(),\r\n\t\t\t);\r\n\t\t\tif (!response || !response.state) return;\r\n\t\t\tthis.listRank = response.data.filter((entry) => {\r\n\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync save() {\r\n\t\t\tconsole.log(\"processingTerm\", this.m_editedItem.processingTerm);\r\n\t\t\tawait this.onClickOutsideProcessingTerm();\r\n\t\t\tif (this.isSaving || this.m_editedItem.stepName.trim() == \"\") {\r\n\t\t\t\tthis.$refs[\"stepName\"].focus();\r\n\t\t\t\tthis.stepNameMessage = this.$t(\"message.msg_1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.stepNameMessage = \"\";\r\n\t\t\tlet response;\r\n\r\n\t\t\tif (this.m_editedItem.stepName.trim().length > 255) {\r\n\t\t\t\tthis.toastError(this.$t(\"error.max_length_255\"));\r\n\t\t\t\tthis.$refs[\"stepName\"].focus();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.m_editedItem.description.trim().length > 255) {\r\n\t\t\t\tthis.toastError(this.$t(\"error.max_length_255\"));\r\n\t\t\t\tthis.$refs[\"description\"].focus();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t(this.m_editedItem.processingTerm &&\r\n\t\t\t\t\tthis.m_editedItem.processingTerm < 0) ||\r\n\t\t\t\tthis.errFomat\r\n\t\t\t) {\r\n\t\t\t\tthis.processTermMessage = this.$t(\"message.error_format\");\r\n\t\t\t\tthis.$refs[\"processingTerm\"].focus();\r\n\t\t\t\tthis.toastError(this.$t(\"message.add_error\"));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.m_editedItem.stepName.trim();\r\n\t\t\tthis.m_editedItem.description.trim();\r\n\t\t\tthis.isSaving = true;\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.m_editedItem.id) {\r\n\t\t\t\t\tthis.m_editedItem.created = this.user_current;\r\n\t\t\t\t\tthis.m_editedItem.createdName = this.user_current.fullName;\r\n\t\t\t\t\tthis.m_editedItem.modifiedDate = new Date();\r\n\t\t\t\t\tthis.m_editedItem.createdDate = new Date();\r\n\t\t\t\t\tthis.m_editedItem.modifiedName = this.user_current.fullName;\r\n\t\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_CreateStep(),\r\n\t\t\t\t\t\tthis.m_editedItem,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response.state) {\r\n\t\t\t\t\t\tthis.isSaving = false;\r\n\t\t\t\t\t\tthis.toastError(this.$t(\"message.add_error\"));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.toastSuccess(this.$t(\"message.add_success\"));\r\n\t\t\t\t\t\tthis.isSaving = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.m_editedItem.modifiedDate = new Date();\r\n\t\t\t\t\tthis.m_editedItem.modifiedName = this.user_current.fullName;\r\n\t\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_UpdateStep(this.m_editedItem.id),\r\n\t\t\t\t\t\tthis.m_editedItem,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (!response.state) {\r\n\t\t\t\t\t\tthis.isSaving = false;\r\n\t\t\t\t\t\tthis.toastError(this.$t(\"message.update_error\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.update_success\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis.m_editedItem = this.defaultItem;\r\n\t\t\t\tthis.isSaving = false;\r\n\t\t\t\tthis.closeDialog();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t} finally {\r\n\t\t\t\tthis.m_editedItem = this.defaultItem;\r\n\t\t\t\tthis.isSaving = false;\r\n\t\t\t\tthis.closeDialog();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonchangeStepName() {\r\n\t\t\tthis.stepNameMessage = \"\";\r\n\t\t},\r\n\t\tonchangeProcessingTerm() {\r\n\t\t\tif (\r\n\t\t\t\t!/e/.test(this.m_editedItem.processingTerm) &&\r\n\t\t\t\t!this.regex.test(this.m_editedItem.processingTerm)\r\n\t\t\t) {\r\n\t\t\t\tthis.processTermMessage = this.$t(\"message.error_format\");\r\n\t\t\t\tthis.errFomat = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errFomat = false;\r\n\t\t\t\tthis.processTermMessage = \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tonClickOutsideProcessingTerm() {\r\n\t\t\tif (!this.m_editedItem.processingTerm) {\r\n\t\t\t\tthis.errFomat = false;\r\n\t\t\t\tthis.m_editedItem.processingTerm = 0;\r\n\t\t\t\tthis.processTermMessage = \"\";\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n<style>\r\n.v-input__control {\r\n\ttext-align: top !important;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}