{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport RequestFormDataDto from \"@/models/form-data.dto\";\nimport ProcessDataDTO from \"@/models/process-data.dto\";\nimport RequestDataDto from \"@/models/request-data.dto\";\nimport StepDataDto from \"@/models/step-data.dto\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../../administrator/administrator.api\";\nimport ReqDataProcessHisDto from \"@/models/req-data-process-his.dto\";\nexport default {\n  name: \"NewRequestGroupVue\",\n  data: function data() {\n    return {\n      requestGroup: null,\n      requestGroups: [],\n      requestTypes: [],\n      requestType: null,\n      request: null,\n      radios: null,\n      radio: 0,\n      listAttachmentFlieByRequest: [],\n      listAttachmentFlieByRequestAll: [],\n      user_info: this.getUserInfo(),\n      m_requestDataDto: RequestDataDto,\n      processDataDTO: ProcessDataDTO,\n      stepInProcess: [],\n      requestFormDataDto: RequestFormDataDto,\n      processData: null,\n      fromData: null,\n      listProcessInfos: [],\n      requestStepData: StepDataDto,\n      requestProcessHis: ReqDataProcessHisDto,\n      listRequestStepData: [],\n      listUserInfos: {}\n    };\n  },\n  mounted: function mounted() {\n    this.initialize();\n  },\n  methods: {\n    initialize: function initialize() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.GetAllUser();\n\n              case 2:\n                _context.next = 4;\n                return _this._requestGroups();\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    _requestGroups: function _requestGroups() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestGroup());\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(!response || !response.state)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", []);\n\n              case 6:\n                _this2.requestGroups = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _context2.next = 13;\n                break;\n\n              case 9:\n                _context2.prev = 9;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                _this2.toastError(_context2.t0);\n\n                return _context2.abrupt(\"return\");\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 9]]);\n      }))();\n    },\n    handleRequestTypes: function handleRequestTypes(event) {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this3.requestType = event;\n\n                if (!(_this3.requestType === null)) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 3:\n                if (!(_this3.requestType.id && _this3.requestGroup.id)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                _context3.next = 6;\n                return _this3._request();\n\n              case 6:\n                _context3.next = 8;\n                return _this3.getAttachmentFileRequest();\n\n              case 8:\n                return _context3.abrupt(\"return\");\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    handleRequestGroup: function handleRequestGroup(event) {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this4.requestGroup = event;\n\n                if (!(_this4.requestGroup === null)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 3:\n                _context4.next = 5;\n                return _this4._requestTypes();\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    _requestTypes: function _requestTypes() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestTypeByRequestGroupId(_this5.requestGroup.id));\n\n              case 3:\n                response = _context5.sent;\n\n                if (!(!response || !response.state)) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", []);\n\n              case 6:\n                _this5.requestTypes = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _context5.next = 13;\n                break;\n\n              case 9:\n                _context5.prev = 9;\n                _context5.t0 = _context5[\"catch\"](0);\n\n                _this5.toastError(_context5.t0);\n\n                return _context5.abrupt(\"return\", []);\n\n              case 13:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 9]]);\n      }))();\n    },\n    _request: function _request() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var response, requests;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return globalService.getData_Async(administratorAPI.API_FindOneRequesrtByID(_this6.requestType.id));\n\n              case 3:\n                response = _context6.sent;\n\n                if (!(!response || !response.state)) {\n                  _context6.next = 6;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", _this6.toastError(_this6.$t(\"error.load\")));\n\n              case 6:\n                requests = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                console.log(\"this.request \", _this6.request);\n\n                if (requests.length > 0) {\n                  console.log(\"11212\");\n                  _this6.request = requests[0];\n                  _this6.listProcessInfos = _this6.request.processInfos[0];\n                  console.log(\"this.request \", _this6.request); //this.$emit(\"save\", this.request);\n                }\n\n                _context6.next = 15;\n                break;\n\n              case 11:\n                _context6.prev = 11;\n                _context6.t0 = _context6[\"catch\"](0);\n\n                _this6.toastError(_context6.t0);\n\n                return _context6.abrupt(\"return\");\n\n              case 15:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, null, [[0, 11]]);\n      }))();\n    },\n    clearRequestGroup: function clearRequestGroup() {\n      this.requestType = null;\n      this.requestTypes = [];\n      this.request = null;\n    },\n    clearForm: function clearForm() {\n      this.request = null;\n    },\n    getAttachmentFileRequest: function getAttachmentFileRequest() {\n      var _this7 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n        var _iterator, _step, _this7$listAttachment, _this7$listAttachment2, templateForm, response, response_, i;\n\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                console.log(\"this.request.templateForms\", _this7.request.templateForms);\n                _iterator = _createForOfIteratorHelper(_this7.request.templateForms);\n                _context7.prev = 2;\n\n                _iterator.s();\n\n              case 4:\n                if ((_step = _iterator.n()).done) {\n                  _context7.next = 19;\n                  break;\n                }\n\n                templateForm = _step.value;\n                response = void 0;\n                response_ = [];\n                _context7.next = 10;\n                return globalService.getData_Async(administratorAPI.API_GetAllAttachmentFileByTemplateFormId(templateForm.id));\n\n              case 10:\n                response = _context7.sent;\n\n                if (!(!response || !response.state)) {\n                  _context7.next = 13;\n                  break;\n                }\n\n                return _context7.abrupt(\"return\", []);\n\n              case 13:\n                for (i = 0; i < response.data.length; i++) {\n                  if (response_.indexOf(response.data[i]) == -1) {\n                    response_.push(response.data[i]);\n                  }\n                }\n\n                console.log(\"templateForm so\", response);\n\n                (_this7$listAttachment = _this7.listAttachmentFlieByRequest).push.apply(_this7$listAttachment, response_);\n\n                (_this7$listAttachment2 = _this7.listAttachmentFlieByRequestAll).push.apply(_this7$listAttachment2, response_);\n\n              case 17:\n                _context7.next = 4;\n                break;\n\n              case 19:\n                _context7.next = 24;\n                break;\n\n              case 21:\n                _context7.prev = 21;\n                _context7.t0 = _context7[\"catch\"](2);\n\n                _iterator.e(_context7.t0);\n\n              case 24:\n                _context7.prev = 24;\n\n                _iterator.f();\n\n                return _context7.finish(24);\n\n              case 27:\n                console.log(\"this.listAttachmentFlieByRequest 1995\", _this7.listAttachmentFlieByRequest);\n                console.log(\"this.listAttachmentFlieByRequest 1995\", _this7.listAttachmentFlieByRequestAll);\n\n              case 29:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, null, [[2, 21, 24, 27]]);\n      }))();\n    },\n    // removeItem(index, item) {\n    // \tthis.listAttachmentFlieByRequest[index] =\n    // \t\tthis.listAttachmentFlieByRequest[index].filter((entry) => {\n    // \t\t\tif (entry.id != item.id) return entry;\n    // \t\t});\n    // },\n    deselectTemplateForm: function deselectTemplateForm(item) {\n      this.listAttachmentFlieByRequest.splice(this.listAttachmentFlieByRequest.indexOf(item), 1);\n    },\n    saveRequetsData: function saveRequetsData() {\n      var _this8 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (_this8.request) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 2:\n                if (!_this8.isSaving) {\n                  _context8.next = 4;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 4:\n                _context8.prev = 4;\n                _this8.m_requestDataDto.modified = {\n                  id: _this8.user_info.id\n                };\n                _this8.m_requestDataDto.modifiedName = new Date();\n                _this8.m_requestDataDto.requestDataName = _this8.request.requestName;\n                _this8.m_requestDataDto.requestDataCode = _this8.request.requestCode;\n                _this8.m_requestDataDto.request = {\n                  id: _this8.request.id\n                };\n                _this8.m_requestDataDto.created = _this8.user_info;\n                _this8.m_requestDataDto.createdName = _this8.user_info.fullName;\n                _this8.m_requestDataDto.createdDate = new Date(); // lay api all status\n\n                _this8.m_requestDataDto.statusName = \"Đang soạn\";\n                _this8.m_requestDataDto.status = {\n                  id: 1\n                }; //this.m_requestDataDto.userInfos = this.listUserInfo;\n\n                _this8.m_requestDataDto.requestGroupCode = _this8.request.requestGroup.requestGroupCode;\n                _this8.m_requestDataDto.requestGroupName = _this8.request.requestGroup.requestGroupName;\n                _this8.m_requestDataDto.requestTypeCode = _this8.request.requestType.requestTypeCode;\n                _this8.m_requestDataDto.requestTypeName = _this8.request.requestType.requestTypeName;\n                _this8.m_requestDataDto.signTypeName = _this8.radios;\n                _this8.m_requestDataDto.signTypeCode = _this8.radio;\n                _this8.m_requestDataDto.attachmentFileList = _this8.listAttachmentFlieByRequest;\n                _context8.next = 24;\n                return globalService.postData_Async(administratorAPI.API_CreateRequestData(), _this8.m_requestDataDto);\n\n              case 24:\n                response = _context8.sent;\n                console.log(\"this.requestData\", response);\n\n                if (!(!response || !response.state)) {\n                  _context8.next = 28;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", _this8.isSaving = false);\n\n              case 28:\n                _this8.requestData = response.data;\n                _context8.next = 31;\n                return _this8.saveProcessData();\n\n              case 31:\n                _context8.next = 33;\n                return _this8.saveFormData();\n\n              case 33:\n                _context8.next = 35;\n                return _this8.saveReqdataProcessHis();\n\n              case 35:\n                _this8.$emit(\"close\", true);\n\n                _this8.toastSuccess(_this8.$t(\"message.add_success\"));\n\n                _this8.$router.push({\n                  path: \"/phieu-yeu-cau/\".concat(_this8.requestData.id, \"/chi-tiet\")\n                });\n\n                _context8.next = 43;\n                break;\n\n              case 40:\n                _context8.prev = 40;\n                _context8.t0 = _context8[\"catch\"](4);\n\n                _this8.toastError(_context8.t0);\n\n              case 43:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[4, 40]]);\n      }))();\n    },\n    getStepInProcesses: function getStepInProcesses(item) {\n      var _this9 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return globalService.getData_Async(administratorAPI.API_FindStepInProcessesByID(item));\n\n              case 3:\n                response = _context9.sent;\n\n                if (!(!response || !response.state)) {\n                  _context9.next = 6;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 6:\n                _this9.stepInProcess = response.data;\n                console.log(\"this.stepInProcess\", _this9.stepInProcess);\n                _context9.next = 14;\n                break;\n\n              case 10:\n                _context9.prev = 10;\n                _context9.t0 = _context9[\"catch\"](0);\n\n                _this9.toastError(_context9.t0);\n\n                return _context9.abrupt(\"return\");\n\n              case 14:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 10]]);\n      }))();\n    },\n    saveProcessData: function saveProcessData() {\n      var _this10 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n        var response, _iterator2, _step2, processInfo;\n\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _iterator2 = _createForOfIteratorHelper(_this10.request.processInfos);\n                _context10.prev = 1;\n\n                _iterator2.s();\n\n              case 3:\n                if ((_step2 = _iterator2.n()).done) {\n                  _context10.next = 28;\n                  break;\n                }\n\n                processInfo = _step2.value;\n                _this10.processDataDTO.created = {\n                  id: processInfo.created.id\n                };\n                _this10.processDataDTO.createdDate = processInfo.createdDate;\n                _this10.processDataDTO.isActive = processInfo.isActive;\n                _this10.processDataDTO.isDelete = processInfo.isDelete;\n                _this10.processDataDTO.modified = {\n                  id: processInfo.modified.id\n                };\n                _this10.processDataDTO.modifiedDate = processInfo.modifiedDate;\n                _this10.processDataDTO.modifiedName = processInfo.modifiedName;\n                _this10.processDataDTO.processDataCode = processInfo.processCode;\n                _this10.processDataDTO.processDataName = processInfo.processName;\n                _this10.processDataDTO.requestData = {\n                  id: _this10.requestData.id\n                };\n                _context10.next = 17;\n                return globalService.postData_Async(administratorAPI.API_CreateProcessData(), _this10.processDataDTO);\n\n              case 17:\n                response = _context10.sent;\n\n                if (!(!response || !response.state)) {\n                  _context10.next = 20;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\");\n\n              case 20:\n                _this10.processData = response.data;\n                console.log(\"this.processData\", _this10.processData);\n                _context10.next = 24;\n                return _this10.getStepInProcesses(processInfo.id);\n\n              case 24:\n                _context10.next = 26;\n                return _this10.saveStepData();\n\n              case 26:\n                _context10.next = 3;\n                break;\n\n              case 28:\n                _context10.next = 33;\n                break;\n\n              case 30:\n                _context10.prev = 30;\n                _context10.t0 = _context10[\"catch\"](1);\n\n                _iterator2.e(_context10.t0);\n\n              case 33:\n                _context10.prev = 33;\n\n                _iterator2.f();\n\n                return _context10.finish(33);\n\n              case 36:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, null, [[1, 30, 33, 36]]);\n      }))();\n    },\n    saveProcessDataV2: function saveProcessDataV2() {\n      var _this11 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                console.log(\"listProcessInfos\", _this11.listProcessInfos);\n                _this11.processDataDTO.created = {\n                  id: _this11.listProcessInfos.created.id\n                };\n                _this11.processDataDTO.createdDate = _this11.listProcessInfos.createdDate;\n                _this11.processDataDTO.isActive = _this11.listProcessInfos.isActive;\n                _this11.processDataDTO.isDelete = _this11.listProcessInfos.isDelete;\n                _this11.processDataDTO.modified = {\n                  id: _this11.listProcessInfos.modified.id\n                };\n                _this11.processDataDTO.modifiedDate = _this11.listProcessInfos.modifiedDate;\n                _this11.processDataDTO.modifiedName = _this11.listProcessInfos.modifiedName;\n                _this11.processDataDTO.processDataCode = _this11.listProcessInfos.processCode;\n                _this11.processDataDTO.processDataName = _this11.listProcessInfos.processName;\n                _this11.processDataDTO.requestData = {\n                  id: _this11.requestData.id\n                };\n                _context11.next = 13;\n                return globalService.postData_Async(administratorAPI.API_CreateProcessData(), _this11.processDataDTO);\n\n              case 13:\n                response = _context11.sent;\n\n                if (!(!response || !response.state)) {\n                  _context11.next = 16;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\");\n\n              case 16:\n                _this11.processData = response.data;\n                console.log(\"this.processData 1995\", _this11.processData);\n                _context11.next = 20;\n                return _this11.getStepInProcesses(_this11.listProcessInfos.id);\n\n              case 20:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11);\n      }))();\n    },\n    saveFormData: function saveFormData() {\n      var _this12 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _this12.requestFormDataDto.option = _this12.request.form.option;\n                _this12.requestFormDataDto.formDataCode = _this12.request.form.formDataCode;\n                _this12.requestFormDataDto.formDateName = _this12.request.form.formDateName;\n                _this12.requestFormDataDto.objectSchema = _this12.request.form.objectSchema;\n                _this12.requestFormDataDto.objectModel = _this12.request.form.objectModel;\n                _this12.requestFormDataDto.createdName = _this12.request.form.createdName;\n                _this12.requestFormDataDto.createdDate = _this12.request.form.createdDate;\n                _this12.requestFormDataDto.modifiedName = _this12.request.form.modifiedName;\n                _this12.requestFormDataDto.modifiedDate = _this12.request.form.modifiedDate;\n                _this12.requestFormDataDto.isActive = _this12.request.form.isActive;\n                _this12.requestFormDataDto.isDelete = _this12.request.form.isDelete;\n                _this12.requestFormDataDto.tennantCode = _this12.request.form.tennantCode;\n                _this12.requestFormDataDto.tennantName = _this12.request.form.tennantName;\n                _this12.requestFormDataDto.created = {\n                  id: _this12.request.form.created.id\n                };\n                _this12.requestFormDataDto.modified = {\n                  id: _this12.request.form.modified.id\n                };\n                _this12.requestFormDataDto.requestData = {\n                  id: _this12.requestData.id\n                };\n                _this12.requestFormDataDto.form = _this12.request.form;\n                _context12.next = 19;\n                return globalService.postData_Async(administratorAPI.API_CreateFormData(), _this12.requestFormDataDto);\n\n              case 19:\n                response = _context12.sent;\n\n                if (!(!response || !response.state)) {\n                  _context12.next = 22;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 22:\n                _this12.fromData = response.data;\n                console.log(\"this.fromData\", _this12.fromData);\n\n              case 24:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12);\n      }))();\n    },\n    saveStepData: function saveStepData() {\n      var _this13 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {\n        var _iterator3, _step3, _stepInProces$organiz, _stepInProces$organiz2, stepInProces, response;\n\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                console.log(\"this.stepInProcess saveStepData\", _this13.stepInProcess);\n                _iterator3 = _createForOfIteratorHelper(_this13.stepInProcess);\n                _context13.prev = 2;\n\n                _iterator3.s();\n\n              case 4:\n                if ((_step3 = _iterator3.n()).done) {\n                  _context13.next = 50;\n                  break;\n                }\n\n                stepInProces = _step3.value;\n                console.log(\"stepInProces: \", stepInProces);\n                _this13.requestStepData.isActive = false;\n                _this13.requestStepData.created = {\n                  id: _this13.user_info.id\n                };\n                _this13.requestStepData.step = {\n                  id: stepInProces.step.id\n                };\n                _this13.requestStepData.processData = {\n                  id: _this13.processData.id\n                };\n                _this13.requestStepData.requestData = {\n                  id: _this13.requestData.id\n                };\n                _this13.requestStepData.stepInProcess = {\n                  id: stepInProces.id\n                }; // this.requestStepData = [...stepInProces];\n\n                _this13.requestStepData.stepOrder = stepInProces.stepOrder;\n                _this13.requestStepData.stepDataCode = stepInProces.stepInProcessCode;\n                _this13.requestStepData.stepDataName = stepInProces.stepInProcessName;\n                _this13.requestStepData.processingTerm = stepInProces.processingTerm;\n                _this13.requestStepData.precessingTermTime = stepInProces.precessingTermTime;\n                _this13.requestStepData.isRequiredSignature = stepInProces.isRequiredSignature;\n                _this13.requestStepData.isBack = stepInProces.isBack;\n                _this13.requestStepData.isAuthorizedApproval = stepInProces.isAuthorizedApproval;\n                _this13.requestStepData.isExamine = stepInProces.isExamine;\n                _this13.requestStepData.isEdit = stepInProces.isEdit;\n                _this13.requestStepData.isRequestModify = stepInProces.isRequestModify;\n                _this13.requestStepData.isSendMail = stepInProces.isSendMail;\n                _this13.requestStepData.isProcessRecover = stepInProces.isProcessRecover;\n                _this13.requestStepData.isCreateTfsTask = stepInProces.isCreateTfsTask;\n                _this13.requestStepData.organizationCode = (_stepInProces$organiz = stepInProces.organization) === null || _stepInProces$organiz === void 0 ? void 0 : _stepInProces$organiz.organizationCode;\n                _this13.requestStepData.organizationName = (_stepInProces$organiz2 = stepInProces.organization) === null || _stepInProces$organiz2 === void 0 ? void 0 : _stepInProces$organiz2.organizationName;\n                _this13.requestStepData.rankCode = stepInProces.rankCode;\n                _this13.requestStepData.rankName = stepInProces.rankName;\n                _this13.requestStepData.description = stepInProces.description;\n                _this13.requestStepData.createdName = stepInProces.createdName;\n                _this13.requestStepData.createdDate = stepInProces.createdDate;\n                _this13.requestStepData.modifiedName = stepInProces.modifiedName;\n                _this13.requestStepData.isDelete = stepInProces.isDelete;\n                _this13.requestStepData.tennantCode = stepInProces.tennantCode;\n                _this13.requestStepData.tennantName = stepInProces.tennantName;\n                _this13.requestStepData.modifiedDate = stepInProces.modifiedDate;\n                _this13.requestStepData.modified = {\n                  id: stepInProces.modified.id\n                };\n                _this13.requestStepData.userInfos = stepInProces.userInStepDTOs.map(function (entry) {\n                  return {\n                    id: entry.userInfo.id\n                  };\n                });\n                _context13.next = 43;\n                return globalService.postData_Async(administratorAPI.API_CreateStepData(), _this13.requestStepData);\n\n              case 43:\n                response = _context13.sent;\n\n                if (!(!response || !response.state)) {\n                  _context13.next = 46;\n                  break;\n                }\n\n                return _context13.abrupt(\"return\");\n\n              case 46:\n                _this13.listRequestStepData = response.data;\n                console.log(\"this.listRequestStepData 123\", _this13.listRequestStepData);\n\n              case 48:\n                _context13.next = 4;\n                break;\n\n              case 50:\n                _context13.next = 55;\n                break;\n\n              case 52:\n                _context13.prev = 52;\n                _context13.t0 = _context13[\"catch\"](2);\n\n                _iterator3.e(_context13.t0);\n\n              case 55:\n                _context13.prev = 55;\n\n                _iterator3.f();\n\n                return _context13.finish(55);\n\n              case 58:\n                _this13.toastSuccess(_this13.$t(\"message.add_success\"));\n\n              case 59:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, null, [[2, 52, 55, 58]]);\n      }))();\n    },\n    radios1: function radios1() {\n      this.radio = 0;\n      console.log(\"this.radio\", this.radio);\n    },\n    radios2: function radios2() {\n      this.radio = 1;\n      console.log(\"this.radio\", this.radio);\n    },\n    openExit: function openExit() {\n      this.$router.push({\n        path: \"/phieu-yeu-cau/\"\n      });\n    },\n    close: function close() {\n      this.$emit(\"close\", true);\n    },\n    saveReqdataProcessHis: function saveReqdataProcessHis() {\n      var _this14 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.prev = 0;\n                _this14.requestProcessHis.createDate = new Date();\n                _this14.requestProcessHis.description = _this14.m_requestDataDto.description;\n                _this14.requestProcessHis.organizationName = null, _this14.requestProcessHis.processDate = new Date();\n                console.log(\"this.user_info\", _this14.user_info);\n                _this14.requestProcessHis.processer = _this14.user_info;\n                _this14.requestProcessHis.processerName = _this14.user_info.fullName;\n                _this14.requestProcessHis.rankName = null;\n                _this14.requestProcessHis.requestData = {\n                  id: _this14.requestData.id\n                }, _this14.requestProcessHis.status = \"Đang soạn\", _this14.requestProcessHis.stepData = _this14.listRequestStepData; // this.requestProcessHis.tennantCode =;\n                // this.requestProcessHis.tennantId =;\n                // this.requestProcessHis.tennantName =;\n\n                _context14.next = 11;\n                return globalService.postData_Async(administratorAPI.API_CreateReqdataProcessHis(), _this14.requestProcessHis);\n\n              case 11:\n                response = _context14.sent;\n\n                if (!(!response || !response.state)) {\n                  _context14.next = 14;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\");\n\n              case 14:\n                console.log(\"requestProcessHis\", response.data);\n                _context14.next = 21;\n                break;\n\n              case 17:\n                _context14.prev = 17;\n                _context14.t0 = _context14[\"catch\"](0);\n\n                _this14.toastError(_context14.t0);\n\n                return _context14.abrupt(\"return\");\n\n              case 21:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, null, [[0, 17]]);\n      }))();\n    },\n    GetAllUser: function GetAllUser() {\n      var _this15 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {\n        var response, allUser;\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.prev = 0;\n                _context15.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllUserInfos());\n\n              case 3:\n                response = _context15.sent;\n\n                if (!(!response || !response.state)) {\n                  _context15.next = 6;\n                  break;\n                }\n\n                return _context15.abrupt(\"return\", []);\n\n              case 6:\n                allUser = response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                });\n                allUser.forEach(function (entry) {\n                  _this15.$set(_this15.listUserInfos, entry.id, entry);\n                });\n                console.log(\"this.listUserInfos\", _this15.listUserInfos);\n                _context15.next = 15;\n                break;\n\n              case 11:\n                _context15.prev = 11;\n                _context15.t0 = _context15[\"catch\"](0);\n\n                _this15.toastError(_context15.t0);\n\n                return _context15.abrupt(\"return\");\n\n              case 15:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, null, [[0, 11]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8MA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA,0BADA;EAEAC,IAFA,kBAEA;IACA;MACAC,kBADA;MAEAC,iBAFA;MAGAC,gBAHA;MAIAC,iBAJA;MAKAC,aALA;MAMAC,YANA;MAOAC,QAPA;MASAC,+BATA;MAUAC,kCAVA;MAWAC,6BAXA;MAYAC,gCAZA;MAaAC,8BAbA;MAcAC,iBAdA;MAeAC,sCAfA;MAgBAC,iBAhBA;MAiBAC,cAjBA;MAkBAC,oBAlBA;MAmBAC,4BAnBA;MAoBAC,uCApBA;MAqBAC,uBArBA;MAsBAC;IAtBA;EAwBA,CA3BA;EA6BAC,OA7BA,qBA6BA;IACA;EACA,CA/BA;EAiCAC;IACAC,UADA,wBACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,kBADA;;cAAA;gBAAA;gBAAA,OAEA,sBAFA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA,CAJA;IAKAC,cALA,4BAKA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAC,4BACAC,yCADA,CAHA;;cAAA;gBAGAC,QAHA;;gBAAA,MAMA,4BANA;kBAAA;kBAAA;gBAAA;;gBAAA,kCAOA,EAPA;;cAAA;gBAUA;kBACA;gBACA,CAFA;gBAVA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAcA;;gBAdA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAiBA,CAtBA;IAuBAC,kBAvBA,8BAuBAC,KAvBA,EAuBA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBADA,MAEA,2BAFA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA,MAMA,+CANA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAOA,iBAPA;;cAAA;gBAAA;gBAAA,OAQA,iCARA;;cAAA;gBAAA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAYA,CAnCA;IAoCAC,kBApCA,8BAoCAD,KApCA,EAoCA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBADA,MAEA,4BAFA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;gBAAA,OAKA,sBALA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAMA,CA1CA;IA2CAE,aA3CA,2BA2CA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAN,4BACAC,uDACA,sBADA,CADA,CAHA;;cAAA;gBAGAC,QAHA;;gBAAA,MAQA,4BARA;kBAAA;kBAAA;gBAAA;;gBAAA,kCASA,EATA;;cAAA;gBAYA;kBACA;gBACA,CAFA;gBAZA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAgBA;;gBAhBA,kCAiBA,EAjBA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAmBA,CA9DA;IA+DAK,QA/DA,sBA+DA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAP,4BACAC,yCACA,qBADA,CADA,CAFA;;cAAA;gBAEAC,QAFA;;gBAAA,MAOA,4BAPA;kBAAA;kBAAA;gBAAA;;gBAAA,kCAQA,0CARA;;cAAA;gBAWAM;kBACA;gBACA,CAFA;gBAGAC;;gBAEA;kBACAA;kBACA;kBACA;kBACAA,6CAJA,CAKA;gBACA;;gBAtBA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAwBA;;gBAxBA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA2BA,CA1FA;IA2FAC,iBA3FA,+BA2FA;MACA;MACA;MACA;IACA,CA/FA;IAgGAC,SAhGA,uBAgGA;MACA;IACA,CAlGA;IAmGAC,wBAnGA,sCAmGA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACAH,YACA,4BADA,EAEA,4BAFA;gBADA,uCAKA,4BALA;gBAAA;;gBAAA;;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;;gBAKAI,YALA;gBAMAX,QANA;gBAOAY,SAPA,GAOA,EAPA;gBAAA;gBAAA,OAQAd,4BACAC,0DACAY,eADA,CADA,CARA;;cAAA;gBAQAX,QARA;;gBAAA,MAaA,4BAbA;kBAAA;kBAAA;gBAAA;;gBAAA,kCAcA,EAdA;;cAAA;gBAgBA;kBACA;oBACAY;kBACA;gBACA;;gBACAL;;gBACA;;gBACA;;cAvBA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;;gBAAA;;gBAAA;;cAAA;gBAyBAA,YACA,uCADA,EAEA,kCAFA;gBAIAA,YACA,uCADA,EAEA,qCAFA;;cA7BA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAiCA,CApIA;IAqIA;IACA;IACA;IACA;IACA;IACA;IACAM,oBA3IA,gCA2IAC,IA3IA,EA2IA;MACA,wCACA,8CADA,EAEA,CAFA;IAIA,CAhJA;IAiJAC,eAjJA,6BAiJA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA,cADA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA,KAIA,eAJA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;gBAQA;kBAAAC;gBAAA;gBACA;gBACA,0CACA,0BADA;gBAEA,0CACA,0BADA;gBAEA;kBAAAA;gBAAA;gBACA;gBACA;gBACA,iDAjBA,CAkBA;;gBACA;gBACA;kBAAAA;gBAAA,EApBA,CAqBA;;gBACA,2CACA,4CADA;gBAEA,2CACA,4CADA;gBAEA,0CACA,0CADA;gBAEA,0CACA,0CADA;gBAEA;gBACA;gBACA,6CACA,kCADA;gBAhCA;gBAAA,OAmCAlB,6BACAC,wCADA,EAEA,uBAFA,CAnCA;;cAAA;gBAmCAC,QAnCA;gBAuCAO;;gBAvCA,MAyCA,4BAzCA;kBAAA;kBAAA;gBAAA;;gBAAA,kCA0CA,uBA1CA;;cAAA;gBA4CA;gBA5CA;gBAAA,OA6CA,wBA7CA;;cAAA;gBAAA;gBAAA,OA8CA,qBA9CA;;cAAA;gBAAA;gBAAA,OA+CA,8BA/CA;;cAAA;gBAgDA;;gBACA;;gBAEA;kBACAU;gBADA;;gBAnDA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAuDA;;cAvDA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAyDA,CA1MA;IA2MAC,kBA3MA,8BA2MAJ,IA3MA,EA2MA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAhB,4BACAC,kDADA,CAHA;;cAAA;gBAGAC,QAHA;;gBAAA,MAMA,4BANA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBASA;gBACAO;gBAVA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAYA;;gBAZA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAeA,CA1NA;IA2NAY,eA3NA,6BA2NA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA,wCAEA,4BAFA;gBAAA;;gBAAA;;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;;gBAEAC,WAFA;gBAGA;kBACAJ;gBADA;gBAIA;gBACA;gBACA;gBAEA;kBACAA;gBADA;gBAIA;gBACA;gBACA;gBACA;gBAEA;kBAAAA;gBAAA;gBApBA;gBAAA,OAsBAlB,6BACAC,wCADA,EAEA,sBAFA,CAtBA;;cAAA;gBAsBAC,QAtBA;;gBAAA,MA0BA,4BA1BA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBA+BA;gBAEAO;gBAjCA;gBAAA,OAkCA,0CAlCA;;cAAA;gBAAA;gBAAA,OAmCA,sBAnCA;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;;gBAAA;;gBAAA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAqCA,CAhQA;IAiQAc,iBAjQA,+BAiQA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAEAd;gBACA;kBACAS;gBADA;gBAIA;gBACA;gBACA;gBAEA;kBACAA;gBADA;gBAGA,sCACA,qCADA;gBAEA,sCACA,qCADA;gBAEA,yCACA,oCADA;gBAEA,yCACA,oCADA;gBAGA;kBAAAA;gBAAA;gBAvBA;gBAAA,OAwBAlB,6BACAC,wCADA,EAEA,sBAFA,CAxBA;;cAAA;gBAwBAC,QAxBA;;gBAAA,MA4BA,4BA5BA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAiCA;gBACAO;gBAlCA;gBAAA,OAmCA,uDAnCA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAoCA,CArSA;IAsSAe,YAtSA,0BAsSA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA,0CACA,iCADA;gBAEA,0CACA,iCADA;gBAEA,0CACA,iCADA;gBAEA;gBACA;gBACA;gBACA,0CACA,iCADA;gBAEA,0CACA,iCADA;gBAEA;gBACA;gBACA;gBACA;gBACA;kBACAN;gBADA;gBAGA;kBACAA;gBADA;gBAIA;kBACAA;gBADA;gBAGA;gBA7BA;gBAAA,OA+BAlB,6BACAC,qCADA,EAEA,0BAFA,CA/BA;;cAAA;gBA+BAC,QA/BA;;gBAAA,MAmCA,4BAnCA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAwCA;gBACAO;;cAzCA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA0CA,CAhVA;IAiVAgB,YAjVA,0BAiVA;MAAA;;MAAA;QAAA;;QAAA;UAAA;YAAA;cAAA;gBACAhB;gBADA,wCAEA,qBAFA;gBAAA;;gBAAA;;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;;gBAEAiB,YAFA;gBAGAjB;gBACA;gBACA;kBAAAS;gBAAA;gBACA;kBAAAA;gBAAA;gBACA;kBACAA;gBADA;gBAGA;kBACAA;gBADA;gBAGA;kBAAAA;gBAAA,EAbA,CAcA;;gBACA;gBACA,uCACAQ,8BADA;gBAEA,uCACAA,8BADA;gBAEA,yCACAA,2BADA;gBAEA,6CACAA,+BADA;gBAEA,8CACAA,gCADA;gBAEA;gBACA,+CACAA,iCADA;gBAEA;gBACA;gBACA,0CACAA,4BADA;gBAEA;gBACA,2CACAA,6BADA;gBAEA,0CACAA,4BADA;gBAEA,oEACAA,yBADA,0DACA,sCADA;gBAEA,qEACAA,yBADA,2DACA,uCADA;gBAEA;gBACA;gBACA;gBACA;gBACA;gBACA;gBAEA;gBACA;gBACA;gBAEA;gBAEA;kBACAR;gBADA;gBAGA,oCACAQ;kBACA;oBAAAR;kBAAA;gBACA,CAFA,CADA;gBA1DA;gBAAA,OA+DAlB,6BACAC,qCADA,EAEA,uBAFA,CA/DA;;cAAA;gBA+DAC,QA/DA;;gBAAA,MAoEA,4BApEA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAuEA;gBACAO,YACA,8BADA,EAEA,2BAFA;;cAxEA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAAA;;cAAA;gBAAA;;gBAAA;;gBAAA;;cAAA;gBA8EA;;cA9EA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA+EA,CAhaA;IAiaAkB,OAjaA,qBAiaA;MACA;MACAlB;IACA,CApaA;IAqaAmB,OAraA,qBAqaA;MACA;MACAnB;IACA,CAxaA;IAyaAoB,QAzaA,sBAyaA;MACA;QACAV;MADA;IAGA,CA7aA;IA8aAW,KA9aA,mBA8aA;MACA;IACA,CAhbA;IAibAC,qBAjbA,mCAibA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAGA;gBACA,wCACA,oCADA;gBAEA,mDACA,kDADA;gBAEAtB;gBACA;gBACA;gBACA;gBACA;kBACAS;gBADA,GAGA,8CAHA,EAIA,qCACA,2BALA,CAZA,CAmBA;gBACA;gBACA;;gBArBA;gBAAA,OAuBAlB,6BACAC,8CADA,EAEA,yBAFA,CAvBA;;cAAA;gBAuBAC,QAvBA;;gBAAA,MA2BA,4BA3BA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBA8BAO;gBA9BA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAgCA;;gBAhCA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAmCA,CApdA;IAqdAuB,UArdA,wBAqdA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAhC,4BACAC,sCADA,CAHA;;cAAA;gBAGAC,QAHA;;gBAAA,MAMA,4BANA;kBAAA;kBAAA;gBAAA;;gBAAA,mCAOA,EAPA;;cAAA;gBASA+B,OATA,GASA/B;kBACA;gBACA,CAFA,CATA;gBAYA+B;kBACA;gBACA,CAFA;gBAGAxB;gBAfA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAiBA;;gBAjBA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAoBA;EAzeA;AAjCA","names":["name","data","requestGroup","requestGroups","requestTypes","requestType","request","radios","radio","listAttachmentFlieByRequest","listAttachmentFlieByRequestAll","user_info","m_requestDataDto","processDataDTO","stepInProcess","requestFormDataDto","processData","fromData","listProcessInfos","requestStepData","requestProcessHis","listRequestStepData","listUserInfos","mounted","methods","initialize","_requestGroups","globalService","administratorAPI","response","handleRequestTypes","event","handleRequestGroup","_requestTypes","_request","requests","console","clearRequestGroup","clearForm","getAttachmentFileRequest","templateForm","response_","deselectTemplateForm","item","saveRequetsData","id","path","getStepInProcesses","saveProcessData","processInfo","saveProcessDataV2","saveFormData","saveStepData","stepInProces","radios1","radios2","openExit","close","saveReqdataProcessHis","GetAllUser","allUser"],"sourceRoot":"src/views/modules/khai-phieu-yeu-cau/RequestForm","sources":["NewRequestGroup.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<vue-perfect-scrollbar class=\"h-5/6\">\r\n\t\t\t<v-row class=\"mt-4\">\r\n\t\t\t\t<v-col cols=\"12\" md=\"12\" class=\"px-10\">\r\n\t\t\t\t\t<v-card-title>Nhóm yêu cầu</v-card-title>\r\n\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\tv-model=\"requestGroup\"\r\n\t\t\t\t\t\t:items=\"requestGroups\"\r\n\t\t\t\t\t\titem-text=\"requestGroupName\"\r\n\t\t\t\t\t\tbackground-color=\"#fff\"\r\n\t\t\t\t\t\tclass=\"text-red pt-2\"\r\n\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t@click:clear=\"clearRequestGroup()\"\r\n\t\t\t\t\t\t@change=\"handleRequestGroup($event)\"\r\n\t\t\t\t\t\tplaceholder=\"Chọn nhóm yêu cầu\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<template\r\n\t\t\t\t\t\t\tv-slot:selection=\"{ attrs, item, parent, selected }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\tv-if=\"item === Object(item)\"\r\n\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t:input-value=\"selected\"\r\n\t\t\t\t\t\t\t\tlabel\r\n\t\t\t\t\t\t\t\tclass=\"ma-2 rounded\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span class=\"text-black\">\r\n\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.requestGroupName,\r\n\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t<span class=\"pr-2\">\r\n\t\t\t\t\t\t\t\t\t{{ item.fullName }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<v-icon small @click=\"parent.selectItem(item)\">\r\n\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</v-combobox>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\t\t\t<v-row class=\"mt-4\" v-if=\"requestGroup\">\r\n\t\t\t\t<v-col cols=\"12\" md=\"12\" class=\"px-10\">\r\n\t\t\t\t\t<v-card-title>Loại yêu cầu </v-card-title>\r\n\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\tv-model=\"requestType\"\r\n\t\t\t\t\t\t:items=\"requestTypes\"\r\n\t\t\t\t\t\titem-text=\"requestTypeName\"\r\n\t\t\t\t\t\tbackground-color=\"#fff\"\r\n\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t@change=\"handleRequestTypes($event)\"\r\n\t\t\t\t\t\t@click:clear=\"clearForm()\"\r\n\t\t\t\t\t\tplaceholder=\"Chọn loại yêu cầu\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<template\r\n\t\t\t\t\t\t\tv-slot:selection=\"{ attrs, item, parent, selected }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\tv-if=\"item === Object(item)\"\r\n\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t:input-value=\"selected\"\r\n\t\t\t\t\t\t\t\tlabel\r\n\t\t\t\t\t\t\t\tclass=\"ma-2 rounded\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span class=\"text-black\">\r\n\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.requestTypeName,\r\n\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t<span class=\"pr-2\">\r\n\t\t\t\t\t\t\t\t\t{{ item.fullName }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<v-icon small @click=\"parent.selectItem(item)\">\r\n\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</v-combobox>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\t\t\t<v-row class=\"mt-4\" v-if=\"request\">\r\n\t\t\t\t<v-col cols=\"12\" md=\"12\" class=\"px-10\">\r\n\t\t\t\t\t<v-card-title> Thông tin</v-card-title>\r\n\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\tlabel=\"Tiêu đề * \"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tv-model=\"m_requestDataDto.title\"\r\n\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t<div class=\"flex\">\r\n\t\t\t\t\t\t<v-radio-group v-model=\"radios\" mandatory row>\r\n\t\t\t\t\t\t\t<v-radio\r\n\t\t\t\t\t\t\t\tlabel=\"Ký số\"\r\n\t\t\t\t\t\t\t\tvalue=\"Ký số\"\r\n\t\t\t\t\t\t\t\t@click=\"radios1\"\r\n\t\t\t\t\t\t\t></v-radio>\r\n\t\t\t\t\t\t\t<v-radio\r\n\t\t\t\t\t\t\t\tlabel=\"Ký tươi\"\r\n\t\t\t\t\t\t\t\tvalue=\"Ký tươi\"\r\n\t\t\t\t\t\t\t\t@click=\"radios2\"\r\n\t\t\t\t\t\t\t></v-radio>\r\n\t\t\t\t\t\t</v-radio-group>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<v-textarea\r\n\t\t\t\t\t\tlabel=\"Mô tả\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tv-model=\"m_requestDataDto.description\"\r\n\t\t\t\t\t></v-textarea>\r\n\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\tlabel=\"File mẫu\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tv-model=\"listAttachmentFlieByRequest\"\r\n\t\t\t\t\t\t:items=\"listAttachmentFlieByRequestAll\"\r\n\t\t\t\t\t\titem-text=\"fileName\"\r\n\t\t\t\t\t\tchips\r\n\t\t\t\t\t\thide-selected\r\n\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t><template\r\n\t\t\t\t\t\t\tv-slot:selection=\"{ attrs, item, parent, selected }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\tv-if=\"item === Object(item)\"\r\n\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t:input-value=\"selected\"\r\n\t\t\t\t\t\t\t\tlabel\r\n\t\t\t\t\t\t\t\tclass=\"ma-2 rounded-pill\"\r\n\t\t\t\t\t\t\t\tclose\r\n\t\t\t\t\t\t\t\t@click:close=\"deselectTemplateForm(item)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"30\">\r\n\t\t\t\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t\t\t\t{{ getAvatarText(item.fileName, 2) }}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t\t\t\t<span class=\"pr-2\">\r\n\t\t\t\t\t\t\t\t\t{{ item.fileName }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<v-icon small @click=\"parent.selectItem(item)\">\r\n\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</v-combobox>\r\n\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\tlabel=\"Quy trình áp dụng\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tv-model=\"listProcessInfos\"\r\n\t\t\t\t\t\t:items=\"request.processInfos\"\r\n\t\t\t\t\t\titem-text=\"processName\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<template v-slot:selection=\"{ attrs, item, selected }\">\r\n\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\tv-if=\"item === Object(item)\"\r\n\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t:input-value=\"selected\"\r\n\t\t\t\t\t\t\t\tlabel\r\n\t\t\t\t\t\t\t\tclass=\"ma-2 rounded-pill\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span class=\"text-black\">\r\n\t\t\t\t\t\t\t\t\t{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.processName,\r\n\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<!-- \r\n\t\t\t\t\t\t\t<span class=\"pr-2\">\r\n\t\t\t\t\t\t\t\t{{ item.fullName}}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<v-icon small @click=\"parent.selectItem(item)\">\r\n\t\t\t\t\t\t\t</v-icon> -->\r\n\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</v-combobox>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\t\t\t<v-row class=\"mt-4\">\r\n\t\t\t\t<v-col cols=\"12\" md=\"12\" class=\"px-10\">\r\n\t\t\t\t\t<div class=\"float-right\">\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\tcolor=\"blue\"\r\n\t\t\t\t\t\t\tclass=\"mx-5 my-0\"\r\n\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\t@click=\"saveRequetsData\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tOK</v-btn\r\n\t\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t<v-btn @click=\"close\"> Hủy</v-btn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\t\t</vue-perfect-scrollbar>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport RequestFormDataDto from \"@/models/form-data.dto\";\r\nimport ProcessDataDTO from \"@/models/process-data.dto\";\r\nimport RequestDataDto from \"@/models/request-data.dto\";\r\nimport StepDataDto from \"@/models/step-data.dto\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../../administrator/administrator.api\";\r\nimport ReqDataProcessHisDto from \"@/models/req-data-process-his.dto\";\r\n\r\nexport default {\r\n\tname: \"NewRequestGroupVue\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trequestGroup: null,\r\n\t\t\trequestGroups: [],\r\n\t\t\trequestTypes: [],\r\n\t\t\trequestType: null,\r\n\t\t\trequest: null,\r\n\t\t\tradios: null,\r\n\t\t\tradio: 0,\r\n\r\n\t\t\tlistAttachmentFlieByRequest: [],\r\n\t\t\tlistAttachmentFlieByRequestAll: [],\r\n\t\t\tuser_info: this.getUserInfo(),\r\n\t\t\tm_requestDataDto: RequestDataDto,\r\n\t\t\tprocessDataDTO: ProcessDataDTO,\r\n\t\t\tstepInProcess: [],\r\n\t\t\trequestFormDataDto: RequestFormDataDto,\r\n\t\t\tprocessData: null,\r\n\t\t\tfromData: null,\r\n\t\t\tlistProcessInfos: [],\r\n\t\t\trequestStepData: StepDataDto,\r\n\t\t\trequestProcessHis: ReqDataProcessHisDto,\r\n\t\t\tlistRequestStepData: [],\r\n\t\t\tlistUserInfos: {},\r\n\t\t};\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.initialize();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync initialize() {\r\n\t\t\tawait this.GetAllUser();\r\n\t\t\tawait this._requestGroups();\r\n\t\t},\r\n\t\tasync _requestGroups() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestGroup(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.requestGroups = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync handleRequestTypes(event) {\r\n\t\t\tthis.requestType = event;\r\n\t\t\tif (this.requestType === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.requestType.id && this.requestGroup.id) {\r\n\t\t\t\tawait this._request();\r\n\t\t\t\tawait this.getAttachmentFileRequest();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t},\r\n\t\tasync handleRequestGroup(event) {\r\n\t\t\tthis.requestGroup = event;\r\n\t\t\tif (this.requestGroup === null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tawait this._requestTypes();\r\n\t\t},\r\n\t\tasync _requestTypes() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestTypeByRequestGroupId(\r\n\t\t\t\t\t\tthis.requestGroup.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.requestTypes = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync _request() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_FindOneRequesrtByID(\r\n\t\t\t\t\t\tthis.requestType.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\tlet requests;\r\n\t\t\t\trequests = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"this.request \", this.request);\r\n\r\n\t\t\t\tif (requests.length > 0) {\r\n\t\t\t\t\tconsole.log(\"11212\");\r\n\t\t\t\t\tthis.request = requests[0];\r\n\t\t\t\t\tthis.listProcessInfos = this.request.processInfos[0];\r\n\t\t\t\t\tconsole.log(\"this.request \", this.request);\r\n\t\t\t\t\t//this.$emit(\"save\", this.request);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tclearRequestGroup() {\r\n\t\t\tthis.requestType = null;\r\n\t\t\tthis.requestTypes = [];\r\n\t\t\tthis.request = null;\r\n\t\t},\r\n\t\tclearForm() {\r\n\t\t\tthis.request = null;\r\n\t\t},\r\n\t\tasync getAttachmentFileRequest() {\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"this.request.templateForms\",\r\n\t\t\t\tthis.request.templateForms,\r\n\t\t\t);\r\n\t\t\tfor (let templateForm of this.request.templateForms) {\r\n\t\t\t\tlet response;\r\n\t\t\t\tlet response_ = [];\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllAttachmentFileByTemplateFormId(\r\n\t\t\t\t\t\ttemplateForm.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < response.data.length; i++) {\r\n\t\t\t\t\tif (response_.indexOf(response.data[i]) == -1) {\r\n\t\t\t\t\t\tresponse_.push(response.data[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"templateForm so\", response);\r\n\t\t\t\tthis.listAttachmentFlieByRequest.push(...response_);\r\n\t\t\t\tthis.listAttachmentFlieByRequestAll.push(...response_);\r\n\t\t\t}\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"this.listAttachmentFlieByRequest 1995\",\r\n\t\t\t\tthis.listAttachmentFlieByRequest,\r\n\t\t\t);\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"this.listAttachmentFlieByRequest 1995\",\r\n\t\t\t\tthis.listAttachmentFlieByRequestAll,\r\n\t\t\t);\r\n\t\t},\r\n\t\t// removeItem(index, item) {\r\n\t\t// \tthis.listAttachmentFlieByRequest[index] =\r\n\t\t// \t\tthis.listAttachmentFlieByRequest[index].filter((entry) => {\r\n\t\t// \t\t\tif (entry.id != item.id) return entry;\r\n\t\t// \t\t});\r\n\t\t// },\r\n\t\tdeselectTemplateForm(item) {\r\n\t\t\tthis.listAttachmentFlieByRequest.splice(\r\n\t\t\t\tthis.listAttachmentFlieByRequest.indexOf(item),\r\n\t\t\t\t1,\r\n\t\t\t);\r\n\t\t},\r\n\t\tasync saveRequetsData() {\r\n\t\t\tif (!this.request) return;\r\n\r\n\t\t\tlet response;\r\n\t\t\tif (this.isSaving) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tthis.m_requestDataDto.modified = { id: this.user_info.id };\r\n\t\t\t\tthis.m_requestDataDto.modifiedName = new Date();\r\n\t\t\t\tthis.m_requestDataDto.requestDataName =\r\n\t\t\t\t\tthis.request.requestName;\r\n\t\t\t\tthis.m_requestDataDto.requestDataCode =\r\n\t\t\t\t\tthis.request.requestCode;\r\n\t\t\t\tthis.m_requestDataDto.request = { id: this.request.id };\r\n\t\t\t\tthis.m_requestDataDto.created = this.user_info;\r\n\t\t\t\tthis.m_requestDataDto.createdName = this.user_info.fullName;\r\n\t\t\t\tthis.m_requestDataDto.createdDate = new Date();\r\n\t\t\t\t// lay api all status\r\n\t\t\t\tthis.m_requestDataDto.statusName = \"Đang soạn\";\r\n\t\t\t\tthis.m_requestDataDto.status = { id: 1 };\r\n\t\t\t\t//this.m_requestDataDto.userInfos = this.listUserInfo;\r\n\t\t\t\tthis.m_requestDataDto.requestGroupCode =\r\n\t\t\t\t\tthis.request.requestGroup.requestGroupCode;\r\n\t\t\t\tthis.m_requestDataDto.requestGroupName =\r\n\t\t\t\t\tthis.request.requestGroup.requestGroupName;\r\n\t\t\t\tthis.m_requestDataDto.requestTypeCode =\r\n\t\t\t\t\tthis.request.requestType.requestTypeCode;\r\n\t\t\t\tthis.m_requestDataDto.requestTypeName =\r\n\t\t\t\t\tthis.request.requestType.requestTypeName;\r\n\t\t\t\tthis.m_requestDataDto.signTypeName = this.radios;\r\n\t\t\t\tthis.m_requestDataDto.signTypeCode = this.radio;\r\n\t\t\t\tthis.m_requestDataDto.attachmentFileList =\r\n\t\t\t\t\tthis.listAttachmentFlieByRequest;\r\n\r\n\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\tadministratorAPI.API_CreateRequestData(),\r\n\t\t\t\t\tthis.m_requestDataDto,\r\n\t\t\t\t);\r\n\t\t\t\tconsole.log(\"this.requestData\", response);\r\n\r\n\t\t\t\tif (!response || !response.state)\r\n\t\t\t\t\treturn (this.isSaving = false);\r\n\r\n\t\t\t\tthis.requestData = response.data;\r\n\t\t\t\tawait this.saveProcessData();\r\n\t\t\t\tawait this.saveFormData();\r\n\t\t\t\tawait this.saveReqdataProcessHis();\r\n\t\t\t\tthis.$emit(\"close\", true);\r\n\t\t\t\tthis.toastSuccess(this.$t(\"message.add_success\"));\r\n\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: `/phieu-yeu-cau/${this.requestData.id}/chi-tiet`,\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getStepInProcesses(item) {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_FindStepInProcessesByID(item),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.stepInProcess = response.data;\r\n\t\t\t\tconsole.log(\"this.stepInProcess\", this.stepInProcess);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync saveProcessData() {\r\n\t\t\tlet response;\r\n\t\t\tfor (let processInfo of this.request.processInfos) {\r\n\t\t\t\tthis.processDataDTO.created = {\r\n\t\t\t\t\tid: processInfo.created.id,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.processDataDTO.createdDate = processInfo.createdDate;\r\n\t\t\t\tthis.processDataDTO.isActive = processInfo.isActive;\r\n\t\t\t\tthis.processDataDTO.isDelete = processInfo.isDelete;\r\n\r\n\t\t\t\tthis.processDataDTO.modified = {\r\n\t\t\t\t\tid: processInfo.modified.id,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.processDataDTO.modifiedDate = processInfo.modifiedDate;\r\n\t\t\t\tthis.processDataDTO.modifiedName = processInfo.modifiedName;\r\n\t\t\t\tthis.processDataDTO.processDataCode = processInfo.processCode;\r\n\t\t\t\tthis.processDataDTO.processDataName = processInfo.processName;\r\n\r\n\t\t\t\tthis.processDataDTO.requestData = { id: this.requestData.id };\r\n\r\n\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\tadministratorAPI.API_CreateProcessData(),\r\n\t\t\t\t\tthis.processDataDTO,\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.processData = response.data;\r\n\r\n\t\t\t\tconsole.log(\"this.processData\", this.processData);\r\n\t\t\t\tawait this.getStepInProcesses(processInfo.id);\r\n\t\t\t\tawait this.saveStepData();\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync saveProcessDataV2() {\r\n\t\t\tlet response;\r\n\t\t\tconsole.log(\"listProcessInfos\", this.listProcessInfos);\r\n\t\t\tthis.processDataDTO.created = {\r\n\t\t\t\tid: this.listProcessInfos.created.id,\r\n\t\t\t};\r\n\r\n\t\t\tthis.processDataDTO.createdDate = this.listProcessInfos.createdDate;\r\n\t\t\tthis.processDataDTO.isActive = this.listProcessInfos.isActive;\r\n\t\t\tthis.processDataDTO.isDelete = this.listProcessInfos.isDelete;\r\n\r\n\t\t\tthis.processDataDTO.modified = {\r\n\t\t\t\tid: this.listProcessInfos.modified.id,\r\n\t\t\t};\r\n\t\t\tthis.processDataDTO.modifiedDate =\r\n\t\t\t\tthis.listProcessInfos.modifiedDate;\r\n\t\t\tthis.processDataDTO.modifiedName =\r\n\t\t\t\tthis.listProcessInfos.modifiedName;\r\n\t\t\tthis.processDataDTO.processDataCode =\r\n\t\t\t\tthis.listProcessInfos.processCode;\r\n\t\t\tthis.processDataDTO.processDataName =\r\n\t\t\t\tthis.listProcessInfos.processName;\r\n\r\n\t\t\tthis.processDataDTO.requestData = { id: this.requestData.id };\r\n\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\tadministratorAPI.API_CreateProcessData(),\r\n\t\t\t\tthis.processDataDTO,\r\n\t\t\t);\r\n\t\t\tif (!response || !response.state) {\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.processData = response.data;\r\n\t\t\tconsole.log(\"this.processData 1995\", this.processData);\r\n\t\t\tawait this.getStepInProcesses(this.listProcessInfos.id);\r\n\t\t},\r\n\t\tasync saveFormData() {\r\n\t\t\tthis.requestFormDataDto.option = this.request.form.option;\r\n\t\t\tthis.requestFormDataDto.formDataCode =\r\n\t\t\t\tthis.request.form.formDataCode;\r\n\t\t\tthis.requestFormDataDto.formDateName =\r\n\t\t\t\tthis.request.form.formDateName;\r\n\t\t\tthis.requestFormDataDto.objectSchema =\r\n\t\t\t\tthis.request.form.objectSchema;\r\n\t\t\tthis.requestFormDataDto.objectModel = this.request.form.objectModel;\r\n\t\t\tthis.requestFormDataDto.createdName = this.request.form.createdName;\r\n\t\t\tthis.requestFormDataDto.createdDate = this.request.form.createdDate;\r\n\t\t\tthis.requestFormDataDto.modifiedName =\r\n\t\t\t\tthis.request.form.modifiedName;\r\n\t\t\tthis.requestFormDataDto.modifiedDate =\r\n\t\t\t\tthis.request.form.modifiedDate;\r\n\t\t\tthis.requestFormDataDto.isActive = this.request.form.isActive;\r\n\t\t\tthis.requestFormDataDto.isDelete = this.request.form.isDelete;\r\n\t\t\tthis.requestFormDataDto.tennantCode = this.request.form.tennantCode;\r\n\t\t\tthis.requestFormDataDto.tennantName = this.request.form.tennantName;\r\n\t\t\tthis.requestFormDataDto.created = {\r\n\t\t\t\tid: this.request.form.created.id,\r\n\t\t\t};\r\n\t\t\tthis.requestFormDataDto.modified = {\r\n\t\t\t\tid: this.request.form.modified.id,\r\n\t\t\t};\r\n\r\n\t\t\tthis.requestFormDataDto.requestData = {\r\n\t\t\t\tid: this.requestData.id,\r\n\t\t\t};\r\n\t\t\tthis.requestFormDataDto.form = this.request.form;\r\n\r\n\t\t\tlet response = await globalService.postData_Async(\r\n\t\t\t\tadministratorAPI.API_CreateFormData(),\r\n\t\t\t\tthis.requestFormDataDto,\r\n\t\t\t);\r\n\t\t\tif (!response || !response.state) {\r\n\t\t\t\t{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.fromData = response.data;\r\n\t\t\tconsole.log(\"this.fromData\", this.fromData);\r\n\t\t},\r\n\t\tasync saveStepData() {\r\n\t\t\tconsole.log(\"this.stepInProcess saveStepData\", this.stepInProcess);\r\n\t\t\tfor (let stepInProces of this.stepInProcess) {\r\n\t\t\t\tconsole.log(\"stepInProces: \", stepInProces);\r\n\t\t\t\tthis.requestStepData.isActive = false;\r\n\t\t\t\tthis.requestStepData.created = { id: this.user_info.id };\r\n\t\t\t\tthis.requestStepData.step = { id: stepInProces.step.id };\r\n\t\t\t\tthis.requestStepData.processData = {\r\n\t\t\t\t\tid: this.processData.id,\r\n\t\t\t\t};\r\n\t\t\t\tthis.requestStepData.requestData = {\r\n\t\t\t\t\tid: this.requestData.id,\r\n\t\t\t\t};\r\n\t\t\t\tthis.requestStepData.stepInProcess = { id: stepInProces.id };\r\n\t\t\t\t// this.requestStepData = [...stepInProces];\r\n\t\t\t\tthis.requestStepData.stepOrder = stepInProces.stepOrder;\r\n\t\t\t\tthis.requestStepData.stepDataCode =\r\n\t\t\t\t\tstepInProces.stepInProcessCode;\r\n\t\t\t\tthis.requestStepData.stepDataName =\r\n\t\t\t\t\tstepInProces.stepInProcessName;\r\n\t\t\t\tthis.requestStepData.processingTerm =\r\n\t\t\t\t\tstepInProces.processingTerm;\r\n\t\t\t\tthis.requestStepData.precessingTermTime =\r\n\t\t\t\t\tstepInProces.precessingTermTime;\r\n\t\t\t\tthis.requestStepData.isRequiredSignature =\r\n\t\t\t\t\tstepInProces.isRequiredSignature;\r\n\t\t\t\tthis.requestStepData.isBack = stepInProces.isBack;\r\n\t\t\t\tthis.requestStepData.isAuthorizedApproval =\r\n\t\t\t\t\tstepInProces.isAuthorizedApproval;\r\n\t\t\t\tthis.requestStepData.isExamine = stepInProces.isExamine;\r\n\t\t\t\tthis.requestStepData.isEdit = stepInProces.isEdit;\r\n\t\t\t\tthis.requestStepData.isRequestModify =\r\n\t\t\t\t\tstepInProces.isRequestModify;\r\n\t\t\t\tthis.requestStepData.isSendMail = stepInProces.isSendMail;\r\n\t\t\t\tthis.requestStepData.isProcessRecover =\r\n\t\t\t\t\tstepInProces.isProcessRecover;\r\n\t\t\t\tthis.requestStepData.isCreateTfsTask =\r\n\t\t\t\t\tstepInProces.isCreateTfsTask;\r\n\t\t\t\tthis.requestStepData.organizationCode =\r\n\t\t\t\t\tstepInProces.organization?.organizationCode;\r\n\t\t\t\tthis.requestStepData.organizationName =\r\n\t\t\t\t\tstepInProces.organization?.organizationName;\r\n\t\t\t\tthis.requestStepData.rankCode = stepInProces.rankCode;\r\n\t\t\t\tthis.requestStepData.rankName = stepInProces.rankName;\r\n\t\t\t\tthis.requestStepData.description = stepInProces.description;\r\n\t\t\t\tthis.requestStepData.createdName = stepInProces.createdName;\r\n\t\t\t\tthis.requestStepData.createdDate = stepInProces.createdDate;\r\n\t\t\t\tthis.requestStepData.modifiedName = stepInProces.modifiedName;\r\n\r\n\t\t\t\tthis.requestStepData.isDelete = stepInProces.isDelete;\r\n\t\t\t\tthis.requestStepData.tennantCode = stepInProces.tennantCode;\r\n\t\t\t\tthis.requestStepData.tennantName = stepInProces.tennantName;\r\n\r\n\t\t\t\tthis.requestStepData.modifiedDate = stepInProces.modifiedDate;\r\n\r\n\t\t\t\tthis.requestStepData.modified = {\r\n\t\t\t\t\tid: stepInProces.modified.id,\r\n\t\t\t\t};\r\n\t\t\t\tthis.requestStepData.userInfos =\r\n\t\t\t\t\tstepInProces.userInStepDTOs.map((entry) => {\r\n\t\t\t\t\t\treturn { id: entry.userInfo.id };\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\tlet response = await globalService.postData_Async(\r\n\t\t\t\t\tadministratorAPI.API_CreateStepData(),\r\n\t\t\t\t\tthis.requestStepData,\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.listRequestStepData = response.data;\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"this.listRequestStepData 123\",\r\n\t\t\t\t\tthis.listRequestStepData,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tthis.toastSuccess(this.$t(\"message.add_success\"));\r\n\t\t},\r\n\t\tradios1() {\r\n\t\t\tthis.radio = 0;\r\n\t\t\tconsole.log(\"this.radio\", this.radio);\r\n\t\t},\r\n\t\tradios2() {\r\n\t\t\tthis.radio = 1;\r\n\t\t\tconsole.log(\"this.radio\", this.radio);\r\n\t\t},\r\n\t\topenExit() {\r\n\t\t\tthis.$router.push({\r\n\t\t\t\tpath: `/phieu-yeu-cau/`,\r\n\t\t\t});\r\n\t\t},\r\n\t\tclose() {\r\n\t\t\tthis.$emit(\"close\", true);\r\n\t\t},\r\n\t\tasync saveReqdataProcessHis() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tthis.requestProcessHis.createDate = new Date();\r\n\t\t\t\tthis.requestProcessHis.description =\r\n\t\t\t\t\tthis.m_requestDataDto.description;\r\n\t\t\t\t(this.requestProcessHis.organizationName = null),\r\n\t\t\t\t\t(this.requestProcessHis.processDate = new Date());\r\n\t\t\t\tconsole.log(\"this.user_info\", this.user_info);\r\n\t\t\t\tthis.requestProcessHis.processer = this.user_info;\r\n\t\t\t\tthis.requestProcessHis.processerName = this.user_info.fullName;\r\n\t\t\t\tthis.requestProcessHis.rankName = null;\r\n\t\t\t\t(this.requestProcessHis.requestData = {\r\n\t\t\t\t\tid: this.requestData.id,\r\n\t\t\t\t}),\r\n\t\t\t\t\t(this.requestProcessHis.status = \"Đang soạn\"),\r\n\t\t\t\t\t(this.requestProcessHis.stepData =\r\n\t\t\t\t\t\tthis.listRequestStepData);\r\n\r\n\t\t\t\t// this.requestProcessHis.tennantCode =;\r\n\t\t\t\t// this.requestProcessHis.tennantId =;\r\n\t\t\t\t// this.requestProcessHis.tennantName =;\r\n\r\n\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\tadministratorAPI.API_CreateReqdataProcessHis(),\r\n\t\t\t\t\tthis.requestProcessHis,\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"requestProcessHis\", response.data);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync GetAllUser() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllUserInfos(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t\tlet allUser = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t\tallUser.forEach((entry) => {\r\n\t\t\t\t\tthis.$set(this.listUserInfos, entry.id, entry);\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"this.listUserInfos\", this.listUserInfos);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.v-menu__content {\r\n\tmin-width: 1094 px !important;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}