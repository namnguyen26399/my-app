{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from \"moment\";\nimport administratorAPI from \"../../administrator/administrator.api\";\nimport globalService from \"@/services/global.service\";\nexport default {\n  name: \"VSMFEFileRequestData\",\n  data: function data() {\n    var _this = this;\n\n    return {\n      items: [],\n      search: \"\",\n      singleSelect: false,\n      selected: [],\n      dateFormat: \"DD/MM/yyyy h:mm\",\n      listTemplateForm: [],\n      headers: [{\n        text: \"Tên file \",\n        value: \"attachmentFileDTOS[0].fileName\",\n        sortable: false // filter: (value) => {\n        // \tif (!this.fileName) return true;\n        // \tif (!value) return;\n        // \treturn this.nonAccentVietnamese(value)\n        // \t\t.toLocaleUpperCase()\n        // \t\t.includes(\n        // \t\t\tthis.nonAccentVietnamese(\n        // \t\t\t\tthis.fileName,\n        // \t\t\t).toLocaleUpperCase(),\n        // \t\t);\n        // },\n\n      }, {\n        text: \"Biểu mẫu\",\n        value: \"templateFormName\" // filter: (value) => {\n        // \tif (!this.templateFormName) return true;\n        // \tif (!value) return;\n        // \treturn this.nonAccentVietnamese(value)\n        // \t\t.toLocaleUpperCase()\n        // \t\t.includes(\n        // \t\t\tthis.nonAccentVietnamese(\n        // \t\t\t\tthis.templateFormName,\n        // \t\t\t).toLocaleUpperCase(),\n        // \t\t);\n        // },\n\n      }, {\n        text: \"Người cập nhật\",\n        value: \"createdName\" // filter: (value) => {\n        // \tif (!this.createdName) return true;\n        // \treturn this.nonAccentVietnamese(value)\n        // \t\t.toLocaleUpperCase()\n        // \t\t.includes(\n        // \t\t\tthis.nonAccentVietnamese(\n        // \t\t\t\tthis.createdName,\n        // \t\t\t).toLocaleUpperCase(),\n        // \t\t);\n        // },\n\n      }, {\n        text: \"Thời gian cập nhật\",\n        value: \"createdDate\",\n        formatter: function formatter(x) {\n          return x ? moment(x).format(_this.dateFormat) : null;\n        },\n        filter: function filter(value) {\n          if (!_this.createdDate) return true;\n          return value.includes(_this.createdDate);\n        }\n      }]\n    };\n  },\n  mounted: function mounted() {\n    this.getAllTemplateForm();\n  },\n  methods: {\n    close: function close() {\n      this.$emit(\"close\", true);\n    },\n    getAllTemplateForm: function getAllTemplateForm() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllTemplateForm());\n\n              case 3:\n                response = _context.sent;\n\n                // response = await globalService.getData_Async(\n                // \tadministratorAPI.API_GetAllByUserIdRequestData(\n                // \t\tthis.user_info.id,\n                // \t),\n                // );\n                if (!response || !response.state) {\n                  _this2.toastError(_this2.$t(\"error.load\"));\n                }\n\n                _this2.requestAll = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _this2.listTemplateForm = Object.assign([], _this2.requestAll);\n                console.log(\"this.listTemplateForm\", _this2.listTemplateForm);\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n\n                _this2.toastError(_context.t0);\n\n                return _context.abrupt(\"return\");\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 10]]);\n      }))();\n    },\n    Save: function Save() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this3.$emit(\"save\", _this3.selected);\n\n              case 2:\n                _context2.next = 4;\n                return _this3.$emit(\"close\", true);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    } // customFilter(value, search, item) {\n    // \treturn (\n    // \t\t!!search && this.match(item, search.trim().replace(/\\s+/g, \" \"))\n    // \t);\n    // },\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AAEA;EACAA,4BADA;EAGAC,IAHA,kBAGA;IAAA;;IACA;MACAC,SADA;MAEAC,UAFA;MAGAC,mBAHA;MAIAC,YAJA;MAKAC,6BALA;MAMAC,oBANA;MAOAC,UACA;QACAC,iBADA;QAEAC,uCAFA;QAGAC,eAHA,CAKA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;MAfA,CADA,EAkBA;QACAF,gBADA;QAEAC,yBAFA,CAIA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;MAdA,CAlBA,EAmCA;QACAD,sBADA;QAEAC,oBAFA,CAIA;QACA;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;MAdA,CAnCA,EAoDA;QACAD,0BADA;QAEAC,oBAFA;QAIAE;UAAA,OACAC,6CADA;QAAA,CAJA;QAMAC;UACA;UACA;QACA;MATA,CApDA;IAPA;EAwEA,CA5EA;EA8EAC,OA9EA,qBA8EA;IACA;EACA,CAhFA;EAkFAC;IACAC,KADA,mBACA;MACA;IACA,CAHA;IAIAC,kBAJA,gCAIA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGAC,4BACAC,yCADA,CAHA;;cAAA;gBAGAC,QAHA;;gBAOA;gBACA;gBACA;gBACA;gBACA;gBAEA;kBACA;gBACA;;gBAEA;kBACA;gBACA,CAFA;gBAGA;gBACAC;gBArBA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAuBA;;gBAvBA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA0BA,CA9BA;IA+BAC,IA/BA,kBA+BA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,qCADA;;cAAA;gBAAA;gBAAA,OAEA,2BAFA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA,CAlCA,CAmCA;IACA;IACA;IACA;IACA;;EAvCA;AAlFA","names":["name","data","items","search","singleSelect","selected","dateFormat","listTemplateForm","headers","text","value","sortable","formatter","x","filter","mounted","methods","close","getAllTemplateForm","globalService","administratorAPI","response","console","Save"],"sourceRoot":"src/views/modules/khai-phieu-yeu-cau/RequestForm","sources":["FileRequestData.vue"],"sourcesContent":["<template>\r\n\t<v-card v-if=\"listTemplateForm\" class=\"overflow-hidden\">\r\n\t\t<v-data-table\r\n\t\t\tv-model=\"selected\"\r\n\t\t\t:headers=\"headers\"\r\n\t\t\t:items=\"listTemplateForm\"\r\n\t\t\t:single-select=\"singleSelect\"\r\n\t\t\titem-key=\"id\"\r\n\t\t\tshow-select\r\n\t\t\t:search=\"search\"\r\n\t\t\tloading=\"true\"\r\n\t\t\t:loading-text=\"$t('label.loading')\"\r\n\t\t>\r\n\t\t\t<template v-slot:top>\r\n\t\t\t\t<div class=\"flex items-center\">\r\n\t\t\t\t\t<v-card-title> Lựa chọn biểu mẫu </v-card-title>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tclass=\"mb-2 rounded-pill mr-2\"\r\n\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<v-icon>mdi-cloud-upload-outline </v-icon\r\n\t\t\t\t\t\t>{{ $t(\"title.upload_file\") }}</v-btn\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\t\tappend-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tclass=\"mt-4 rounded-pill\"\r\n\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t<v-btn icon @click=\"filterExist = !filterExist\">\r\n\t\t\t\t\t\t<v-icon>mdi-filter </v-icon>\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.createdName`]=\"{ item }\">\r\n\t\t\t\t<template>\r\n\t\t\t\t\t<v-avatar color=\"indigo mr-2\" size=\"28\">\r\n\t\t\t\t\t\t<span class=\"white--text\">\r\n\t\t\t\t\t\t\t{{ getAvatarText(item.createdName, 2) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</v-avatar>\r\n\t\t\t\t\t{{ item.createdName }}\r\n\t\t\t\t</template>\r\n\t\t\t</template>\r\n\t\t\t<!-- <template v-slot:[`body.prepend`]>\r\n\t\t\t\t<v-divider></v-divider>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td></td>\r\n\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"statusName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Bộ phận\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</template> -->\r\n\t\t\t<!-- <template v-slot:[`item.actions`]=\"{ item }\">\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\ticon\r\n\t\t\t\t\tclass=\"mr-2\"\r\n\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t:to=\"{ path: `/phieu-yeu-cau/${item.id}/chi-tiet` }\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-icon> mdi-pencil </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn icon color=\"red\" @click=\"deleteItem(item)\">\r\n\t\t\t\t\t<v-icon> mdi-trash-can-outline </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</template> -->\r\n\t\t\t<template\r\n\t\t\t\tv-for=\"header in headers.filter((header) =>\r\n\t\t\t\t\theader.hasOwnProperty('formatter'),\r\n\t\t\t\t)\"\r\n\t\t\t\tv-slot:[`item.${header.value}`]=\"{ headers, value }\"\r\n\t\t\t>\r\n\t\t\t\t{{ header.formatter(value) }}\r\n\t\t\t</template>\r\n\t\t\t<!-- <template v-slot:[`item.isActive`]=\"{ item }\">\r\n\t\t\t\t<v-simple-checkbox\r\n\t\t\t\t\tv-model=\"item.isActive\"\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t></v-simple-checkbox>\r\n\t\t\t</template> -->\r\n\t\t\t<template v-slot:no-data>\r\n\t\t\t\t<h3>{{ $t(\"message.no_data\") }}</h3>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t\t<v-divider></v-divider>\r\n\t\t<v-row class=\"mt-4\">\r\n\t\t\t<v-col cols=\"12\" md=\"12\" class=\"px-10\">\r\n\t\t\t\t<!-- <div class=\"float-right\">\r\n\t\t\t\t\t<v-btn color=\"primary\" class=\"mx-5 my-0\" @click=\"Save\">\r\n\t\t\t\t\t\tOK</v-btn\r\n\t\t\t\t\t>\r\n\r\n\t\t\t\t\t<v-btn @click=\"close\"> Hủy</v-btn>\r\n\t\t\t\t</div> -->\r\n\t\t\t\t<div class=\"float-right\">\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t\tclass=\"rounded-0 mr-2\"\r\n\t\t\t\t\t\t@click=\"Save\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ $t(\"button.ok\") }}</v-btn\r\n\t\t\t\t\t>\r\n\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t\t@click=\"close\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ $t(\"button.cancel\") }}</v-btn\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\nimport administratorAPI from \"../../administrator/administrator.api\";\r\nimport globalService from \"@/services/global.service\";\r\n\r\nexport default {\r\n\tname: \"VSMFEFileRequestData\",\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\titems: [],\r\n\t\t\tsearch: \"\",\r\n\t\t\tsingleSelect: false,\r\n\t\t\tselected: [],\r\n\t\t\tdateFormat: \"DD/MM/yyyy h:mm\",\r\n\t\t\tlistTemplateForm: [],\r\n\t\t\theaders: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Tên file \",\r\n\t\t\t\t\tvalue: \"attachmentFileDTOS[0].fileName\",\r\n\t\t\t\t\tsortable: false,\r\n\r\n\t\t\t\t\t// filter: (value) => {\r\n\t\t\t\t\t// \tif (!this.fileName) return true;\r\n\t\t\t\t\t// \tif (!value) return;\r\n\t\t\t\t\t// \treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t// \t\t.toLocaleUpperCase()\r\n\t\t\t\t\t// \t\t.includes(\r\n\t\t\t\t\t// \t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t// \t\t\t\tthis.fileName,\r\n\t\t\t\t\t// \t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t// \t\t);\r\n\t\t\t\t\t// },\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Biểu mẫu\",\r\n\t\t\t\t\tvalue: \"templateFormName\",\r\n\r\n\t\t\t\t\t// filter: (value) => {\r\n\t\t\t\t\t// \tif (!this.templateFormName) return true;\r\n\t\t\t\t\t// \tif (!value) return;\r\n\t\t\t\t\t// \treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t// \t\t.toLocaleUpperCase()\r\n\t\t\t\t\t// \t\t.includes(\r\n\t\t\t\t\t// \t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t// \t\t\t\tthis.templateFormName,\r\n\t\t\t\t\t// \t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t// \t\t);\r\n\t\t\t\t\t// },\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Người cập nhật\",\r\n\t\t\t\t\tvalue: \"createdName\",\r\n\r\n\t\t\t\t\t// filter: (value) => {\r\n\t\t\t\t\t// \tif (!this.createdName) return true;\r\n\r\n\t\t\t\t\t// \treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t// \t\t.toLocaleUpperCase()\r\n\t\t\t\t\t// \t\t.includes(\r\n\t\t\t\t\t// \t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t// \t\t\t\tthis.createdName,\r\n\t\t\t\t\t// \t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t// \t\t);\r\n\t\t\t\t\t// },\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Thời gian cập nhật\",\r\n\t\t\t\t\tvalue: \"createdDate\",\r\n\r\n\t\t\t\t\tformatter: (x) =>\r\n\t\t\t\t\t\tx ? moment(x).format(this.dateFormat) : null,\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.createdDate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.createdDate);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.getAllTemplateForm();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tclose() {\r\n\t\t\tthis.$emit(\"close\", true);\r\n\t\t},\r\n\t\tasync getAllTemplateForm() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllTemplateForm(),\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// response = await globalService.getData_Async(\r\n\t\t\t\t// \tadministratorAPI.API_GetAllByUserIdRequestData(\r\n\t\t\t\t// \t\tthis.user_info.id,\r\n\t\t\t\t// \t),\r\n\t\t\t\t// );\r\n\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.requestAll = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.listTemplateForm = Object.assign([], this.requestAll);\r\n\t\t\t\tconsole.log(\"this.listTemplateForm\", this.listTemplateForm);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync Save() {\r\n\t\t\tawait this.$emit(\"save\", this.selected);\r\n\t\t\tawait this.$emit(\"close\", true);\r\n\t\t},\r\n\t\t// customFilter(value, search, item) {\r\n\t\t// \treturn (\r\n\t\t// \t\t!!search && this.match(item, search.trim().replace(/\\s+/g, \" \"))\r\n\t\t// \t);\r\n\t\t// },\r\n\t},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"]},"metadata":{},"sourceType":"module"}