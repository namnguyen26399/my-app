{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.string.search.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport moment from \"moment\";\nimport constant from \"@/common/constant.js\";\nimport administratorAPI from \"../administrator.api\";\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nexport default {\n  name: \"ListRequest\",\n  components: {\n    DeleteDialogVue: DeleteDialogVue,\n    BreadcrumbsVue: BreadcrumbsVue\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      errorMessageSearchRequestCode: \"\",\n      errorMessageSearchRequestName: \"\",\n      errorMessageSearchCreatedDate: \"\",\n      errorMessageSearchAll: \"\",\n      user_current: this.getUserInfo(),\n      requestCode: \"\",\n      requestName: \"\",\n      createdName: \"\",\n      createdDate: null,\n      modifiedDate: null,\n      dateFormat: \"DD/MM/yyyy\",\n      isActive: this.$t(\"label.show_all\"),\n      singleSelect: false,\n      showPicker: false,\n      showModifyDatePicker: false,\n      selected: [],\n      dialog: {\n        view: false,\n        edit: false,\n        delete: false\n      },\n      updateItem: {},\n      filterItems: [this.$t(\"label.show_all\"), this.$t(\"label.used\"), this.$t(\"label.unused\")],\n      items: [],\n      search: \"\",\n      isDeleting: false,\n      isSaving: false,\n      headers: [{\n        text: this.$t(\"label.request_code\"),\n        value: \"requestCode\",\n        filter: function filter(value) {\n          if (!_this.requestCode || !value) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.requestCode).trim().toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.request_name\"),\n        value: \"requestName\",\n        filter: function filter(value) {\n          if (!_this.requestName || !value) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.requestName).trim().toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.created_name\"),\n        value: \"createdName\",\n        filter: function filter(value) {\n          if (!_this.createdName || !value) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.createdName).trim().toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.created_date\"),\n        value: \"createdDate\",\n        formatter: function formatter(x) {\n          return x ? moment(x).format(_this.dateFormat) : null;\n        },\n        filter: function filter(value) {\n          if (!_this.createdDate) return true;\n          return value.includes(_this.createdDate);\n        }\n      }, {\n        text: this.$t(\"label.modified_date\"),\n        value: \"modifiedDate\",\n        formatter: function formatter(x) {\n          return x ? moment(x).format(_this.dateFormat) : null;\n        },\n        filter: function filter(value) {\n          if (!_this.modifiedDate) return true;\n          return value.includes(_this.modifiedDate);\n        }\n      }, {\n        text: this.$t(\"label.is_active\"),\n        value: \"isActive\",\n        filter: function filter(value) {\n          if (_this.isActive == _this.$t(\"label.used\")) {\n            return value == true;\n          }\n\n          if (_this.isActive == _this.$t(\"label.unused\")) {\n            return value == false;\n          }\n\n          return true;\n        }\n      }, {\n        text: this.$t(\"label.manipulation\"),\n        value: \"actions\",\n        sortable: false\n      }],\n      requests: [],\n      errorMessageSearchCreatedName: \"\"\n    };\n  },\n  watch: {\n    dialog: function dialog(val) {\n      val || this.close();\n    },\n    dialogDelete: function dialogDelete(val) {\n      val || this.closeDelete();\n    },\n    dialogView: function dialogView(val) {\n      val || this.closeView();\n    },\n    dialogDeleteAll: function dialogDeleteAll(val) {\n      val || this.closeDeleteAll();\n    }\n  },\n  computed: {\n    formatDateFns: function formatDateFns() {\n      return this.createdDate ? moment(this.createdDate).format(this.dateFormat) : \"\";\n    },\n    formatModifyDateFns: function formatModifyDateFns() {\n      return this.modifiedDate ? moment(this.modifiedDate).format(this.dateFormat) : \"\";\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this2.$Progress.start();\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this3.$Progress.finish();\n\n              _context2.next = 3;\n              return _this3.initialize();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  methods: {\n    initialize: function initialize() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequest());\n\n              case 3:\n                response = _context3.sent;\n\n                if (response) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 6:\n                if (response.state) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 8:\n                _this4.requests = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n                _this4.sortList(_this4.requests);\n\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                _this4.toastError(_context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 12]]);\n      }))();\n    },\n    deleteItem: function deleteItem(item) {\n      this.selected = [item];\n      this.dialog.delete = true;\n    },\n    deleteItemConfirm: function deleteItemConfirm() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response, _iterator, _step, item, index;\n\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this5.selected = _this5.selected.map(function (entry) {\n                  entry.isDelete = true;\n                  return entry;\n                });\n                _context4.prev = 1;\n                _context4.next = 4;\n                return globalService.postData_Async(administratorAPI.API_SaveAllRequest(), _this5.selected);\n\n              case 4:\n                response = _context4.sent;\n\n                if (!response || !response.state) {\n                  _this5.toastError(_this5.$t(\"message.error\"));\n                }\n\n                _iterator = _createForOfIteratorHelper(_this5.selected);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    item = _step.value;\n                    index = _this5.requests.indexOf(item);\n\n                    _this5.requests.splice(index, 1);\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                _this5.selected = [];\n\n                _this5.toastSuccess(_this5.$t(\"message.success\"));\n\n                _this5.closeDelete();\n\n                _context4.next = 16;\n                break;\n\n              case 13:\n                _context4.prev = 13;\n                _context4.t0 = _context4[\"catch\"](1);\n\n                _this5.toastError(_context4.t0);\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[1, 13]]);\n      }))();\n    },\n    closeDelete: function closeDelete() {\n      this.dialog.delete = false;\n    },\n    closeDeleteAll: function closeDeleteAll() {\n      this.dialog.delete = false;\n    },\n    customFilter: function customFilter(value, search, item) {\n      return !!search && this.match(item, search);\n    },\n    sortList: function sortList(arr) {\n      return arr.sort(function (a, b) {\n        return moment(b.createdDate).toDate().getTime() - moment(a.createdDate).toDate().getTime();\n      });\n    },\n    deleteAll: function deleteAll() {\n      if (this.selected.length > 0) {\n        this.dialog.delete = true;\n      } else {\n        this.toastError(this.$t(\"message.alert_no_selected\"));\n      }\n    },\n    onKeyUpSearchForRequestCode: function onKeyUpSearchForRequestCode() {\n      if (this.requestCode != \"\" || this.requestCode.length < 255) {\n        this.errorMessageSearchRequestCode = \"\";\n      }\n\n      if (this.requestCode.length > 255) {\n        this.errorMessageSearchRequestCode = this.$t(\"message.maxlength_required_255\");\n      }\n    },\n    onKeyUpSearchForRequestName: function onKeyUpSearchForRequestName() {\n      if (this.requestName != \"\" || this.requestName.length < 255) {\n        this.errorMessageSearchRequestName = \"\";\n      }\n\n      if (this.requestName.length > 255) {\n        this.errorMessageSearchRequestName = this.$t(\"message.maxlength_required_255\");\n      }\n    },\n    onKeyUpSearchForCreatedName: function onKeyUpSearchForCreatedName() {\n      if (this.createdName != \"\" || this.createdName.length < 255) {\n        this.errorMessageSearchCreatedName = \"\";\n      }\n\n      if (this.createdName.length > 255) {\n        this.errorMessageSearchCreatedName = this.$t(\"message.maxlength_required_255\");\n      }\n    },\n    onKeyUpForSearchAll: function onKeyUpForSearchAll() {\n      if (this.search != \"\" || this.search.length < 255) {\n        this.errorMessageSearchAll = \"\";\n      }\n\n      if (this.search.length > 255) {\n        this.errorMessageSearchAll = this.$t(\"message.maxlength_required_255\");\n      }\n    },\n    deleteAllConfirm: function deleteAllConfirm() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!_this6.isDeleting) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 2:\n                _this6.isDeleting = true;\n                _this6.selected = _this6.selected.map(function (entry) {\n                  entry.isDelete = true;\n                  return entry;\n                });\n                _context5.next = 6;\n                return globalService.postData_Async(\"/api/_save/requests/\", _this6.selected);\n\n              case 6:\n                response = _context5.sent;\n\n                if (response.state) {\n                  _this6.isDeleting = true;\n\n                  _this6.toastSuccess(_this6.$t(\"success.delete\"));\n                } else {\n                  _this6.toastError(_this6.$t(\"message.error\"));\n                }\n\n                _this6.selected = [];\n                _this6.isDeleting = false;\n\n                _this6.closeDeleteAll();\n\n                _this6.initialize();\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    onConfirmDelete: function onConfirmDelete(value) {\n      if (!value) {\n        this.onCloseDialog();\n      } else {\n        if (this.selected) {\n          this.deleteAllConfirm();\n        }\n      }\n    }\n  },\n  filters: constant.filters\n};","map":{"version":3,"mappings":"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","names":["name","components","DeleteDialogVue","BreadcrumbsVue","data","errorMessageSearchRequestCode","errorMessageSearchRequestName","errorMessageSearchCreatedDate","errorMessageSearchAll","user_current","requestCode","requestName","createdName","createdDate","modifiedDate","dateFormat","isActive","singleSelect","showPicker","showModifyDatePicker","selected","dialog","view","edit","delete","updateItem","filterItems","items","search","isDeleting","isSaving","headers","text","value","filter","toLocaleUpperCase","includes","trim","formatter","x","sortable","requests","errorMessageSearchCreatedName","watch","val","dialogDelete","dialogView","dialogDeleteAll","computed","formatDateFns","moment","formatModifyDateFns","created","mounted","methods","initialize","globalService","administratorAPI","response","deleteItem","item","deleteItemConfirm","entry","index","closeDelete","closeDeleteAll","customFilter","sortList","arr","deleteAll","onKeyUpSearchForRequestCode","onKeyUpSearchForRequestName","onKeyUpSearchForCreatedName","onKeyUpForSearchAll","deleteAllConfirm","onConfirmDelete","filters"],"sourceRoot":"src/views/modules/administrator/Request","sources":["ListRequest.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<BreadcrumbsVue />\r\n\t\t<v-dialog v-model=\"dialog.delete\" persistent width=\"fit-content\">\r\n\t\t\t<DeleteDialogVue\r\n\t\t\t\t@close=\"onCloseDialog\"\r\n\t\t\t\t@confirmDelete=\"onConfirmDelete\"\r\n\t\t\t/>\r\n\t\t</v-dialog>\r\n\t\t<v-data-table\r\n\t\t\tv-model=\"selected\"\r\n\t\t\t:headers=\"headers\"\r\n\t\t\t:items=\"requests\"\r\n\t\t\t:single-select=\"singleSelect\"\r\n\t\t\titem-key=\"id\"\r\n\t\t\tshow-select\r\n\t\t\t:search=\"search\"\r\n\t\t\t:custom-filter=\"customFilter\"\r\n\t\t\tloading=\"true\"\r\n\t\t\t:loading-text=\"$t('label.loading')\"\r\n\t\t>\r\n\t\t\t<template v-slot:top>\r\n\t\t\t\t<v-card-title class=\"p-0 w-full\">\r\n\t\t\t\t\t<router-link\r\n\t\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\t\tpath: '/administrator/loai-yeu-cau/tao-moi',\r\n\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\tstyle=\"text-decoration: none; margin-right: 1rem\"\r\n\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t\ttext\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\tclass=\"rounded-pill mb-4\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-icon color=\"white\"> mdi-plus-circle </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.create\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</router-link>\r\n\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\tcolor=\"error\"\r\n\t\t\t\t\t\tclass=\"rounded-pill mb-4\"\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t@click=\"deleteAll\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<v-icon color=\"white\"> mdi-trash-can-outline </v-icon>\r\n\t\t\t\t\t\t{{ $t(\"button.delete_all\") }}\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<!-- <v-text-field\r\n\t\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\t\tappend-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t:label=\"$t('title.search')\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t\tclass=\"mt-2 mx-4\"\r\n\t\t\t\t\t\t@keyup=\"onKeyUpForSearchAll\"\r\n\t\t\t\t\t\t:error-messages=\"errorMessageSearchAll\"\r\n\t\t\t\t\t></v-text-field> -->\r\n\t\t\t\t</v-card-title>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template v-slot:[`body.prepend`]>\r\n\t\t\t\t<v-divider></v-divider>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"requestCode\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.request_code')\"\r\n\t\t\t\t\t\t\t@keyup=\"onKeyUpSearchForRequestCode\"\r\n\t\t\t\t\t\t\t:error-messages=\"errorMessageSearchRequestCode\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"requestName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.request_name')\"\r\n\t\t\t\t\t\t\t@keyup=\"onKeyUpSearchForRequestName\"\r\n\t\t\t\t\t\t\t:error-messages=\"errorMessageSearchRequestName\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"createdName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.created_name')\"\r\n\t\t\t\t\t\t\t@keyup=\"onKeyUpSearchForCreatedName\"\r\n\t\t\t\t\t\t\t:error-messages=\"errorMessageSearchCreatedName\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-menu\r\n\t\t\t\t\t\t\tv-model=\"showPicker\"\r\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\r\n\t\t\t\t\t\t\tmax-width=\"290\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t:value=\"formatDateFns\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.created_date')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\t\t@click:clear=\"createdDate = null\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t\t\tv-model=\"createdDate\"\r\n\t\t\t\t\t\t\t\t@change=\"showPicker = false\"\r\n\t\t\t\t\t\t\t\tno-title\r\n\t\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\t\trange\r\n\t\t\t\t\t\t\t></v-date-picker>\r\n\t\t\t\t\t\t</v-menu>\r\n\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-menu\r\n\t\t\t\t\t\t\tv-model=\"showModifyDatePicker\"\r\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\r\n\t\t\t\t\t\t\tmax-width=\"290\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t:value=\"formatModifyDateFns\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.modified_date')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\t\t@click:clear=\"modifiedDate = null\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t\t\tv-model=\"modifiedDate\"\r\n\t\t\t\t\t\t\t\t@change=\"showModifyDatePicker = false\"\r\n\t\t\t\t\t\t\t\tno-title\r\n\t\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\t\trange\r\n\t\t\t\t\t\t\t></v-date-picker>\r\n\t\t\t\t\t\t</v-menu>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-select\r\n\t\t\t\t\t\t\tv-model=\"isActive\"\r\n\t\t\t\t\t\t\t:items=\"filterItems\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.is_active')\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t></v-select>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template v-slot:[`item.actions`]=\"{ item }\">\r\n\t\t\t\t<!-- <v-btn\r\n\t\t\t\t\ticon\r\n\t\t\t\t\tclass=\"mr-2\"\r\n\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t:to=\"{ path: `loai-yeu-cau/view/${item.id}` }\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-icon small> mdi-eye </v-icon>\r\n\t\t\t\t</v-btn> -->\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\ticon\r\n\t\t\t\t\tclass=\"mr-2\"\r\n\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t:to=\"{ path: `${item.id}` }\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-icon small> mdi-pencil </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn icon color=\"red\" @click=\"deleteItem(item)\">\r\n\t\t\t\t\t<v-icon small> mdi-trash-can-outline </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</template>\r\n\t\t\t<template\r\n\t\t\t\tv-for=\"header in headers.filter((header) =>\r\n\t\t\t\t\theader.hasOwnProperty('formatter'),\r\n\t\t\t\t)\"\r\n\t\t\t\tv-slot:[`item.${header.value}`]=\"{ headers, value }\"\r\n\t\t\t>\r\n\t\t\t\t{{ header.formatter(value) }}\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.isActive`]=\"{ item }\">\r\n\t\t\t\t<v-simple-checkbox\r\n\t\t\t\t\tv-model=\"item.isActive\"\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t></v-simple-checkbox>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t</v-card>\r\n</template>\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport moment from \"moment\";\r\nimport constant from \"@/common/constant.js\";\r\nimport administratorAPI from \"../administrator.api\";\r\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\r\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\r\nexport default {\r\n\tname: \"ListRequest\",\r\n\tcomponents: { DeleteDialogVue, BreadcrumbsVue },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\terrorMessageSearchRequestCode: \"\",\r\n\t\t\terrorMessageSearchRequestName: \"\",\r\n\t\t\terrorMessageSearchCreatedDate: \"\",\r\n\t\t\terrorMessageSearchAll: \"\",\r\n\t\t\tuser_current: this.getUserInfo(),\r\n\t\t\trequestCode: \"\",\r\n\t\t\trequestName: \"\",\r\n\t\t\tcreatedName: \"\",\r\n\t\t\tcreatedDate: null,\r\n\t\t\tmodifiedDate: null,\r\n\t\t\tdateFormat: \"DD/MM/yyyy\",\r\n\t\t\tisActive: this.$t(\"label.show_all\"),\r\n\t\t\tsingleSelect: false,\r\n\t\t\tshowPicker: false,\r\n\t\t\tshowModifyDatePicker: false,\r\n\t\t\tselected: [],\r\n\t\t\tdialog: {\r\n\t\t\t\tview: false,\r\n\t\t\t\tedit: false,\r\n\t\t\t\tdelete: false,\r\n\t\t\t},\r\n\t\t\tupdateItem: {},\r\n\t\t\tfilterItems: [\r\n\t\t\t\tthis.$t(\"label.show_all\"),\r\n\t\t\t\tthis.$t(\"label.used\"),\r\n\t\t\t\tthis.$t(\"label.unused\"),\r\n\t\t\t],\r\n\t\t\titems: [],\r\n\t\t\tsearch: \"\",\r\n\t\t\tisDeleting: false,\r\n\t\t\tisSaving: false,\r\n\t\t\theaders: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.request_code\"),\r\n\t\t\t\t\tvalue: \"requestCode\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.requestCode || !value) return true;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(this.requestCode)\r\n\t\t\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t\t\t.toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.request_name\"),\r\n\t\t\t\t\tvalue: \"requestName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.requestName || !value) return true;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(this.requestName)\r\n\t\t\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t\t\t.toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.created_name\"),\r\n\t\t\t\t\tvalue: \"createdName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.createdName || !value) return true;\r\n\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(this.createdName)\r\n\t\t\t\t\t\t\t\t\t.trim()\r\n\t\t\t\t\t\t\t\t\t.toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.created_date\"),\r\n\t\t\t\t\tvalue: \"createdDate\",\r\n\r\n\t\t\t\t\tformatter: (x) =>\r\n\t\t\t\t\t\tx ? moment(x).format(this.dateFormat) : null,\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.createdDate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.createdDate);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.modified_date\"),\r\n\t\t\t\t\tvalue: \"modifiedDate\",\r\n\r\n\t\t\t\t\tformatter: (x) =>\r\n\t\t\t\t\t\tx ? moment(x).format(this.dateFormat) : null,\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.modifiedDate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.modifiedDate);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.is_active\"),\r\n\t\t\t\t\tvalue: \"isActive\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.used\")) {\r\n\t\t\t\t\t\t\treturn value == true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.unused\")) {\r\n\t\t\t\t\t\t\treturn value == false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.manipulation\"),\r\n\r\n\t\t\t\t\tvalue: \"actions\",\r\n\t\t\t\t\tsortable: false,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\trequests: [],\r\n\t\t\terrorMessageSearchCreatedName: \"\",\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tdialog(val) {\r\n\t\t\tval || this.close();\r\n\t\t},\r\n\t\tdialogDelete(val) {\r\n\t\t\tval || this.closeDelete();\r\n\t\t},\r\n\t\tdialogView(val) {\r\n\t\t\tval || this.closeView();\r\n\t\t},\r\n\t\tdialogDeleteAll(val) {\r\n\t\t\tval || this.closeDeleteAll();\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tformatDateFns() {\r\n\t\t\treturn this.createdDate\r\n\t\t\t\t? moment(this.createdDate).format(this.dateFormat)\r\n\t\t\t\t: \"\";\r\n\t\t},\r\n\t\tformatModifyDateFns() {\r\n\t\t\treturn this.modifiedDate\r\n\t\t\t\t? moment(this.modifiedDate).format(this.dateFormat)\r\n\t\t\t\t: \"\";\r\n\t\t},\r\n\t},\r\n\r\n\tasync created() {\r\n\t\tthis.$Progress.start();\r\n\t},\r\n\tasync mounted() {\r\n\t\tthis.$Progress.finish();\r\n\t\tawait this.initialize();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync initialize() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequest(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.requests = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.sortList(this.requests);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdeleteItem(item) {\r\n\t\t\tthis.selected = [item];\r\n\t\t\tthis.dialog.delete = true;\r\n\t\t},\r\n\r\n\t\tasync deleteItemConfirm() {\r\n\t\t\tthis.selected = this.selected.map((entry) => {\r\n\t\t\t\tentry.isDelete = true;\r\n\t\t\t\treturn entry;\r\n\t\t\t});\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\tadministratorAPI.API_SaveAllRequest(),\r\n\t\t\t\t\tthis.selected,\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\tthis.toastError(this.$t(\"message.error\"));\r\n\t\t\t\t}\r\n\t\t\t\tfor (let item of this.selected) {\r\n\t\t\t\t\tlet index = this.requests.indexOf(item);\r\n\t\t\t\t\tthis.requests.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t\tthis.selected = [];\r\n\t\t\t\tthis.toastSuccess(this.$t(\"message.success\"));\r\n\t\t\t\tthis.closeDelete();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloseDelete() {\r\n\t\t\tthis.dialog.delete = false;\r\n\t\t},\r\n\t\tcloseDeleteAll() {\r\n\t\t\tthis.dialog.delete = false;\r\n\t\t},\r\n\r\n\t\tcustomFilter(value, search, item) {\r\n\t\t\treturn !!search && this.match(item, search);\r\n\t\t},\r\n\t\tsortList(arr) {\r\n\t\t\treturn arr.sort((a, b) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tmoment(b.createdDate).toDate().getTime() -\r\n\t\t\t\t\tmoment(a.createdDate).toDate().getTime()\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\tdeleteAll() {\r\n\t\t\tif (this.selected.length > 0) {\r\n\t\t\t\tthis.dialog.delete = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"message.alert_no_selected\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyUpSearchForRequestCode() {\r\n\t\t\tif (this.requestCode != \"\" || this.requestCode.length < 255) {\r\n\t\t\t\tthis.errorMessageSearchRequestCode = \"\";\r\n\t\t\t}\r\n\t\t\tif (this.requestCode.length > 255) {\r\n\t\t\t\tthis.errorMessageSearchRequestCode = this.$t(\r\n\t\t\t\t\t\"message.maxlength_required_255\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyUpSearchForRequestName() {\r\n\t\t\tif (this.requestName != \"\" || this.requestName.length < 255) {\r\n\t\t\t\tthis.errorMessageSearchRequestName = \"\";\r\n\t\t\t}\r\n\t\t\tif (this.requestName.length > 255) {\r\n\t\t\t\tthis.errorMessageSearchRequestName = this.$t(\r\n\t\t\t\t\t\"message.maxlength_required_255\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyUpSearchForCreatedName() {\r\n\t\t\tif (this.createdName != \"\" || this.createdName.length < 255) {\r\n\t\t\t\tthis.errorMessageSearchCreatedName = \"\";\r\n\t\t\t}\r\n\t\t\tif (this.createdName.length > 255) {\r\n\t\t\t\tthis.errorMessageSearchCreatedName = this.$t(\r\n\t\t\t\t\t\"message.maxlength_required_255\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonKeyUpForSearchAll() {\r\n\t\t\tif (this.search != \"\" || this.search.length < 255) {\r\n\t\t\t\tthis.errorMessageSearchAll = \"\";\r\n\t\t\t}\r\n\t\t\tif (this.search.length > 255) {\r\n\t\t\t\tthis.errorMessageSearchAll = this.$t(\r\n\t\t\t\t\t\"message.maxlength_required_255\",\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync deleteAllConfirm() {\r\n\t\t\tif (this.isDeleting) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isDeleting = true;\r\n\t\t\tthis.selected = this.selected.map((entry) => {\r\n\t\t\t\tentry.isDelete = true;\r\n\t\t\t\treturn entry;\r\n\t\t\t});\r\n\t\t\tlet response = await globalService.postData_Async(\r\n\t\t\t\t\"/api/_save/requests/\",\r\n\t\t\t\tthis.selected,\r\n\t\t\t);\r\n\t\t\tif (response.state) {\r\n\t\t\t\tthis.isDeleting = true;\r\n\t\t\t\tthis.toastSuccess(this.$t(\"success.delete\"));\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"message.error\"));\r\n\t\t\t}\r\n\r\n\t\t\tthis.selected = [];\r\n\t\t\tthis.isDeleting = false;\r\n\t\t\tthis.closeDeleteAll();\r\n\t\t\tthis.initialize();\r\n\t\t},\r\n\t\tonConfirmDelete(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tthis.onCloseDialog();\r\n\t\t\t} else {\r\n\t\t\t\tif (this.selected) {\r\n\t\t\t\t\tthis.deleteAllConfirm();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\r\n\tfilters: constant.filters,\r\n};\r\n</script>\r\n<style>\r\n.v-picker__title__btn--active {\r\n\tdisplay: none;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}