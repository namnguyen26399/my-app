{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nexport default {\n  name: \"EditFolderVue\",\n  props: {\n    item: {},\n    parent: {}\n  },\n  data: function data() {\n    return {\n      m_item: {\n        contentType: \"\",\n        fileBase64: \"\",\n        fileName: \"\",\n        isFolder: 1,\n        needEncrypt: true,\n        parentId: 0,\n        createdId: this.getUserInfo().id\n      },\n      m_parent: {}\n    };\n  },\n  watch: {\n    item: function item(value) {\n      this.$refs.form.reset();\n      this.m_item = Object.assign({}, value);\n    },\n    parent: function parent(value) {\n      this.m_parent = value;\n    }\n  },\n  created: function created() {},\n  mounted: function mounted() {\n    this.$refs.form.reset();\n    this.initialize();\n  },\n  computed: {},\n  methods: {\n    initialize: function initialize() {\n      this.m_item = this.item;\n      this.m_parent = this.parent;\n    },\n    save: function save() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(!_this.m_parent || !_this.m_parent.id)) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this.toastError(_this.$t(\"error.missing_information\")));\n\n              case 2:\n                if (_this.validRequiredText(_this.m_item.fileName)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 4:\n                if (!(\"\".concat(_this.m_item.description).length > 0 && !_this.validText(_this.m_item.description))) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", _this.toastError(_this.$t(\"error.invalid\")));\n\n              case 6:\n                _this.m_item.modified = _this.getUserInfo();\n                _this.m_item.modifiedDate = new Date();\n                _this.m_item.modifiedName = _this.getUserInfo().fullName;\n                _context.prev = 9;\n\n                if (_this.m_item.id) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 13;\n                return globalService.postData_Async(administratorAPI.API_Create365Folder(), {\n                  createdId: _this.userInfo.id,\n                  folderName: \"\".concat(_this.m_item.fileName),\n                  parentId: _this.m_parent ? _this.m_parent.id : 0,\n                  parentItemId: \"\"\n                });\n\n              case 13:\n                response = _context.sent;\n                _context.next = 19;\n                break;\n\n              case 16:\n                _context.next = 18;\n                return globalService.putData_Async(administratorAPI.API_Save365Folder(_this.m_item.id, _this.m_item.fileName), {});\n\n              case 18:\n                response = _context.sent;\n\n              case 19:\n                if (!response) {\n                  _this.toastError(_this.$t(\"error.update_fail\"));\n                }\n\n                if (!response.state) {\n                  _this.toastError(response.message);\n                }\n\n                _this.saveDialog();\n\n                _context.next = 27;\n                break;\n\n              case 24:\n                _context.prev = 24;\n                _context.t0 = _context[\"catch\"](9);\n\n                _this.toastError(_context.t0);\n\n              case 27:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[9, 24]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;EACAA,qBADA;EAEAC;IAAAC;IAAAC;EAAA,CAFA;EAGAC,IAHA,kBAGA;IACA;MACAC;QACAC,eADA;QAEAC,cAFA;QAGAC,YAHA;QAIAC,WAJA;QAKAC,iBALA;QAMAC,WANA;QAOAC;MAPA,CADA;MAUAC;IAVA;EAYA,CAhBA;EAiBAC;IACAZ,IADA,gBACAa,KADA,EACA;MACA;MACA;IACA,CAJA;IAKAZ,MALA,kBAKAY,KALA,EAKA;MACA;IACA;EAPA,CAjBA;EA0BAC,OA1BA,qBA0BA,EA1BA;EA2BAC,OA3BA,qBA2BA;IACA;IACA;EACA,CA9BA;EA+BAC,YA/BA;EAgCAC;IACAC,UADA,wBACA;MACA;MACA;IACA,CAJA;IAKAC,IALA,kBAKA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,MACA,qCADA;kBAAA;kBAAA;gBAAA;;gBAAA,iCAEA,uDAFA;;cAAA;gBAAA,IAIA,8CAJA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAAA,MAQA,kDACA,0CATA;kBAAA;kBAAA;gBAAA;;gBAAA,iCAWA,2CAXA;;cAAA;gBAaA;gBACA;gBACA;gBAfA;;gBAAA,IAkBA,eAlBA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OA+BAC,6BACAC,sCADA,EAEA;kBACAX,4BADA;kBAEAY,4CAFA;kBAGAb,gDAHA;kBAIAc;gBAJA,CAFA,CA/BA;;cAAA;gBA+BAC,QA/BA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA,OAgDAJ,4BACAC,mCACA,eADA,EAEA,qBAFA,CADA,EAKA,EALA,CAhDA;;cAAA;gBAgDAG,QAhDA;;cAAA;gBAwDA;kBACA;gBACA;;gBACA;kBACA;gBACA;;gBACA;;gBA9DA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAgEA;;cAhEA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAkEA;EAvEA;AAhCA","names":["name","props","item","parent","data","m_item","contentType","fileBase64","fileName","isFolder","needEncrypt","parentId","createdId","m_parent","watch","value","created","mounted","computed","methods","initialize","save","globalService","administratorAPI","folderName","parentItemId","response"],"sourceRoot":"src/views/modules/administrator/Folder","sources":["EditFolder.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<v-toolbar elevation=\"0\" color=\"grey lighten-4\">\r\n\t\t\t<v-toolbar-title>\r\n\t\t\t\t{{\r\n\t\t\t\t\t!m_item.id\r\n\t\t\t\t\t\t? $t(\"title.create_folder\")\r\n\t\t\t\t\t\t: $t(\"title.edit_folder\")\r\n\t\t\t\t}}</v-toolbar-title\r\n\t\t\t>\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</v-toolbar>\r\n\t\t<vue-perfect-scrollbar class=\"h-100\">\r\n\t\t\t<v-card-text>\r\n\t\t\t\t<v-container>\r\n\t\t\t\t\t<v-form ref=\"form\">\r\n\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\t\t\t\tclass=\"rounded-0 float-right\"\r\n\t\t\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\t\t\tright\r\n\t\t\t\t\t\t\t\t\ttop\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-sync</v-icon\r\n\t\t\t\t\t\t\t\t\t>{{ $t(\"button.sync_button\") }}\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t\t\t<m-text-field\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.name')\"\r\n\t\t\t\t\t\t\t\t\t:required=\"true\"\r\n\t\t\t\t\t\t\t\t\t:value=\"m_item.fileName\"\r\n\t\t\t\t\t\t\t\t\t@value=\"\r\n\t\t\t\t\t\t\t\t\t\t(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\tm_item.fileName = value;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</m-text-field>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t\t\t<m-textarea\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.description')\"\r\n\t\t\t\t\t\t\t\t\t:required=\"false\"\r\n\t\t\t\t\t\t\t\t\t:value=\"m_item.description\"\r\n\t\t\t\t\t\t\t\t\t@value=\"\r\n\t\t\t\t\t\t\t\t\t\t(value) => {\r\n\t\t\t\t\t\t\t\t\t\t\tm_item.description = value;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</m-textarea>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t\t\t<v-select\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\t:items=\"[\r\n\t\t\t\t\t\t\t\t\t\t'Vingroup',\r\n\t\t\t\t\t\t\t\t\t\t'VCR',\r\n\t\t\t\t\t\t\t\t\t\t'Vinhome',\r\n\t\t\t\t\t\t\t\t\t\t'Vinpearl',\r\n\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.data_room')\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t></v-select>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t</v-form>\r\n\t\t\t\t</v-container>\r\n\t\t\t</v-card-text>\r\n\t\t</vue-perfect-scrollbar>\r\n\t\t<v-card-actions>\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn\r\n\t\t\t\televation=\"0\"\r\n\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\tdark\r\n\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t@click=\"save\"\r\n\t\t\t>\r\n\t\t\t\t{{ $t(\"button.ok\") }}\r\n\t\t\t</v-btn>\r\n\t\t\t<v-btn\r\n\t\t\t\televation=\"0\"\r\n\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t@click=\"closeDialog\"\r\n\t\t\t>\r\n\t\t\t\t{{ $t(\"button.cancel\") }}\r\n\t\t\t</v-btn>\r\n\t\t</v-card-actions>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nexport default {\r\n\tname: \"EditFolderVue\",\r\n\tprops: { item: {}, parent: {} },\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tm_item: {\r\n\t\t\t\tcontentType: \"\",\r\n\t\t\t\tfileBase64: \"\",\r\n\t\t\t\tfileName: \"\",\r\n\t\t\t\tisFolder: 1,\r\n\t\t\t\tneedEncrypt: true,\r\n\t\t\t\tparentId: 0,\r\n\t\t\t\tcreatedId: this.getUserInfo().id,\r\n\t\t\t},\r\n\t\t\tm_parent: {},\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\titem(value) {\r\n\t\t\tthis.$refs.form.reset();\r\n\t\t\tthis.m_item = Object.assign({}, value);\r\n\t\t},\r\n\t\tparent(value) {\r\n\t\t\tthis.m_parent = value;\r\n\t\t},\r\n\t},\r\n\tcreated() {},\r\n\tmounted() {\r\n\t\tthis.$refs.form.reset();\r\n\t\tthis.initialize();\r\n\t},\r\n\tcomputed: {},\r\n\tmethods: {\r\n\t\tinitialize() {\r\n\t\t\tthis.m_item = this.item;\r\n\t\t\tthis.m_parent = this.parent;\r\n\t\t},\r\n\t\tasync save() {\r\n\t\t\tif (!this.m_parent || !this.m_parent.id) {\r\n\t\t\t\treturn this.toastError(this.$t(\"error.missing_information\"));\r\n\t\t\t}\r\n\t\t\tif (!this.validRequiredText(this.m_item.fileName)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\t`${this.m_item.description}`.length > 0 &&\r\n\t\t\t\t!this.validText(this.m_item.description)\r\n\t\t\t) {\r\n\t\t\t\treturn this.toastError(this.$t(\"error.invalid\"));\r\n\t\t\t}\r\n\t\t\tthis.m_item.modified = this.getUserInfo();\r\n\t\t\tthis.m_item.modifiedDate = new Date();\r\n\t\t\tthis.m_item.modifiedName = this.getUserInfo().fullName;\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tif (!this.m_item.id) {\r\n\t\t\t\t\t// response = await globalService.postData_Async(\r\n\t\t\t\t\t// \tadministratorAPI.API_CreateFolder(),\r\n\t\t\t\t\t// \t{\r\n\t\t\t\t\t// \t\tcontentType: \"\",\r\n\t\t\t\t\t// \t\tfileBase64: \"\",\r\n\t\t\t\t\t// \t\tfileName: this.m_item.fileName,\r\n\t\t\t\t\t// \t\tisFolder: 1,\r\n\t\t\t\t\t// \t\tneedEncrypt: true,\r\n\t\t\t\t\t// \t\tparentId: this.m_parent.idInFileService,\r\n\t\t\t\t\t// \t\tcreatedId: this.getUserInfo().id,\r\n\t\t\t\t\t// \t},\r\n\t\t\t\t\t// );\r\n\t\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_Create365Folder(),\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcreatedId: this.userInfo.id,\r\n\t\t\t\t\t\t\tfolderName: `${this.m_item.fileName}`,\r\n\t\t\t\t\t\t\tparentId: this.m_parent ? this.m_parent.id : 0,\r\n\t\t\t\t\t\t\tparentItemId: \"\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// response = await globalService.putData_Async(\r\n\t\t\t\t\t// \tadministratorAPI.API_RenameFolder(\r\n\t\t\t\t\t// \t\tthis.m_item.id,\r\n\t\t\t\t\t// \t\tthis.m_item.fileName,\r\n\t\t\t\t\t// \t),\r\n\t\t\t\t\t// \t{},\r\n\t\t\t\t\t// );\r\n\t\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_Save365Folder(\r\n\t\t\t\t\t\t\tthis.m_item.id,\r\n\t\t\t\t\t\t\tthis.m_item.fileName,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t{},\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\tthis.toastError(this.$t(\"error.update_fail\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\tthis.toastError(response.message);\r\n\t\t\t\t}\r\n\t\t\t\tthis.saveDialog();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}