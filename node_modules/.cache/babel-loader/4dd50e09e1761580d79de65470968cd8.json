{"ast":null,"code":"import _typeof from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _createForOfIteratorHelper from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _objectSpread from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.replace-all.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Container, Draggable } from \"vue-dndrop\";\nimport VJsf from \"@koumoul/vjsf/lib/VJsf.js\";\nimport \"@koumoul/vjsf/lib/VJsf.css\";\nimport \"@koumoul/vjsf/lib/deps/third-party.js\";\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\nimport RequestDto from \"@/models/request.dto\";\nimport fields from \"@/common/fields\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"@/views/modules/administrator/administrator.api\";\nexport default {\n  name: \"EditRequestDetailVue\",\n  props: {\n    requestDto: RequestDto\n  },\n  components: {\n    Container: Container,\n    Draggable: Draggable,\n    VJsf: VJsf,\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  watch: {\n    requestDto: function requestDto(value) {\n      this.m_requestDto = value;\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.$Progress.start();\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this2.$Progress.finish();\n\n            case 2:\n              _context2.next = 4;\n              return _this2.initialize();\n\n            case 4:\n              _context2.next = 6;\n              return _this2.getFormForm();\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  data: function data() {\n    return {\n      valid: null,\n      m_requestDto: RequestDto,\n      user_current: this.getUserInfo(),\n      dateFormat: \"DD/MM/yyyy\",\n      selected: {},\n      rowIndex: null,\n      colIndex: null,\n      col: {},\n      modelTarget: {},\n      selectedItem: {},\n      selected_row: 0,\n      selected_col: 0,\n      itemid: this.$route.params.id,\n      requestTypes: {},\n      toggle: [],\n      fields: fields,\n      desserts: [],\n      root: [],\n      raw: [],\n      truong_quanhe: [],\n      form: [{\n        elements: [{\n          width: 12,\n          field: {}\n        }]\n      }],\n      response_eForm_Id: null,\n      options: {\n        fieldProps: {\n          outlined: \"outlined\",\n          dense: \"dense\"\n        },\n        context: {\n          items: [\"value 1\", \"value 2\"]\n        },\n        objectItems: [{\n          val: \"value1\",\n          label: \"Value 1\"\n        }, {\n          val: \"value2\",\n          label: \"Value 2\"\n        }]\n      },\n      tableSrc: null,\n      headers: [],\n      header_select: [],\n      itemsType: [\"number\", \"string\", \"combobox\", \"date\", \"radio\", \"checkbox\"],\n      measurementErrors: [],\n      displayTableError: []\n    };\n  },\n  methods: {\n    _save: function _save() {\n      this.$emit(\"save\", {\n        eformId: this.response_eForm_Id,\n        form_: this.form\n      });\n    },\n    initialize: function initialize() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response, children, _iterator, _step, child, parent;\n\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this3.m_requestDto = _this3.requestDto;\n                _context3.prev = 1;\n                _context3.next = 4;\n                return globalService.getData_Async(administratorAPI.API_GetAllCategoryGroup());\n\n              case 4:\n                response = _context3.sent;\n\n                if (response) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                _this3.errorLoad();\n\n                return _context3.abrupt(\"return\");\n\n              case 8:\n                if (response.state) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _this3.errorLoad();\n\n                return _context3.abrupt(\"return\");\n\n              case 11:\n                _this3.raw = response.data;\n                _this3.raw = _this3.raw.map(function (entry) {\n                  return _objectSpread(_objectSpread({}, entry), {}, {\n                    title: entry.name,\n                    const: entry.name\n                  });\n                });\n                _this3.root = response.data.filter(function (entry) {\n                  return !entry.parent && !entry.isDelete;\n                }).map(function (entry) {\n                  return _objectSpread(_objectSpread({}, entry), {}, {\n                    children: [],\n                    title: entry.name,\n                    const: entry.name\n                  });\n                });\n                children = response.data.filter(function (entry) {\n                  return !!entry.parent && !entry.isDelete;\n                });\n                _iterator = _createForOfIteratorHelper(children);\n                _context3.prev = 16;\n\n                _iterator.s();\n\n              case 18:\n                if ((_step = _iterator.n()).done) {\n                  _context3.next = 27;\n                  break;\n                }\n\n                child = _step.value;\n                parent = _this3.findParent(child.parent.id, _this3.root);\n\n                if (parent) {\n                  _context3.next = 23;\n                  break;\n                }\n\n                return _context3.abrupt(\"continue\", 25);\n\n              case 23:\n                child.children = [];\n                parent.children.push(child);\n\n              case 25:\n                _context3.next = 18;\n                break;\n\n              case 27:\n                _context3.next = 32;\n                break;\n\n              case 29:\n                _context3.prev = 29;\n                _context3.t0 = _context3[\"catch\"](16);\n\n                _iterator.e(_context3.t0);\n\n              case 32:\n                _context3.prev = 32;\n\n                _iterator.f();\n\n                return _context3.finish(32);\n\n              case 35:\n                _this3.finishLoad();\n\n                _context3.next = 41;\n                break;\n\n              case 38:\n                _context3.prev = 38;\n                _context3.t1 = _context3[\"catch\"](1);\n\n                _this3.errorLoad(_context3.t1);\n\n              case 41:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[1, 38], [16, 29, 32, 35]]);\n      }))();\n    },\n    findParent: function findParent(parentId, root) {\n      var _iterator2 = _createForOfIteratorHelper(root),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var entry = _step2.value;\n\n          if (entry.id == parentId) {\n            return entry;\n          }\n\n          if (!entry.children || !entry.children.length) {\n            continue;\n          }\n\n          var result = this.findParent(parentId, entry.children);\n\n          if (!result) {\n            continue;\n          } else {\n            return result;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    },\n    onDrop: function onDrop(col, rowIndex, colIndex) {\n      this.selected = {};\n      this.form[this.selected_row].elements[this.selected_col].field = Object.assign({}, this.selectedItem);\n      this.selected = this.form[this.selected_row].elements[this.selected_col];\n      this.form[this.selected_row].elements[this.selected_col].field.name = this.selectedItem.name;\n\n      if (col.field.name == this.$t(\"label.field_table\") && rowIndex == this.selected_row && colIndex == this.selected_col) {\n        var check = 0;\n\n        for (var i = 0; i < this.headers.length; i++) {\n          if (this.headers[i].isRow == rowIndex && this.headers[i].isCol == colIndex) {\n            this.headers[i].isHeader = [{\n              text: \"Col 1\",\n              value: \"Col1\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 2\",\n              value: \"Col2\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 3\",\n              value: \"Col3\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 4\",\n              value: \"Col4\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 5\",\n              value: \"Col5\",\n              type: \"\",\n              title: \"\"\n            }];\n            check = check + 1;\n            break;\n          }\n        }\n\n        if (check == 0) {\n          this.headers.push({\n            isRow: rowIndex,\n            isCol: colIndex,\n            isHeader: [{\n              text: \"Col 1\",\n              value: \"Col1\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 2\",\n              value: \"Col2\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 3\",\n              value: \"Col3\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 4\",\n              value: \"Col4\",\n              type: \"\",\n              title: \"\"\n            }, {\n              text: \"Col 5\",\n              value: \"Col5\",\n              type: \"\",\n              title: \"\"\n            }]\n          });\n        }\n      }\n\n      if (rowIndex != this.selected_row || colIndex != this.selected_col) {\n        this.config(this.form[this.selected_row].elements[this.selected_col], this.selected_row, this.selected_col);\n      } else {\n        this.config(col, rowIndex, colIndex);\n      }\n    },\n    shouldAcceptDrop: function shouldAcceptDrop() {\n      return true;\n    },\n    addRow: function addRow() {\n      this.selected = {};\n      var tmp = {\n        elements: [{\n          width: 12,\n          field: {}\n        }]\n      };\n      this.toggle.push(false);\n      this.form.push(tmp);\n    },\n    addCol: function addCol(rowIndex, type) {\n      this.selected = {};\n      var widths = [];\n\n      switch (type) {\n        case 1:\n          widths = [12];\n          break;\n\n        case 2:\n          widths = [6, 6];\n          break;\n\n        case 3:\n          widths = [4, 8];\n          break;\n\n        case 4:\n          widths = [4, 4, 4];\n          break;\n\n        case 5:\n          widths = [8, 4];\n          break;\n      }\n\n      if (this.form[rowIndex].elements.length < widths.length) {\n        for (var i = 0; i < widths.length; i++) {\n          if (this.form[rowIndex].elements.length >= i + 1) {\n            if (this.form[rowIndex].elements[i].field != {}) {\n              this.form[rowIndex].elements[i].width = widths[i];\n            }\n          } else if (this.form[rowIndex].elements.length < i + 1) {\n            this.form[rowIndex].elements.push({\n              width: widths[i],\n              field: {}\n            });\n          }\n        }\n      }\n\n      if (this.form[rowIndex].elements.length > widths.length) {\n        this.form[rowIndex].elements = this.form[rowIndex].elements.slice(0, widths.length);\n\n        for (var _i = 0; _i < widths.length; _i++) {\n          this.form[rowIndex].elements[_i].width = widths[_i];\n        }\n      }\n\n      if (this.form[rowIndex].elements.length == widths.length) {\n        for (var _i2 = 0; _i2 < widths.length; _i2++) {\n          this.form[rowIndex].elements[_i2].width = widths[_i2];\n        }\n      }\n\n      this.toggle[rowIndex] = false;\n    },\n    removeRow: function removeRow(rowIndex) {\n      this.form.splice(rowIndex, 1);\n    },\n    onDragEnter: function onDragEnter(rowIndex, colIndex) {\n      // this.selected = {};\n      this.selected_row = rowIndex;\n      this.selected_col = colIndex;\n    },\n    getChildPayload: function getChildPayload(index) {\n      // this.selected = {};\n      this.selectedItem = this.cloneObject({}, this.fields[index]);\n    },\n    search_header: function search_header(rowIndex, colIndex) {\n      var _iterator3 = _createForOfIteratorHelper(this.headers),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var header = _step3.value;\n\n          if (header.isRow == rowIndex && header.isCol == colIndex) {\n            return header.isHeader;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    },\n    cloneObject: function cloneObject(targetObject, sourceObject) {\n      if (!sourceObject) return {};\n      targetObject = Object.assign({}, sourceObject);\n\n      for (var prop in sourceObject) {\n        if (_typeof(sourceObject[prop]) == \"object\") {\n          targetObject[prop] = this.cloneObject(targetObject[prop], sourceObject[prop]);\n        }\n      }\n\n      return targetObject;\n    },\n    openShowAddCol: function openShowAddCol(rowIndex) {\n      this.toggle.push(false);\n      this.toggle[rowIndex] = !this.toggle[rowIndex];\n    },\n    config: function config(col, rowIndex, colIndex) {\n      this.selected = {};\n      this.col = col;\n      this.rowIndex = rowIndex;\n      this.colIndex = colIndex;\n\n      var _iterator4 = _createForOfIteratorHelper(this.form),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var form_row = _step4.value;\n\n          var _iterator5 = _createForOfIteratorHelper(form_row.elements),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var form_col = _step5.value;\n\n              if (form_col.field.previewSchema && form_col.field.previewSchema.properties.title.title) {\n                this.truong_quanhe.push({\n                  const: form_col.field.previewSchema.properties.title.title,\n                  title: form_col.field.previewSchema.properties.title.title\n                });\n              }\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      this.selected = col;\n\n      if (!this.selected.field.configModel.id) {\n        this.selected.field.configModel.id = this.getIdFromValue(col.field.previewSchema.properties.title.title);\n      }\n\n      if (!this.selected.field.configModel.title) {\n        this.selected.field.configModel.title = col.field.previewSchema.properties.title.title;\n      }\n\n      if (col.field.name == this.$t(\"label.field_autotext\") || col.field.name == this.$t(\"label.field_combobox\")) {\n        this.selected.field.configSchema.properties.category.oneOf = this.root;\n        this.selected.field.configSchema.properties.filter.oneOf = this.truong_quanhe;\n      }\n\n      if (col.field.name == this.$t(\"label.field_file\")) {\n        this.selected.field.configSchema.properties.upload_ext.items.examples = [\".doc\", \".docm\", \".docx\", \".docb\", \".dot\", \".dotm\", \".dotx\", \".wbk\", \".csv\", \".odt\", \".pdf\", \".rtf\", \".txt\", \".wps\", \".xml\", \".xps\", \".xls\", \".xlsx\", \".pps\", \".ppsx\", \".ppt\", \".pptm\", \".pptx\", \".xls\"];\n      } // this.search_header(rowIndex, colIndex);\n\n    },\n    saveItemForm: function saveItemForm() {\n      if (this.selected.field) {\n        for (var _i3 = 0, _Object$keys = Object.keys(this.selected.field.configModel); _i3 < _Object$keys.length; _i3++) {\n          var key = _Object$keys[_i3];\n\n          if (this.selected.field.configModel[key] != null && this.selected.field.configModel[key] != \"\" && this.selected.field.configModel[key] != undefined && typeof this.selected.field.configModel[key] == \"string\") {\n            this.selected.field.configModel[key] = this.selected.field.configModel[key].trim();\n          }\n        }\n\n        this.form[this.rowIndex].elements[this.colIndex].field.configSchema = this.selected.field.configSchema;\n        this.form[this.rowIndex].elements[this.colIndex].field.previewSchema.properties.title.title = this.selected.field.configModel.title;\n\n        if (this.form[this.rowIndex].elements[this.colIndex].field.name == this.$t(\"label.field_autotext\") || this.form[this.rowIndex].elements[this.colIndex].field.name == this.$t(\"label.field_combobox\")) {\n          this.form[this.rowIndex].elements[this.colIndex].field.configSchema.properties.category.oneOf = this.root;\n          this.form[this.rowIndex].elements[this.colIndex].field.configSchema.properties.filter.oneOf = this.raw;\n        }\n      }\n\n      var _iterator6 = _createForOfIteratorHelper(this.form),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var form_row = _step6.value;\n\n          var _iterator8 = _createForOfIteratorHelper(form_row.elements),\n              _step8;\n\n          try {\n            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n              var form_col = _step8.value;\n              form_col.field.previewSchema.properties.title.title = form_col.field.configModel.title;\n            }\n          } catch (err) {\n            _iterator8.e(err);\n          } finally {\n            _iterator8.f();\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n\n      var _iterator7 = _createForOfIteratorHelper(this.form),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var _form_row = _step7.value;\n\n          var _iterator9 = _createForOfIteratorHelper(_form_row.elements),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var _form_col = _step9.value;\n\n              if (_form_col.field.name == this.$t(\"label.field_table\")) {\n                for (var i = 0; i < this.headers.length; i++) {\n                  if (this.headers[i].isRow == this.form.indexOf(_form_row) && this.headers[i].isCol == _form_row.elements.indexOf(_form_col)) {\n                    _form_col.field.configSchema.properties.Headers = JSON.stringify(this.headers[i].isHeader);\n                  }\n                }\n              }\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    },\n    saveEForm: function saveEForm() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var listFieldTemp, eForm, response_eForm, stt, row, col, schema, fieldInEForm, response_fields;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!_this4.selected.field) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                if (_this4.$refs.form.validate()) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.toastError(_this4.$t(\"message.information_fasle\")));\n\n              case 3:\n                _context4.next = 5;\n                return _this4.saveItemForm();\n\n              case 5:\n                listFieldTemp = [];\n                eForm = {\n                  id: null,\n                  created: {\n                    id: _this4.user_current.id\n                  },\n                  createdDate: new Date(),\n                  createdName: _this4.user_current.name,\n                  description: \"\",\n                  eFormCode: \"\",\n                  eFormName: \"\",\n                  fields: [],\n                  isActive: true,\n                  isDelete: true,\n                  modified: {\n                    id: 1\n                  },\n                  modifiedDate: new Date(),\n                  modifiedName: _this4.user_current.name,\n                  objectModel: \"\",\n                  objectSchema: JSON.stringify(_this4.form),\n                  option: \"\",\n                  tennantCode: \"\",\n                  tennantName: \"\"\n                };\n                _context4.next = 9;\n                return globalService.postData_Async(\"/api/forms\", eForm);\n\n              case 9:\n                response_eForm = _context4.sent;\n                _this4.response_eForm_Id = response_eForm.data.id;\n\n                if (!response_eForm.state) {\n                  _context4.next = 37;\n                  break;\n                }\n\n                stt = 1;\n                _context4.t0 = _regeneratorRuntime().keys(_this4.form);\n\n              case 14:\n                if ((_context4.t1 = _context4.t0()).done) {\n                  _context4.next = 34;\n                  break;\n                }\n\n                row = _context4.t1.value;\n\n                if (!Array.isArray(_this4.form[row].elements)) {\n                  _context4.next = 32;\n                  break;\n                }\n\n                _context4.t2 = _regeneratorRuntime().keys(_this4.form[row].elements);\n\n              case 18:\n                if ((_context4.t3 = _context4.t2()).done) {\n                  _context4.next = 32;\n                  break;\n                }\n\n                col = _context4.t3.value;\n                schema = _this4.form[row].elements[col].field.previewSchema.properties;\n                if (!schema) schema = {};\n                fieldInEForm = {\n                  id: null,\n                  fieldInEFormCode: \"\",\n                  fieldInEFormName: \"\",\n                  objectSchema: JSON.stringify(_objectSpread({\n                    \"x-cols\": _this4.form[row].elements[col].width\n                  }, _this4.cloneObject({}, schema))),\n                  objectModel: JSON.stringify({}),\n                  option: JSON.stringify({}),\n                  description: \"nv\",\n                  nameOfField: schema.title.title,\n                  fieldPattern: null,\n                  required: null,\n                  order: stt,\n                  createdName: _this4.user_current.name,\n                  createdDate: new Date(),\n                  modifiedName: _this4.user_current.name,\n                  modifiedDate: new Date(),\n                  row: row,\n                  col: col,\n                  tennantCode: \"\",\n                  tennantName: \"\",\n                  created: {\n                    id: _this4.user_current.id\n                  },\n                  modified: {\n                    id: _this4.user_current.id\n                  },\n                  form: {\n                    id: response_eForm.data.id\n                  }\n                };\n                listFieldTemp.push(fieldInEForm);\n                stt++;\n                _context4.next = 27;\n                return globalService.postData_Async(\"/api/field-in-forms\", fieldInEForm);\n\n              case 27:\n                response_fields = _context4.sent;\n\n                if (response_fields) {\n                  _context4.next = 30;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 30:\n                _context4.next = 18;\n                break;\n\n              case 32:\n                _context4.next = 14;\n                break;\n\n              case 34:\n                _this4._save();\n\n                _context4.next = 38;\n                break;\n\n              case 37:\n                _this4.toastError(_this4.$t(\"message.update_error\"));\n\n              case 38:\n                return _context4.abrupt(\"return\", response_eForm.data.id);\n\n              case 39:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    getFormForm: function getFormForm() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response_All_Fields, _iterator10, _step10, form_row, _iterator11, _step11, form_col;\n\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!(!_this5.m_requestDto.form || !_this5.m_requestDto.form.id)) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 2:\n                _context5.next = 4;\n                return globalService.getData_Async(\"/api/forms/\".concat(_this5.m_requestDto.form.id));\n\n              case 4:\n                response_All_Fields = _context5.sent;\n                _this5.form = JSON.parse(response_All_Fields.data.objectSchema);\n                _iterator10 = _createForOfIteratorHelper(_this5.form);\n\n                try {\n                  for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n                    form_row = _step10.value;\n                    _iterator11 = _createForOfIteratorHelper(form_row.elements);\n\n                    try {\n                      for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n                        form_col = _step11.value;\n\n                        if (form_col.field.name == _this5.$t(\"label.field_table\")) {\n                          _this5.headers.push({\n                            isRow: _this5.form.indexOf(form_row),\n                            isCol: form_row.elements.indexOf(form_col),\n                            isHeader: JSON.parse(form_col.field.configSchema.properties.Headers)\n                          });\n                        }\n                      }\n                    } catch (err) {\n                      _iterator11.e(err);\n                    } finally {\n                      _iterator11.f();\n                    }\n                  }\n                } catch (err) {\n                  _iterator10.e(err);\n                } finally {\n                  _iterator10.f();\n                }\n\n              case 8:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    getColor: function getColor(tableRecord) {\n      if (tableRecord.value > tableRecord.max || tableRecord.value < tableRecord.min) {\n        return \"red\";\n      } else {\n        return \"#81c784\";\n      }\n    },\n    shorten: function shorten(inText) {\n      var maxLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 200;\n\n      if (inText.length > maxLength) {\n        return inText.substring(0, maxLength) + \"...\";\n      } else {\n        return inText;\n      }\n    },\n    saveRequest: function saveRequest() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n        var response_quest;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return _this6.saveEForm();\n\n              case 2:\n                _this6.m_requestDto.form = {\n                  id: null\n                };\n                _this6.m_requestDto.form.id = _this6.response_eForm_Id;\n                _context6.next = 6;\n                return globalService.putData_Async(\"/api/requests/\" + _this6.m_requestDto.id, _this6.m_requestDto);\n\n              case 6:\n                response_quest = _context6.sent;\n\n                if (response_quest.state) {\n                  _this6.toastSuccess(_this6.$t(\"message.update_success\"));\n                } else {\n                  _this6.toastError(_this6.$t(\"message.error\"));\n                }\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }))();\n    },\n    addHeader: function addHeader(rowIndex, colIndex) {\n      rowIndex = this.rowIndex;\n      colIndex = this.colIndex;\n\n      for (var i = 0; i < this.headers.length; i++) {\n        if (this.headers[i].isRow == rowIndex && this.headers[i].isCol == colIndex) {\n          this.headers[i].isHeader.push({\n            text: \"new col\",\n            value: \"newcol\",\n            type: \"string\",\n            title: \"\"\n          });\n        }\n      }\n    },\n    removeHeader: function removeHeader(rowIndex, colIndex) {\n      rowIndex = this.rowIndex;\n      colIndex = this.colIndex;\n\n      for (var i = 0; i < this.headers.length; i++) {\n        if (this.headers[i].isRow == rowIndex && this.headers[i].isCol == colIndex) {\n          this.headers[i].isHeader.pop();\n        }\n      }\n    },\n    getClass: function getClass(rowIndex, colIndex) {\n      return this.rowIndex == rowIndex && this.colIndex == colIndex ? \"grey lighten-2\" : \"white\";\n    },\n    textToValue: function textToValue(item) {\n      item.value = this.nonAccentVietnamese(item.text).replaceAll(/\\W/gi, \"\");\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","props","requestDto","components","Container","Draggable","VJsf","VuePerfectScrollbar","watch","value","created","mounted","data","valid","m_requestDto","user_current","dateFormat","selected","rowIndex","colIndex","col","modelTarget","selectedItem","selected_row","selected_col","itemid","requestTypes","toggle","fields","desserts","root","raw","truong_quanhe","form","elements","width","field","response_eForm_Id","options","fieldProps","outlined","dense","context","items","objectItems","val","label","tableSrc","headers","header_select","itemsType","measurementErrors","displayTableError","methods","_save","eformId","form_","initialize","globalService","administratorAPI","response","title","const","filter","map","entry","children","child","parent","findParent","parentId","onDrop","Object","text","type","check","isRow","isCol","isHeader","shouldAcceptDrop","addRow","addCol","widths","slice","removeRow","onDragEnter","getChildPayload","index","search_header","cloneObject","targetObject","sourceObject","openShowAddCol","config","form_row","form_col","saveItemForm","configSchema","previewSchema","properties","category","oneOf","JSON","saveEForm","listFieldTemp","eForm","id","createdDate","createdName","description","eFormCode","eFormName","isActive","isDelete","modified","modifiedDate","modifiedName","objectModel","objectSchema","option","tennantCode","tennantName","response_eForm","stt","row","Array","schema","fieldInEForm","fieldInEFormCode","fieldInEFormName","nameOfField","fieldPattern","required","order","response_fields","getFormForm","response_All_Fields","getColor","tableRecord","shorten","inText","saveRequest","response_quest","addHeader","removeHeader","getClass","textToValue","item"],"sourceRoot":"src/views/modules/administrator/Request","sources":["EditRequestDetail.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<v-row>\r\n\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t<span class=\"mt-2\"\r\n\t\t\t\t\t><v-icon>mdi-plus</v-icon> Tạo mới\r\n\t\t\t\t\t<v-icon>mdi-menu-down</v-icon></span\r\n\t\t\t\t>\r\n\t\t\t</v-col>\r\n\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\t\tdark\r\n\t\t\t\t\tclass=\"m-2 rounded-0 float-right\"\r\n\t\t\t\t\t@click=\"saveRequest()\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-icon> mdi-content-save </v-icon>\r\n\t\t\t\t\t{{ $t(\"button.save_form\") }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t\t<v-divider></v-divider>\r\n\t\t<v-row class=\"mt-2\">\r\n\t\t\t<v-col cols=\"12\" md=\"2\" sm=\"12\">\r\n\t\t\t\t<v-card elevation=\"0\">\r\n\t\t\t\t\t<VuePerfectScrollbar class=\"scroll-area\">\r\n\t\t\t\t\t\t<Container :get-child-payload=\"getChildPayload\">\r\n\t\t\t\t\t\t\t<Draggable\r\n\t\t\t\t\t\t\t\tv-for=\"(field, index) in fields\"\r\n\t\t\t\t\t\t\t\t:key=\"'field_' + index\"\r\n\t\t\t\t\t\t\t\t:data-index=\"index\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-card\r\n\t\t\t\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tcolor=\"grey lighten-3\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mb-2 mx-auto text-center p-2 cursor-move\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<!-- <v-btn icon class=\"mx-auto cursor-move\">\r\n\t\t\t\t\t\t\t\t\t\t<v-icon x-large>{{\r\n\t\t\t\t\t\t\t\t\t\t\tfield.icon\r\n\t\t\t\t\t\t\t\t\t\t}}</v-icon>\r\n\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t\t<br /> -->\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t{{ field.name }}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t<v-jsf\r\n\t\t\t\t\t\t\t\t\t\tv-model=\"field.viewLeftModel\"\r\n\t\t\t\t\t\t\t\t\t\t:schema=\"field.viewLeft\"\r\n\t\t\t\t\t\t\t\t\t\t:options=\"options\"\r\n\t\t\t\t\t\t\t\t\t\t:key=\"'field_' + index\"\r\n\t\t\t\t\t\t\t\t\t></v-jsf>\r\n\t\t\t\t\t\t\t\t</v-card>\r\n\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</VuePerfectScrollbar>\r\n\t\t\t\t</v-card>\r\n\t\t\t</v-col>\r\n\t\t\t<v-col cols=\"12\" md=\"7\" sm=\"12\">\r\n\t\t\t\t<v-card elevation=\"0\">\r\n\t\t\t\t\t<Container :get-child-payload=\"getChildPayload\">\r\n\t\t\t\t\t\t<v-row\r\n\t\t\t\t\t\t\tv-for=\"(row, rowIndex) in form\"\r\n\t\t\t\t\t\t\t:key=\"'row_' + rowIndex\"\r\n\t\t\t\t\t\t\tclass=\"form-row d-flex\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-col\r\n\t\t\t\t\t\t\t\tv-for=\"(col, colIndex) in row.elements\"\r\n\t\t\t\t\t\t\t\t:key=\"'col_' + rowIndex + '_' + colIndex\"\r\n\t\t\t\t\t\t\t\t:cols=\"col.width\"\r\n\t\t\t\t\t\t\t\t@click=\"config(col, rowIndex, colIndex)\"\r\n\t\t\t\t\t\t\t\t@\r\n\t\t\t\t\t\t\t\t:class=\"getClass(rowIndex, colIndex)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-card\r\n\t\t\t\t\t\t\t\t\televation=\"0\"\r\n\t\t\t\t\t\t\t\t\tclass=\"m-1 p-2 rounded bordered-dotted\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tcolor=\"grey lighten-2\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\t\t\t@drag-enter=\"\r\n\t\t\t\t\t\t\t\t\t\t\tonDragEnter(rowIndex, colIndex)\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t:should-accept-drop=\"shouldAcceptDrop\"\r\n\t\t\t\t\t\t\t\t\t\t@drop=\"onDrop(col, rowIndex, colIndex)\"\r\n\t\t\t\t\t\t\t\t\t\t:get-child-payload=\"getChildPayload\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<v-form\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcol.field &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tcol.field.previewSchema\r\n\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<v-jsf\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"col.field.previewModel\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:schema=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcol.field.previewSchema\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:options=\"options\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'col_' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trowIndex +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'_' +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<v-data-table\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol.field.name ==\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$t('label.field_table')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:headers=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsearch_header(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trowIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:items-per-page=\"-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"elevation-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<template\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-slot:[`item.value`]=\"{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:color=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetColor(item)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ma-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}</span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</v-data-table>\r\n\t\t\t\t\t\t\t\t\t\t\t</v-jsf>\r\n\t\t\t\t\t\t\t\t\t\t</v-form>\r\n\t\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t\t\t</v-card>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t\t<v-col class=\"number-col\">\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\tv-if=\"toggle[rowIndex]\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\t@click=\"addCol(rowIndex, 1)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t1\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\tv-if=\"toggle[rowIndex]\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\t@click=\"addCol(rowIndex, 2)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t1/2 + 1/2\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\tv-if=\"toggle[rowIndex]\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\t@click=\"addCol(rowIndex, 3)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t1/3 + 2/3\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\tv-if=\"toggle[rowIndex]\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\t@click=\"addCol(rowIndex, 4)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t1/3 + 1/3 + 1/3\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\tv-if=\"toggle[rowIndex]\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\t@click=\"addCol(rowIndex, 5)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t2/3 + 1/3\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t\t\t\t\t\t@click=\"openShowAddCol(rowIndex)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-icon small\r\n\t\t\t\t\t\t\t\t\t\t>mdi-format-align-justify</v-icon\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\tclass=\"remove-row\"\r\n\t\t\t\t\t\t\t\tfab\r\n\t\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\t\tx-small\r\n\t\t\t\t\t\t\t\tcolor=\"error\"\r\n\t\t\t\t\t\t\t\t@click=\"removeRow(rowIndex)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-icon dark> mdi-close </v-icon>\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col class=\"text-center mt-2\">\r\n\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\tfab\r\n\t\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\t\tx-small\r\n\t\t\t\t\t\t\t\tclass=\"mx-2\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t@click=\"addRow()\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-icon> mdi-plus-circle </v-icon>\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t</v-card>\r\n\t\t\t</v-col>\r\n\t\t\t<v-col cols=\"12\" md=\"3\" sm=\"12\" outlined>\r\n\t\t\t\t<v-card elevation=\"0\">\r\n\t\t\t\t\t<v-list>\r\n\t\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t<v-list-item-title\r\n\t\t\t\t\t\t\t\t\t><strong\r\n\t\t\t\t\t\t\t\t\t\t>{{\r\n\t\t\t\t\t\t\t\t\t\t\t$t(\"label.request_group\")\r\n\t\t\t\t\t\t\t\t\t\t}}:</strong\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t\t\t\tm_requestDto &&\r\n\t\t\t\t\t\t\t\t\t\t\tm_requestDto.requestGroup\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t>{{\r\n\t\t\t\t\t\t\t\t\t\t\tm_requestDto.requestGroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t.requestGroupName\r\n\t\t\t\t\t\t\t\t\t\t}}</i\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t</v-list>\r\n\t\t\t\t\t<v-list>\r\n\t\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t\t<v-list-item-title\r\n\t\t\t\t\t\t\t\t\t><strong\r\n\t\t\t\t\t\t\t\t\t\t>{{ $t(\"label.request_type\") }}:</strong\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t\t\t\tm_requestDto &&\r\n\t\t\t\t\t\t\t\t\t\t\tm_requestDto.requestType\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t>{{\r\n\t\t\t\t\t\t\t\t\t\t\tm_requestDto.requestType\r\n\t\t\t\t\t\t\t\t\t\t\t\t.requestTypeName\r\n\t\t\t\t\t\t\t\t\t\t}}</i\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t</v-list>\r\n\t\t\t\t</v-card>\r\n\t\t\t\t<v-card elevation=\"0\" class=\"p-2 mt-4\">\r\n\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t\t<v-form\r\n\t\t\t\t\t\t\t\tv-if=\"selected.field\"\r\n\t\t\t\t\t\t\t\tref=\"form\"\r\n\t\t\t\t\t\t\t\tv-model=\"valid\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-jsf\r\n\t\t\t\t\t\t\t\t\tv-model=\"selected.field.configModel\"\r\n\t\t\t\t\t\t\t\t\t:schema=\"selected.field.configSchema\"\r\n\t\t\t\t\t\t\t\t\t:options=\"options\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</v-form>\r\n\t\t\t\t\t\t\t<v-form\r\n\t\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t\tselected.field &&\r\n\t\t\t\t\t\t\t\t\tselected.field.name ==\r\n\t\t\t\t\t\t\t\t\t\t$t('label.field_table')\r\n\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\tref=\"form\"\r\n\t\t\t\t\t\t\t\tv-model=\"valid\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<h3 class=\"mb-4\">\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"label.title_configuration\") }}\r\n\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tv-for=\"(item, index) of search_header(\r\n\t\t\t\t\t\t\t\t\t\trowIndex,\r\n\t\t\t\t\t\t\t\t\t\tcolIndex,\r\n\t\t\t\t\t\t\t\t\t)\"\r\n\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-row>\r\n\t\t\t\t\t\t\t\t\t\t<v-col cols=\"8\">\r\n\t\t\t\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"item.text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:label=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$t(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'label.column_header_name',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t(index + 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t\t\t\t@keyup=\"textToValue(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t\t\t\t></v-text-field\r\n\t\t\t\t\t\t\t\t\t\t></v-col>\r\n\t\t\t\t\t\t\t\t\t\t<v-col cols=\"4\">\r\n\t\t\t\t\t\t\t\t\t\t\t<v-combobox\r\n\t\t\t\t\t\t\t\t\t\t\t\t:label=\"$t('label.datatypes')\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"item.type\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:items=\"itemsType\"\r\n\t\t\t\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t\t\t\t></v-combobox\r\n\t\t\t\t\t\t\t\t\t\t></v-col>\r\n\t\t\t\t\t\t\t\t\t</v-row>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"d-flex\">\r\n\t\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\t\tclass=\"mx-4\"\r\n\t\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\t\t@click=\"addHeader(rowIndex, colIndex)\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ $t(\"label.add_title\") }}\r\n\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\t\tclass=\"mx-4\"\r\n\t\t\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\t\t\t\t\t\tremoveHeader(rowIndex, colIndex)\r\n\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ $t(\"label.remove_title\") }}\r\n\t\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</v-form>\r\n\t\t\t\t\t\t\t<!-- <v-btn\r\n\t\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\t\tclass=\"m-2 rounded\"\r\n\t\t\t\t\t\t\t\t@click=\"saveRequest()\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<v-icon> mdi-content-save </v-icon>\r\n\t\t\t\t\t\t\t\t{{ $t(\"button.save_form\") }}\r\n\t\t\t\t\t\t\t</v-btn> -->\r\n\t\t\t\t\t\t</v-col>\r\n\t\t\t\t\t</v-row>\r\n\t\t\t\t</v-card>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport { Container, Draggable } from \"vue-dndrop\";\r\nimport VJsf from \"@koumoul/vjsf/lib/VJsf.js\";\r\nimport \"@koumoul/vjsf/lib/VJsf.css\";\r\nimport \"@koumoul/vjsf/lib/deps/third-party.js\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nimport RequestDto from \"@/models/request.dto\";\r\nimport fields from \"@/common/fields\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"@/views/modules/administrator/administrator.api\";\r\nexport default {\r\n\tname: \"EditRequestDetailVue\",\r\n\tprops: {\r\n\t\trequestDto: RequestDto,\r\n\t},\r\n\tcomponents: {\r\n\t\tContainer,\r\n\t\tDraggable,\r\n\t\tVJsf,\r\n\t\tVuePerfectScrollbar,\r\n\t},\r\n\twatch: {\r\n\t\trequestDto(value) {\r\n\t\t\tthis.m_requestDto = value;\r\n\t\t},\r\n\t},\r\n\tasync created() {\r\n\t\tthis.$Progress.start();\r\n\t},\r\n\tasync mounted() {\r\n\t\tawait this.$Progress.finish();\r\n\t\tawait this.initialize();\r\n\t\tawait this.getFormForm();\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvalid: null,\r\n\t\t\tm_requestDto: RequestDto,\r\n\t\t\tuser_current: this.getUserInfo(),\r\n\t\t\tdateFormat: \"DD/MM/yyyy\",\r\n\t\t\tselected: {},\r\n\t\t\trowIndex: null,\r\n\t\t\tcolIndex: null,\r\n\t\t\tcol: {},\r\n\t\t\tmodelTarget: {},\r\n\t\t\tselectedItem: {},\r\n\t\t\tselected_row: 0,\r\n\t\t\tselected_col: 0,\r\n\t\t\titemid: this.$route.params.id,\r\n\t\t\trequestTypes: {},\r\n\t\t\ttoggle: [],\r\n\t\t\tfields: fields,\r\n\t\t\tdesserts: [],\r\n\t\t\troot: [],\r\n\t\t\traw: [],\r\n\t\t\ttruong_quanhe: [],\r\n\t\t\tform: [\r\n\t\t\t\t{\r\n\t\t\t\t\telements: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\twidth: 12,\r\n\t\t\t\t\t\t\tfield: {},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t],\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tresponse_eForm_Id: null,\r\n\t\t\toptions: {\r\n\t\t\t\tfieldProps: {\r\n\t\t\t\t\toutlined: \"outlined\",\r\n\t\t\t\t\tdense: \"dense\",\r\n\t\t\t\t},\r\n\t\t\t\tcontext: {\r\n\t\t\t\t\titems: [\"value 1\", \"value 2\"],\r\n\t\t\t\t},\r\n\t\t\t\tobjectItems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tval: \"value1\",\r\n\t\t\t\t\t\tlabel: \"Value 1\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tval: \"value2\",\r\n\t\t\t\t\t\tlabel: \"Value 2\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\ttableSrc: null,\r\n\t\t\theaders: [],\r\n\t\t\theader_select: [],\r\n\t\t\titemsType: [\r\n\t\t\t\t\"number\",\r\n\t\t\t\t\"string\",\r\n\t\t\t\t\"combobox\",\r\n\t\t\t\t\"date\",\r\n\t\t\t\t\"radio\",\r\n\t\t\t\t\"checkbox\",\r\n\t\t\t],\r\n\t\t\tmeasurementErrors: [],\r\n\t\t\tdisplayTableError: [],\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t_save() {\r\n\t\t\tthis.$emit(\"save\", {\r\n\t\t\t\teformId: this.response_eForm_Id,\r\n\t\t\t\tform_: this.form,\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync initialize() {\r\n\t\t\tthis.m_requestDto = this.requestDto;\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllCategoryGroup(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\tthis.errorLoad();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\tthis.errorLoad();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.raw = response.data;\r\n\t\t\t\tthis.raw = this.raw.map((entry) => {\r\n\t\t\t\t\treturn { ...entry, title: entry.name, const: entry.name };\r\n\t\t\t\t});\r\n\t\t\t\tthis.root = response.data\r\n\t\t\t\t\t.filter((entry) => {\r\n\t\t\t\t\t\treturn !entry.parent && !entry.isDelete;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.map((entry) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...entry,\r\n\t\t\t\t\t\t\tchildren: [],\r\n\t\t\t\t\t\t\ttitle: entry.name,\r\n\t\t\t\t\t\t\tconst: entry.name,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\tlet children = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !!entry.parent && !entry.isDelete;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfor (let child of children) {\r\n\t\t\t\t\tlet parent = this.findParent(child.parent.id, this.root);\r\n\t\t\t\t\tif (!parent) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchild.children = [];\r\n\t\t\t\t\tparent.children.push(child);\r\n\t\t\t\t}\r\n\t\t\t\tthis.finishLoad();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.errorLoad(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfindParent(parentId, root) {\r\n\t\t\tfor (let entry of root) {\r\n\t\t\t\tif (entry.id == parentId) {\r\n\t\t\t\t\treturn entry;\r\n\t\t\t\t}\r\n\t\t\t\tif (!entry.children || !entry.children.length) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tlet result = this.findParent(parentId, entry.children);\r\n\t\t\t\tif (!result) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDrop(col, rowIndex, colIndex) {\r\n\t\t\tthis.selected = {};\r\n\t\t\tthis.form[this.selected_row].elements[this.selected_col].field =\r\n\t\t\t\tObject.assign({}, this.selectedItem);\r\n\t\t\tthis.selected =\r\n\t\t\t\tthis.form[this.selected_row].elements[this.selected_col];\r\n\t\t\tthis.form[this.selected_row].elements[\r\n\t\t\t\tthis.selected_col\r\n\t\t\t].field.name = this.selectedItem.name;\r\n\r\n\t\t\tif (\r\n\t\t\t\tcol.field.name == this.$t(\"label.field_table\") &&\r\n\t\t\t\trowIndex == this.selected_row &&\r\n\t\t\t\tcolIndex == this.selected_col\r\n\t\t\t) {\r\n\t\t\t\tlet check = 0;\r\n\t\t\t\tfor (let i = 0; i < this.headers.length; i++) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthis.headers[i].isRow == rowIndex &&\r\n\t\t\t\t\t\tthis.headers[i].isCol == colIndex\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.headers[i].isHeader = [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 1\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col1\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 2\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col2\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 3\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col3\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 4\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col4\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 5\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col5\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tcheck = check + 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (check == 0) {\r\n\t\t\t\t\tthis.headers.push({\r\n\t\t\t\t\t\tisRow: rowIndex,\r\n\t\t\t\t\t\tisCol: colIndex,\r\n\t\t\t\t\t\tisHeader: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 1\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col1\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 2\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col2\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 3\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col3\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 4\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col4\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"Col 5\",\r\n\t\t\t\t\t\t\t\tvalue: \"Col5\",\r\n\t\t\t\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\trowIndex != this.selected_row ||\r\n\t\t\t\tcolIndex != this.selected_col\r\n\t\t\t) {\r\n\t\t\t\tthis.config(\r\n\t\t\t\t\tthis.form[this.selected_row].elements[this.selected_col],\r\n\t\t\t\t\tthis.selected_row,\r\n\t\t\t\t\tthis.selected_col,\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tthis.config(col, rowIndex, colIndex);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshouldAcceptDrop() {\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\taddRow() {\r\n\t\t\tthis.selected = {};\r\n\t\t\tlet tmp = {\r\n\t\t\t\telements: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\twidth: 12,\r\n\t\t\t\t\t\tfield: {},\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\t\tthis.toggle.push(false);\r\n\t\t\tthis.form.push(tmp);\r\n\t\t},\r\n\t\taddCol(rowIndex, type) {\r\n\t\t\tthis.selected = {};\r\n\t\t\tlet widths = [];\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\twidths = [12];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\twidths = [6, 6];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\twidths = [4, 8];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\twidths = [4, 4, 4];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\twidths = [8, 4];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.form[rowIndex].elements.length < widths.length) {\r\n\t\t\t\tfor (let i = 0; i < widths.length; i++) {\r\n\t\t\t\t\tif (this.form[rowIndex].elements.length >= i + 1) {\r\n\t\t\t\t\t\tif (this.form[rowIndex].elements[i].field != {}) {\r\n\t\t\t\t\t\t\tthis.form[rowIndex].elements[i].width = widths[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (this.form[rowIndex].elements.length < i + 1) {\r\n\t\t\t\t\t\tthis.form[rowIndex].elements.push({\r\n\t\t\t\t\t\t\twidth: widths[i],\r\n\t\t\t\t\t\t\tfield: {},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.form[rowIndex].elements.length > widths.length) {\r\n\t\t\t\tthis.form[rowIndex].elements = this.form[\r\n\t\t\t\t\trowIndex\r\n\t\t\t\t].elements.slice(0, widths.length);\r\n\t\t\t\tfor (let i = 0; i < widths.length; i++) {\r\n\t\t\t\t\tthis.form[rowIndex].elements[i].width = widths[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.form[rowIndex].elements.length == widths.length) {\r\n\t\t\t\tfor (let i = 0; i < widths.length; i++) {\r\n\t\t\t\t\tthis.form[rowIndex].elements[i].width = widths[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.toggle[rowIndex] = false;\r\n\t\t},\r\n\r\n\t\tremoveRow(rowIndex) {\r\n\t\t\tthis.form.splice(rowIndex, 1);\r\n\t\t},\r\n\t\tonDragEnter(rowIndex, colIndex) {\r\n\t\t\t// this.selected = {};\r\n\t\t\tthis.selected_row = rowIndex;\r\n\t\t\tthis.selected_col = colIndex;\r\n\t\t},\r\n\t\tgetChildPayload(index) {\r\n\t\t\t// this.selected = {};\r\n\t\t\tthis.selectedItem = this.cloneObject({}, this.fields[index]);\r\n\t\t},\r\n\t\tsearch_header(rowIndex, colIndex) {\r\n\t\t\tfor (const header of this.headers) {\r\n\t\t\t\tif (header.isRow == rowIndex && header.isCol == colIndex) {\r\n\t\t\t\t\treturn header.isHeader;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloneObject(targetObject, sourceObject) {\r\n\t\t\tif (!sourceObject) return {};\r\n\t\t\ttargetObject = Object.assign({}, sourceObject);\r\n\t\t\tfor (let prop in sourceObject) {\r\n\t\t\t\tif (typeof sourceObject[prop] == \"object\") {\r\n\t\t\t\t\ttargetObject[prop] = this.cloneObject(\r\n\t\t\t\t\t\ttargetObject[prop],\r\n\t\t\t\t\t\tsourceObject[prop],\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn targetObject;\r\n\t\t},\r\n\t\topenShowAddCol(rowIndex) {\r\n\t\t\tthis.toggle.push(false);\r\n\t\t\tthis.toggle[rowIndex] = !this.toggle[rowIndex];\r\n\t\t},\r\n\t\tconfig(col, rowIndex, colIndex) {\r\n\t\t\tthis.selected = {};\r\n\t\t\tthis.col = col;\r\n\t\t\tthis.rowIndex = rowIndex;\r\n\t\t\tthis.colIndex = colIndex;\r\n\t\t\tfor (const form_row of this.form) {\r\n\t\t\t\tfor (const form_col of form_row.elements) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tform_col.field.previewSchema &&\r\n\t\t\t\t\t\tform_col.field.previewSchema.properties.title.title\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.truong_quanhe.push({\r\n\t\t\t\t\t\t\tconst: form_col.field.previewSchema.properties.title\r\n\t\t\t\t\t\t\t\t.title,\r\n\t\t\t\t\t\t\ttitle: form_col.field.previewSchema.properties.title\r\n\t\t\t\t\t\t\t\t.title,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.selected = col;\r\n\t\t\tif (!this.selected.field.configModel.id) {\r\n\t\t\t\tthis.selected.field.configModel.id = this.getIdFromValue(\r\n\t\t\t\t\tcol.field.previewSchema.properties.title.title,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (!this.selected.field.configModel.title) {\r\n\t\t\t\tthis.selected.field.configModel.title =\r\n\t\t\t\t\tcol.field.previewSchema.properties.title.title;\r\n\t\t\t}\r\n\t\t\tif (\r\n\t\t\t\tcol.field.name == this.$t(\"label.field_autotext\") ||\r\n\t\t\t\tcol.field.name == this.$t(\"label.field_combobox\")\r\n\t\t\t) {\r\n\t\t\t\tthis.selected.field.configSchema.properties.category.oneOf =\r\n\t\t\t\t\tthis.root;\r\n\t\t\t\tthis.selected.field.configSchema.properties.filter.oneOf =\r\n\t\t\t\t\tthis.truong_quanhe;\r\n\t\t\t}\r\n\t\t\tif (col.field.name == this.$t(\"label.field_file\")) {\r\n\t\t\t\tthis.selected.field.configSchema.properties.upload_ext.items.examples =\r\n\t\t\t\t\t[\r\n\t\t\t\t\t\t\".doc\",\r\n\t\t\t\t\t\t\".docm\",\r\n\t\t\t\t\t\t\".docx\",\r\n\t\t\t\t\t\t\".docb\",\r\n\t\t\t\t\t\t\".dot\",\r\n\t\t\t\t\t\t\".dotm\",\r\n\t\t\t\t\t\t\".dotx\",\r\n\t\t\t\t\t\t\".wbk\",\r\n\t\t\t\t\t\t\".csv\",\r\n\t\t\t\t\t\t\".odt\",\r\n\t\t\t\t\t\t\".pdf\",\r\n\t\t\t\t\t\t\".rtf\",\r\n\t\t\t\t\t\t\".txt\",\r\n\t\t\t\t\t\t\".wps\",\r\n\t\t\t\t\t\t\".xml\",\r\n\t\t\t\t\t\t\".xps\",\r\n\t\t\t\t\t\t\".xls\",\r\n\t\t\t\t\t\t\".xlsx\",\r\n\t\t\t\t\t\t\".pps\",\r\n\t\t\t\t\t\t\".ppsx\",\r\n\t\t\t\t\t\t\".ppt\",\r\n\t\t\t\t\t\t\".pptm\",\r\n\t\t\t\t\t\t\".pptx\",\r\n\t\t\t\t\t\t\".xls\",\r\n\t\t\t\t\t];\r\n\t\t\t}\r\n\t\t\t// this.search_header(rowIndex, colIndex);\r\n\t\t},\r\n\t\tsaveItemForm() {\r\n\t\t\tif (this.selected.field) {\r\n\t\t\t\tfor (let key of Object.keys(this.selected.field.configModel)) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthis.selected.field.configModel[key] != null &&\r\n\t\t\t\t\t\tthis.selected.field.configModel[key] != \"\" &&\r\n\t\t\t\t\t\tthis.selected.field.configModel[key] != undefined &&\r\n\t\t\t\t\t\ttypeof this.selected.field.configModel[key] == \"string\"\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tthis.selected.field.configModel[key] =\r\n\t\t\t\t\t\t\tthis.selected.field.configModel[key].trim();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.form[this.rowIndex].elements[\r\n\t\t\t\t\tthis.colIndex\r\n\t\t\t\t].field.configSchema = this.selected.field.configSchema;\r\n\t\t\t\tthis.form[this.rowIndex].elements[\r\n\t\t\t\t\tthis.colIndex\r\n\t\t\t\t].field.previewSchema.properties.title.title =\r\n\t\t\t\t\tthis.selected.field.configModel.title;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.form[this.rowIndex].elements[this.colIndex].field\r\n\t\t\t\t\t\t.name == this.$t(\"label.field_autotext\") ||\r\n\t\t\t\t\tthis.form[this.rowIndex].elements[this.colIndex].field\r\n\t\t\t\t\t\t.name == this.$t(\"label.field_combobox\")\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.form[this.rowIndex].elements[\r\n\t\t\t\t\t\tthis.colIndex\r\n\t\t\t\t\t].field.configSchema.properties.category.oneOf = this.root;\r\n\t\t\t\t\tthis.form[this.rowIndex].elements[\r\n\t\t\t\t\t\tthis.colIndex\r\n\t\t\t\t\t].field.configSchema.properties.filter.oneOf = this.raw;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (const form_row of this.form) {\r\n\t\t\t\tfor (const form_col of form_row.elements) {\r\n\t\t\t\t\tform_col.field.previewSchema.properties.title.title =\r\n\t\t\t\t\t\tform_col.field.configModel.title;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (const form_row of this.form) {\r\n\t\t\t\tfor (const form_col of form_row.elements) {\r\n\t\t\t\t\tif (form_col.field.name == this.$t(\"label.field_table\")) {\r\n\t\t\t\t\t\tfor (let i = 0; i < this.headers.length; i++) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthis.headers[i].isRow ==\r\n\t\t\t\t\t\t\t\t\tthis.form.indexOf(form_row) &&\r\n\t\t\t\t\t\t\t\tthis.headers[i].isCol ==\r\n\t\t\t\t\t\t\t\t\tform_row.elements.indexOf(form_col)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tform_col.field.configSchema.properties.Headers =\r\n\t\t\t\t\t\t\t\t\tJSON.stringify(this.headers[i].isHeader);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync saveEForm() {\r\n\t\t\tif (this.selected.field) {\r\n\t\t\t\tif (!this.$refs.form.validate()) {\r\n\t\t\t\t\treturn this.toastError(\r\n\t\t\t\t\t\tthis.$t(\"message.information_fasle\"),\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait this.saveItemForm();\r\n\t\t\tlet listFieldTemp = [];\r\n\t\t\tlet eForm = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tcreated: { id: this.user_current.id },\r\n\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\tcreatedName: this.user_current.name,\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\teFormCode: \"\",\r\n\t\t\t\teFormName: \"\",\r\n\t\t\t\tfields: [],\r\n\t\t\t\tisActive: true,\r\n\t\t\t\tisDelete: true,\r\n\t\t\t\tmodified: { id: 1 },\r\n\t\t\t\tmodifiedDate: new Date(),\r\n\t\t\t\tmodifiedName: this.user_current.name,\r\n\t\t\t\tobjectModel: \"\",\r\n\t\t\t\tobjectSchema: JSON.stringify(this.form),\r\n\t\t\t\toption: \"\",\r\n\t\t\t\ttennantCode: \"\",\r\n\t\t\t\ttennantName: \"\",\r\n\t\t\t};\r\n\t\t\tlet response_eForm = await globalService.postData_Async(\r\n\t\t\t\t`/api/forms`,\r\n\t\t\t\teForm,\r\n\t\t\t);\r\n\t\t\tthis.response_eForm_Id = response_eForm.data.id;\r\n\r\n\t\t\tif (response_eForm.state) {\r\n\t\t\t\tlet stt = 1;\r\n\t\t\t\tfor (let row in this.form) {\r\n\t\t\t\t\tif (Array.isArray(this.form[row].elements)) {\r\n\t\t\t\t\t\tfor (let col in this.form[row].elements) {\r\n\t\t\t\t\t\t\tlet schema =\r\n\t\t\t\t\t\t\t\tthis.form[row].elements[col].field.previewSchema\r\n\t\t\t\t\t\t\t\t\t.properties;\r\n\t\t\t\t\t\t\tif (!schema) schema = {};\r\n\t\t\t\t\t\t\tlet fieldInEForm = {\r\n\t\t\t\t\t\t\t\tid: null,\r\n\t\t\t\t\t\t\t\tfieldInEFormCode: \"\",\r\n\t\t\t\t\t\t\t\tfieldInEFormName: \"\",\r\n\t\t\t\t\t\t\t\tobjectSchema: JSON.stringify({\r\n\t\t\t\t\t\t\t\t\t\"x-cols\":\r\n\t\t\t\t\t\t\t\t\t\tthis.form[row].elements[col].width,\r\n\t\t\t\t\t\t\t\t\t...this.cloneObject({}, schema),\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tobjectModel: JSON.stringify({}),\r\n\t\t\t\t\t\t\t\toption: JSON.stringify({}),\r\n\t\t\t\t\t\t\t\tdescription: \"nv\",\r\n\t\t\t\t\t\t\t\tnameOfField: schema.title.title,\r\n\t\t\t\t\t\t\t\tfieldPattern: null,\r\n\t\t\t\t\t\t\t\trequired: null,\r\n\t\t\t\t\t\t\t\torder: stt,\r\n\t\t\t\t\t\t\t\tcreatedName: this.user_current.name,\r\n\t\t\t\t\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\t\t\t\t\tmodifiedName: this.user_current.name,\r\n\t\t\t\t\t\t\t\tmodifiedDate: new Date(),\r\n\t\t\t\t\t\t\t\trow: row,\r\n\t\t\t\t\t\t\t\tcol: col,\r\n\t\t\t\t\t\t\t\ttennantCode: \"\",\r\n\t\t\t\t\t\t\t\ttennantName: \"\",\r\n\t\t\t\t\t\t\t\tcreated: {\r\n\t\t\t\t\t\t\t\t\tid: this.user_current.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tmodified: {\r\n\t\t\t\t\t\t\t\t\tid: this.user_current.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tform: {\r\n\t\t\t\t\t\t\t\t\tid: response_eForm.data.id,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tlistFieldTemp.push(fieldInEForm);\r\n\t\t\t\t\t\t\tstt++;\r\n\t\t\t\t\t\t\tlet response_fields =\r\n\t\t\t\t\t\t\t\tawait globalService.postData_Async(\r\n\t\t\t\t\t\t\t\t\t`/api/field-in-forms`,\r\n\t\t\t\t\t\t\t\t\tfieldInEForm,\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tif (!response_fields) return;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._save();\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"message.update_error\"));\r\n\t\t\t}\r\n\t\t\treturn response_eForm.data.id;\r\n\t\t},\r\n\r\n\t\tasync getFormForm() {\r\n\t\t\tif (!this.m_requestDto.form || !this.m_requestDto.form.id) return;\r\n\t\t\tlet response_All_Fields = await globalService.getData_Async(\r\n\t\t\t\t`/api/forms/${this.m_requestDto.form.id}`,\r\n\t\t\t);\r\n\t\t\tthis.form = JSON.parse(response_All_Fields.data.objectSchema);\r\n\t\t\tfor (const form_row of this.form) {\r\n\t\t\t\tfor (const form_col of form_row.elements) {\r\n\t\t\t\t\tif (form_col.field.name == this.$t(\"label.field_table\")) {\r\n\t\t\t\t\t\tthis.headers.push({\r\n\t\t\t\t\t\t\tisRow: this.form.indexOf(form_row),\r\n\t\t\t\t\t\t\tisCol: form_row.elements.indexOf(form_col),\r\n\t\t\t\t\t\t\tisHeader: JSON.parse(\r\n\t\t\t\t\t\t\t\tform_col.field.configSchema.properties.Headers,\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetColor(tableRecord) {\r\n\t\t\tif (\r\n\t\t\t\ttableRecord.value > tableRecord.max ||\r\n\t\t\t\ttableRecord.value < tableRecord.min\r\n\t\t\t) {\r\n\t\t\t\treturn \"red\";\r\n\t\t\t} else {\r\n\t\t\t\treturn \"#81c784\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tshorten(inText, maxLength = 200) {\r\n\t\t\tif (inText.length > maxLength) {\r\n\t\t\t\treturn inText.substring(0, maxLength) + \"...\";\r\n\t\t\t} else {\r\n\t\t\t\treturn inText;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync saveRequest() {\r\n\t\t\tawait this.saveEForm();\r\n\t\t\tthis.m_requestDto.form = {\r\n\t\t\t\tid: null,\r\n\t\t\t};\r\n\t\t\tthis.m_requestDto.form.id = this.response_eForm_Id;\r\n\t\t\tlet response_quest = await globalService.putData_Async(\r\n\t\t\t\t\"/api/requests/\" + this.m_requestDto.id,\r\n\t\t\t\tthis.m_requestDto,\r\n\t\t\t);\r\n\t\t\tif (response_quest.state) {\r\n\t\t\t\tthis.toastSuccess(this.$t(\"message.update_success\"));\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"message.error\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\taddHeader(rowIndex, colIndex) {\r\n\t\t\trowIndex = this.rowIndex;\r\n\t\t\tcolIndex = this.colIndex;\r\n\t\t\tfor (let i = 0; i < this.headers.length; i++) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.headers[i].isRow == rowIndex &&\r\n\t\t\t\t\tthis.headers[i].isCol == colIndex\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.headers[i].isHeader.push({\r\n\t\t\t\t\t\ttext: \"new col\",\r\n\t\t\t\t\t\tvalue: \"newcol\",\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\ttitle: \"\",\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveHeader(rowIndex, colIndex) {\r\n\t\t\trowIndex = this.rowIndex;\r\n\t\t\tcolIndex = this.colIndex;\r\n\t\t\tfor (let i = 0; i < this.headers.length; i++) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.headers[i].isRow == rowIndex &&\r\n\t\t\t\t\tthis.headers[i].isCol == colIndex\r\n\t\t\t\t) {\r\n\t\t\t\t\tthis.headers[i].isHeader.pop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetClass(rowIndex, colIndex) {\r\n\t\t\treturn this.rowIndex == rowIndex && this.colIndex == colIndex\r\n\t\t\t\t? \"grey lighten-2\"\r\n\t\t\t\t: \"white\";\r\n\t\t},\r\n\t\ttextToValue(item) {\r\n\t\t\titem.value = this.nonAccentVietnamese(item.text).replaceAll(\r\n\t\t\t\t/\\W/gi,\r\n\t\t\t\t\"\",\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n<style>\r\n.scroll-area {\r\n\tposition: relative;\r\n\tmargin: auto;\r\n\theight: 80vh;\r\n\tpadding: 0.5em;\r\n}\r\n.form-row {\r\n\tposition: relative;\r\n}\r\n.remove-row {\r\n\tdisplay: none;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n}\r\n.number-col {\r\n\tdisplay: none;\r\n\tjustify-content: end;\r\n\tgap: 4px;\r\n\talign-items: flex-start;\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tpadding: 0;\r\n}\r\n.form-row:hover .number-col {\r\n\tdisplay: flex;\r\n}\r\n.form-row:hover .remove-row {\r\n\tdisplay: flex;\r\n}\r\n.v-menu__content {\r\n\tposition: absolute;\r\n\tdisplay: inline-block;\r\n\tmax-width: 7vw;\r\n\tright: 1%;\r\n\toverflow-y: auto;\r\n\toverflow-x: hidden;\r\n\tcontain: content;\r\n\tbox-shadow: 0px 5px 5px -3px rgb(0 0 0 / 20%),\r\n\t\t0px 8px 10px 1px rgb(0 0 0 / 14%), 0px 3px 14px 2px rgb(0 0 0 / 12%);\r\n\tborder-radius: 4px;\r\n}\r\n.v-select-list,\r\n.v-list {\r\n\tmax-width: 30vw !important;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}