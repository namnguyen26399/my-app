{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport moment from \"moment\";\nimport administratorAPI from \"../../administrator/administrator.api\";\nimport Breadcrumbs from \"@/components/Breadcrumbs.vue\";\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\nexport default {\n  components: {\n    Breadcrumbs: Breadcrumbs,\n    DeleteDialogVue: DeleteDialogVue\n  },\n  name: \"VsmFeListrequestform\",\n  data: function data() {\n    var _this = this;\n\n    return {\n      user_info: this.getUserInfo(),\n      listRequestData: [],\n      showPicker: false,\n      dialogDeleteAll: false,\n      selected: [],\n      headers: [{\n        text: \"Mã YC\",\n        value: \"requestDataCode\",\n        filter: function filter(value) {\n          if (!_this.requestDataCode) return true;\n          if (!value) return;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.requestDataCode).toLocaleUpperCase());\n        }\n      }, {\n        text: \"Tên loại YC\",\n        value: \"requestDataName\",\n        filter: function filter(value) {\n          if (!_this.requestDataName) return true;\n          if (!value) return;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.requestDataName).toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.is_active\"),\n        value: \"isActive\",\n        filter: function filter(value) {\n          if (_this.isActive == _this.$t(\"label.used\")) {\n            return value == true;\n          }\n\n          if (_this.isActive == _this.$t(\"label.unused\")) {\n            return value == false;\n          }\n\n          return true;\n        }\n      }, {\n        text: this.$t(\"label.created_name\"),\n        value: \"createdName\",\n        filter: function filter(value) {\n          if (!_this.createdName) return true;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.createdName).toLocaleUpperCase());\n        }\n      }, {\n        text: this.$t(\"label.created_date\"),\n        value: \"createdDate\",\n        formatter: function formatter(x) {\n          return x ? moment(x).format(_this.dateFormat) : null;\n        },\n        filter: function filter(value) {\n          if (!_this.createdDate) return true;\n          return value.includes(_this.createdDate);\n        }\n      }, {\n        text: this.$t(\"label.manipulation\"),\n        value: \"actions\",\n        sortable: false\n      }],\n      items: [],\n      search: \"\",\n      singleSelect: false,\n      requestDataCode: \"\",\n      requestDataName: \"\",\n      isDeleting: false,\n      createdName: \"\",\n      createdDate: null,\n      json_fields: [],\n      json_data: [],\n      json_meta: [[{\n        key: \"charset\",\n        value: \"utf-8\"\n      }]],\n      filterItems: [this.$t(\"label.show_all\"), this.$t(\"label.used\"), this.$t(\"label.unused\")],\n      dateFormat: \"DD/MM/yyyy\",\n      isActive: this.$t(\"label.show_all\"),\n      userId: null,\n      dialog: {\n        delete: false,\n        deny: false,\n        approve: false,\n        requestmodify: false\n      },\n      requestFilter: [],\n      requestAll: [],\n      requestOverdue: [],\n      requestAboutExpỉe: [],\n      allSelect: true,\n      filterInprocess: false,\n      filterOverdue: false,\n      filterAboutExpire: false,\n      headExcl: \"\",\n      requestInprocess: false,\n      requestOver: false,\n      requestAbout: false\n    };\n  },\n  computed: {\n    formatDateFns: function formatDateFns() {\n      return this.createdDate ? moment(this.createdDate).format(this.dateFormat) : \"\";\n    }\n  },\n  watch: {\n    dialog: function dialog(val) {\n      val || this.close();\n    },\n    \"dialog.delete\": function dialogDelete(val) {\n      val || this.closeDelete();\n    },\n    dialogView: function dialogView(val) {\n      val || this.closeView();\n    },\n    dialogDeleteAll: function dialogDeleteAll(val) {\n      val || this.closeDeleteAll();\n    }\n  },\n  mounted: function mounted() {\n    this.getRequestForm();\n  },\n  methods: {\n    getRequestForm: function getRequestForm() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this2.requestInprocess = false;\n                _this2.requestOver = false;\n                _this2.requestAbout = false;\n                _context.prev = 3;\n                _context.next = 6;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequestData());\n\n              case 6:\n                response = _context.sent;\n\n                // response = await globalService.getData_Async(\n                // \tadministratorAPI.API_GetAllByUserIdRequestData(\n                // \t\tthis.user_info.id,\n                // \t),\n                // );\n                if (!response || !response.state) {\n                  _this2.toastError(_this2.$t(\"error.load\"));\n                }\n\n                _this2.requestAll = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _this2.listRequestData = Object.assign([], _this2.requestAll);\n\n                _this2.sortList(_this2.listRequestData);\n\n                _this2.headExcl = \"Danh sách phiếu yêu cầu\";\n                _this2.json_fields = _this2.getJsonFields(_this2.headers);\n                _this2.json_data = Object.assign([], _this2.listRequestData);\n                _context.next = 20;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](3);\n\n                _this2.toastError(_context.t0);\n\n                return _context.abrupt(\"return\");\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 16]]);\n      }))();\n    },\n    closeDelete: function closeDelete() {\n      this.dialog.delete = false;\n    },\n    closeDeleteAll: function closeDeleteAll() {\n      this.dialogDeleteAll = false;\n    },\n    deleteAll: function deleteAll() {\n      if (this.selected.length > 0) {\n        this.dialog.delete = true;\n      } else {\n        this.toastError(this.$t(\"label.no_selected\"));\n      }\n    },\n    onConfirmDelete: function onConfirmDelete(value) {\n      if (!value) {\n        this.closeDelete();\n      } else {\n        if (this.selected) {\n          this.deleteAllConfirm();\n        }\n      }\n    },\n    deleteItem: function deleteItem(item) {\n      this.selected = [item];\n      this.dialogDelete = true;\n    },\n    sortList: function sortList(arr) {\n      return arr.sort(function (a, b) {\n        return moment(b.createdDate).toDate().getTime() - moment(a.createdDate).toDate().getTime();\n      });\n    },\n    customFilter: function customFilter(value, search, item) {\n      return !!search && this.match(item, search);\n    },\n    deleteAllConfirm: function deleteAllConfirm() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!_this3.isDeleting) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 2:\n                _this3.isDeleting = true;\n                _this3.selected = _this3.selected.map(function (entry) {\n                  entry.isDelete = true;\n                  return entry;\n                });\n                _context2.next = 6;\n                return globalService.postData_Async(administratorAPI.API_DeleteAllRequestData(), _this3.selected);\n\n              case 6:\n                response = _context2.sent;\n\n                if (!response.state) {\n                  _this3.toastError(response.message);\n                }\n\n                if (response.state) {\n                  _this3.isDeleting = true;\n\n                  _this3.toastSuccess(_this3.$t(\"message.delete_success\"));\n                }\n\n                _this3.selected = [];\n                _this3.isDeleting = false;\n\n                _this3.getRequestForm();\n\n                _this3.closeDelete();\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    openDenyDialog: function openDenyDialog() {\n      this.dialog.deny = true;\n    },\n    openApproveDialog: function openApproveDialog() {\n      this.dialog.approve = true;\n    },\n    openRequestModifyDialog: function openRequestModifyDialog() {\n      this.dialog.requestmodify = true;\n    },\n    closeDialog: function closeDialog() {\n      this.dialog.deny = false;\n      this.dialog.approve = false;\n      this.dialog.requestmodify = false;\n    },\n    allRequest: function allRequest() {\n      this.selected = [];\n      this.allSelect = true;\n      this.filterInprocess = false;\n      this.filterOverdue = false;\n      this.filterAboutExpire = false;\n      this.listRequestData = Object.assign([], this.requestAll);\n      this.headExcl = \"Danh sách phiếu yêu cầu\";\n    },\n    inProcessRequest: function inProcessRequest() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this4.selected = [];\n                _this4.allSelect = false;\n                _this4.filterInprocess = true;\n                _this4.filterOverdue = false;\n                _this4.filterAboutExpire = false;\n\n                if (_this4.requestInprocess) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                _context3.next = 8;\n                return globalService.getData_Async(administratorAPI.API_GetRequestInProcessing(_this4.user_info.id));\n\n              case 8:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _this4.toastError(_this4.$t(\"error.load\")));\n\n              case 11:\n                _this4.requestFilter = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n              case 12:\n                _this4.listRequestData = Object.assign([], _this4.requestFilter);\n\n                _this4.sortList(_this4.listRequestData);\n\n                _this4.headExcl = \"Danh sách phiếu yêu cầu trong hạn\";\n                _this4.json_fields = _this4.getJsonFields(_this4.headers);\n                _this4.json_data = Object.assign([], _this4.listRequestData);\n                _this4.requestInprocess = true;\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))();\n    },\n    overdueRequest: function overdueRequest() {\n      var _this5 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _this5.selected = [];\n                _this5.allSelect = false;\n                _this5.filterInprocess = false;\n                _this5.filterOverdue = true;\n                _this5.filterAboutExpire = false;\n\n                if (_this5.requestOver) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                _context4.next = 8;\n                return globalService.getData_Async(administratorAPI.API_GetRequestOverDueByUserId(_this5.user_info.id));\n\n              case 8:\n                response = _context4.sent;\n\n                if (!(!response || !response.state)) {\n                  _context4.next = 11;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this5.toastError(_this5.$t(\"error.load\")));\n\n              case 11:\n                _this5.requestOverdue = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n              case 12:\n                _this5.listRequestData = Object.assign([], _this5.requestOverdue);\n\n                _this5.sortList(_this5.listRequestData);\n\n                _this5.headExcl = \"Danh sách phiếu yêu cầu quá hạn\";\n                _this5.json_fields = _this5.getJsonFields(_this5.headers);\n                _this5.json_data = Object.assign([], _this5.listRequestData);\n                _this5.requestOver = true;\n\n              case 18:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }))();\n    },\n    aboutExpireRequest: function aboutExpireRequest() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this6.selected = [];\n                _this6.allSelect = false;\n                _this6.filterInprocess = false;\n                _this6.filterOverdue = false;\n                _this6.filterAboutExpire = true;\n\n                if (_this6.requestAbout) {\n                  _context5.next = 12;\n                  break;\n                }\n\n                _context5.next = 8;\n                return globalService.getData_Async(administratorAPI.API_GetRequestAboutToExpireByUserId(_this6.user_info.id));\n\n              case 8:\n                response = _context5.sent;\n\n                if (!(!response || !response.state)) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _this6.toastError(_this6.$t(\"error.load\")));\n\n              case 11:\n                _this6.requestAboutExpỉe = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n              case 12:\n                _this6.listRequestData = Object.assign([], _this6.requestAboutExpỉe);\n\n                _this6.sortList(_this6.listRequestData);\n\n                _this6.headExcl = \"Danh sách phiếu yêu cầu sắp hết hạn\";\n                _this6.json_fields = _this6.getJsonFields(_this6.headers);\n                _this6.json_data = Object.assign([], _this6.listRequestData);\n                _this6.requestAbout = true;\n\n              case 18:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }))();\n    },\n    getClassAllSelect: function getClassAllSelect() {\n      if (this.allSelect) {\n        return \"blue darken-1\";\n      }\n\n      return \"\";\n    },\n    getClassFilterInprocess: function getClassFilterInprocess() {\n      if (this.filterInprocess) {\n        return \"blue darken-1\";\n      }\n\n      return \"\";\n    },\n    getClassFilterAboutExpire: function getClassFilterAboutExpire() {\n      if (this.filterAboutExpire) {\n        return \"blue darken-1\";\n      }\n\n      return \"\";\n    },\n    getClassFilterOverdue: function getClassFilterOverdue() {\n      if (this.filterOverdue) {\n        return \"blue darken-1\";\n      }\n\n      return \"\";\n    },\n    getFilenameExcel: function getFilenameExcel() {\n      var str = \"Phieu_yeu_cau_\" + new Date().getTime() + \".xls\";\n      return str;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["components","Breadcrumbs","DeleteDialogVue","name","data","user_info","listRequestData","showPicker","dialogDeleteAll","selected","headers","text","value","filter","toLocaleUpperCase","includes","formatter","x","sortable","items","search","singleSelect","requestDataCode","requestDataName","isDeleting","createdName","createdDate","json_fields","json_data","json_meta","key","filterItems","dateFormat","isActive","userId","dialog","delete","deny","approve","requestmodify","requestFilter","requestAll","requestOverdue","requestAboutExpỉe","allSelect","filterInprocess","filterOverdue","filterAboutExpire","headExcl","requestInprocess","requestOver","requestAbout","computed","formatDateFns","moment","watch","val","dialogView","mounted","methods","getRequestForm","globalService","administratorAPI","response","closeDelete","closeDeleteAll","deleteAll","onConfirmDelete","deleteItem","item","sortList","arr","customFilter","deleteAllConfirm","entry","openDenyDialog","openApproveDialog","openRequestModifyDialog","closeDialog","allRequest","inProcessRequest","overdueRequest","aboutExpireRequest","getClassAllSelect","getClassFilterInprocess","getClassFilterAboutExpire","getClassFilterOverdue","getFilenameExcel"],"sourceRoot":"src/views/modules/khai-phieu-yeu-cau/RequestForm","sources":["ListRequestForm.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\">\r\n\t\t<Breadcrumbs />\r\n\t\t<v-card-title>\r\n\t\t\t<v-row class=\"p-0 w-full\">\r\n\t\t\t\t<router-link\r\n\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\tpath: '/phieu-yeu-cau/tao-moi',\r\n\t\t\t\t\t}\"\r\n\t\t\t\t\tstyle=\"text-decoration: none; margin-right: 1rem\"\r\n\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\tdark\r\n\t\t\t\t\ttext\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-btn class=\"mb-4 mr-2 rounded\" text>\r\n\t\t\t\t\t\t<v-icon> mdi-plus </v-icon>\r\n\t\t\t\t\t\t{{ $t(\"button.create\") }}\r\n\t\t\t\t\t\t<v-icon>mdi-menu-down</v-icon>\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</router-link>\r\n\r\n\t\t\t\t<v-btn class=\"mb-4 mr-2 rounded\" text @click=\"deleteAll\">\r\n\t\t\t\t\t<v-icon> mdi-delete-outline </v-icon>\r\n\t\t\t\t\t{{ $t(\"button.delete_all\") }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<!-- <v-spacer></v-spacer>\r\n\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\t\tappend-icon=\"mdi-magnify\"\r\n\t\t\t\t\t\t:label=\"$t('title.search')\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t\tclass=\"mt-2 mx-4\"\r\n\t\t\t\t\t></v-text-field> -->\r\n\t\t\t</v-row>\r\n\t\t</v-card-title>\r\n\t\t<v-dialog v-model=\"dialog.delete\" max-width=\"fit-content\">\r\n\t\t\t<DeleteDialogVue\r\n\t\t\t\t@close=\"closeDelete\"\r\n\t\t\t\t@confirmDelete=\"onConfirmDelete\"\r\n\t\t\t/>\r\n\t\t</v-dialog>\r\n\t\t<v-row>\r\n\t\t\t<v-col\r\n\t\t\t\tcols=\"12\"\r\n\t\t\t\tmd=\"12\"\r\n\t\t\t\tclass=\"d-flex w-full\"\r\n\t\t\t\tstyle=\"justify-content: space-between\"\r\n\t\t\t>\r\n\t\t\t\t<div class=\"d-flex\">\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\t@click=\"allRequest()\"\r\n\t\t\t\t\t\t\t\t\t:class=\"getClassAllSelect()\"\r\n\t\t\t\t\t\t\t\t\t:dark=\"allSelect\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"label.show_all\") }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\t@click=\"inProcessRequest()\"\r\n\t\t\t\t\t\t\t\t\t:class=\"getClassFilterInprocess()\"\r\n\t\t\t\t\t\t\t\t\t:dark=\"filterInprocess\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"button.in_due_date\") }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\t@click=\"aboutExpireRequest()\"\r\n\t\t\t\t\t\t\t\t\t:class=\"getClassFilterAboutExpire()\"\r\n\t\t\t\t\t\t\t\t\t:dark=\"filterAboutExpire\"\r\n\t\t\t\t\t\t\t\t\t>{{ $t(\"button.expiration_soon\") }}</v-chip\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\t\t\t\t@click=\"overdueRequest()\"\r\n\t\t\t\t\t\t\t\t\t:class=\"getClassFilterOverdue()\"\r\n\t\t\t\t\t\t\t\t\t:dark=\"filterOverdue\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"button.out_of_date\") }}\r\n\t\t\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"d-flex\">\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<vue-excel-xlsx\r\n\t\t\t\t\t\t\t:data=\"json_data\"\r\n\t\t\t\t\t\t\t:file-name=\"getFilenameExcel()\"\r\n\t\t\t\t\t\t\t:columns=\"json_fields\"\r\n\t\t\t\t\t\t\t:file-type=\"'xlsx'\"\r\n\t\t\t\t\t\t\t:sheet-name=\"headExcl\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-btn text tile>\r\n\t\t\t\t\t\t\t\t<v-icon> mdi-swap-vertical </v-icon>\r\n\t\t\t\t\t\t\t\t{{ $t(\"button.excel_export\") }}\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</vue-excel-xlsx>\r\n\t\t\t\t\t\t<!-- <download-excel\r\n\t\t\t\t\t\t\t:data=\"json_data\"\r\n\t\t\t\t\t\t\t:fields=\"json_fields\"\r\n\t\t\t\t\t\t\tworksheet=\"Phiếu yêu cầu\"\r\n\t\t\t\t\t\t\t:name=\"getFilenameExcel()\"\r\n\t\t\t\t\t\t\t:header=\"headExcl\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<v-btn text tile color=\"orange\">\r\n\t\t\t\t\t\t\t\t<v-icon color=\"orange\">\r\n\t\t\t\t\t\t\t\t\tmdi-swap-vertical\r\n\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t\tXuất excel\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</download-excel> -->\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-btn text tile @click=\"openRequestModifyDialog\">\r\n\t\t\t\t\t\t\t<v-icon> mdi-swap-vertical </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"button.modify_request\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-btn text tile @click=\"openApproveDialog\">\r\n\t\t\t\t\t\t\t<v-icon> mdi-check </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"label.approve\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t<v-list-item>\r\n\t\t\t\t\t\t<v-btn text tile @click=\"openDenyDialog\">\r\n\t\t\t\t\t\t\t<v-icon> mdi-close </v-icon>\r\n\t\t\t\t\t\t\t{{ $t(\"label.deny\") }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</v-list-item>\r\n\t\t\t\t</div>\r\n\t\t\t</v-col>\r\n\t\t</v-row>\r\n\t\t<v-data-table\r\n\t\t\tv-model=\"selected\"\r\n\t\t\t:headers=\"headers\"\r\n\t\t\t:items=\"listRequestData\"\r\n\t\t\t:single-select=\"singleSelect\"\r\n\t\t\titem-key=\"id\"\r\n\t\t\tshow-select\r\n\t\t\t:search=\"search\"\r\n\t\t\t:custom-filter=\"customFilter\"\r\n\t\t\tloading=\"true\"\r\n\t\t\t:loading-text=\"$t('label.loading')\"\r\n\t\t>\r\n\t\t\t<template v-slot:[`body.prepend`]>\r\n\t\t\t\t<v-divider></v-divider>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"requestDataCode\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.requestDataCode')\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"requestDataName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.requestDataName')\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-select\r\n\t\t\t\t\t\t\tv-model=\"isActive\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t:items=\"filterItems\"\r\n\t\t\t\t\t\t\tlabel=\"Được sử dụng\"\r\n\t\t\t\t\t\t></v-select>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"createdName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\tlabel=\"Người tạo\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-menu\r\n\t\t\t\t\t\t\tv-model=\"showPicker\"\r\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\r\n\t\t\t\t\t\t\tmax-width=\"290\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t:value=\"formatDateFns\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.created_date')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\t\t@click:clear=\"createdDate = null\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t\t\tv-model=\"createdDate\"\r\n\t\t\t\t\t\t\t\t@change=\"showPicker = false\"\r\n\t\t\t\t\t\t\t\tno-title\r\n\t\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\t\trange\r\n\t\t\t\t\t\t\t></v-date-picker>\r\n\t\t\t\t\t\t</v-menu>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.actions`]=\"{ item }\">\r\n\t\t\t\t<v-btn\r\n\t\t\t\t\ticon\r\n\t\t\t\t\tclass=\"mr-2\"\r\n\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t:to=\"{ path: `/phieu-yeu-cau/${item.id}/chi-tiet` }\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<v-icon> mdi-pencil-circle </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn icon color=\"red\" @click=\"deleteItem(item)\">\r\n\t\t\t\t\t<v-icon> mdi-close-circle </v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</template>\r\n\t\t\t<template\r\n\t\t\t\tv-for=\"header in headers.filter((header) =>\r\n\t\t\t\t\theader.hasOwnProperty('formatter'),\r\n\t\t\t\t)\"\r\n\t\t\t\tv-slot:[`item.${header.value}`]=\"{ headers, value }\"\r\n\t\t\t>\r\n\t\t\t\t{{ header.formatter(value) }}\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.isActive`]=\"{ item }\">\r\n\t\t\t\t<v-simple-checkbox\r\n\t\t\t\t\tv-model=\"item.isActive\"\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t></v-simple-checkbox>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:no-data>\r\n\t\t\t\t<h3>{{ $t(\"message.no_data\") }}</h3>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t\t<v-dialog v-model=\"dialog.deny\" max-width=\"60vw\">\r\n\t\t\t<v-card>\r\n\t\t\t\t<v-toolbar>\r\n\t\t\t\t\t<v-toolbar-title> {{ $t(\"label.deny\") }} </v-toolbar-title>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-toolbar>\r\n\t\t\t\t<v-card-text class=\"mt-5\">\r\n\t\t\t\t\t<v-textarea\r\n\t\t\t\t\t\tlabel=\"Ý kiến/Ghi chú\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</v-textarea>\r\n\t\t\t\t\t<v-file-input\r\n\t\t\t\t\t\tlabel=\"Tải lên\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t></v-file-input>\r\n\t\t\t\t</v-card-text>\r\n\t\t\t\t<v-card-actions>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn color=\"red\" dark @click=\"closeDialog\">\r\n\t\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t\t\t{{ $t(\"button.close\") }}\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t<v-btn color=\"blue\" dark>\r\n\t\t\t\t\t\t<v-icon>mdi-backup-restore</v-icon>\r\n\t\t\t\t\t\t{{ $t(\"label.deny\") }}\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-card-actions>\r\n\t\t\t</v-card>\r\n\t\t</v-dialog>\r\n\t\t<v-dialog v-model=\"dialog.requestmodify\" max-width=\"60vw\">\r\n\t\t\t<v-card>\r\n\t\t\t\t<v-toolbar>\r\n\t\t\t\t\t<v-toolbar-title>\r\n\t\t\t\t\t\t{{ $t(\"button.modify_request\") }}\r\n\t\t\t\t\t</v-toolbar-title>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-toolbar>\r\n\t\t\t\t<v-card-text class=\"mt-5\">\r\n\t\t\t\t\t<v-textarea\r\n\t\t\t\t\t\tlabel=\"Ý kiến/Ghi chú\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</v-textarea>\r\n\t\t\t\t\t<v-file-input\r\n\t\t\t\t\t\tlabel=\"Tải lên\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t></v-file-input>\r\n\t\t\t\t</v-card-text>\r\n\t\t\t\t<v-card-actions>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn color=\"red\" dark @click=\"closeDialog\">\r\n\t\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t\t\tĐóng\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t<v-btn color=\"blue\" dark>\r\n\t\t\t\t\t\t<v-icon>mdi-swap-horizontal</v-icon>\r\n\t\t\t\t\t\tYêu cầu sửa đổi\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-card-actions>\r\n\t\t\t</v-card>\r\n\t\t</v-dialog>\r\n\t\t<v-dialog v-model=\"dialog.approve\" max-width=\"60vw\">\r\n\t\t\t<v-card>\r\n\t\t\t\t<v-toolbar>\r\n\t\t\t\t\t<v-toolbar-title> Phê duyệt </v-toolbar-title>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-toolbar>\r\n\t\t\t\t<v-card-text class=\"mt-5\">\r\n\t\t\t\t\t<v-textarea\r\n\t\t\t\t\t\tlabel=\"Ý kiến/Ghi chú\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</v-textarea>\r\n\t\t\t\t\t<v-file-input\r\n\t\t\t\t\t\tlabel=\"Tải lên\"\r\n\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\tdense\r\n\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t></v-file-input>\r\n\t\t\t\t</v-card-text>\r\n\t\t\t\t<v-card-actions>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn color=\"red\" dark @click=\"closeDialog\">\r\n\t\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t\t\tĐóng\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t<v-btn color=\"blue\" dark>\r\n\t\t\t\t\t\t<v-icon>mdi-check</v-icon>\r\n\t\t\t\t\t\tPhê duyệt\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-card-actions>\r\n\t\t\t</v-card>\r\n\t\t</v-dialog>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport moment from \"moment\";\r\nimport administratorAPI from \"../../administrator/administrator.api\";\r\nimport Breadcrumbs from \"@/components/Breadcrumbs.vue\";\r\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\r\n\r\nexport default {\r\n\tcomponents: { Breadcrumbs, DeleteDialogVue },\r\n\tname: \"VsmFeListrequestform\",\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuser_info: this.getUserInfo(),\r\n\t\t\tlistRequestData: [],\r\n\t\t\tshowPicker: false,\r\n\t\t\tdialogDeleteAll: false,\r\n\t\t\tselected: [],\r\n\t\t\theaders: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Mã YC\",\r\n\t\t\t\t\tvalue: \"requestDataCode\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.requestDataCode) return true;\r\n\t\t\t\t\t\tif (!value) return;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.requestDataCode,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Tên loại YC\",\r\n\t\t\t\t\tvalue: \"requestDataName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.requestDataName) return true;\r\n\t\t\t\t\t\tif (!value) return;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.requestDataName,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.is_active\"),\r\n\t\t\t\t\tvalue: \"isActive\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.used\")) {\r\n\t\t\t\t\t\t\treturn value == true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.unused\")) {\r\n\t\t\t\t\t\t\treturn value == false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.created_name\"),\r\n\t\t\t\t\tvalue: \"createdName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.createdName) return true;\r\n\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(\r\n\t\t\t\t\t\t\t\t\tthis.createdName,\r\n\t\t\t\t\t\t\t\t).toLocaleUpperCase(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.created_date\"),\r\n\t\t\t\t\tvalue: \"createdDate\",\r\n\r\n\t\t\t\t\tformatter: (x) =>\r\n\t\t\t\t\t\tx ? moment(x).format(this.dateFormat) : null,\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.createdDate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.createdDate);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.manipulation\"),\r\n\r\n\t\t\t\t\tvalue: \"actions\",\r\n\t\t\t\t\tsortable: false,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\titems: [],\r\n\t\t\tsearch: \"\",\r\n\t\t\tsingleSelect: false,\r\n\t\t\trequestDataCode: \"\",\r\n\t\t\trequestDataName: \"\",\r\n\t\t\tisDeleting: false,\r\n\t\t\tcreatedName: \"\",\r\n\t\t\tcreatedDate: null,\r\n\t\t\tjson_fields: [],\r\n\t\t\tjson_data: [],\r\n\t\t\tjson_meta: [\r\n\t\t\t\t[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: \"charset\",\r\n\t\t\t\t\t\tvalue: \"utf-8\",\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t],\r\n\t\t\tfilterItems: [\r\n\t\t\t\tthis.$t(\"label.show_all\"),\r\n\t\t\t\tthis.$t(\"label.used\"),\r\n\t\t\t\tthis.$t(\"label.unused\"),\r\n\t\t\t],\r\n\t\t\tdateFormat: \"DD/MM/yyyy\",\r\n\t\t\tisActive: this.$t(\"label.show_all\"),\r\n\t\t\tuserId: null,\r\n\t\t\tdialog: {\r\n\t\t\t\tdelete: false,\r\n\t\t\t\tdeny: false,\r\n\t\t\t\tapprove: false,\r\n\t\t\t\trequestmodify: false,\r\n\t\t\t},\r\n\t\t\trequestFilter: [],\r\n\t\t\trequestAll: [],\r\n\t\t\trequestOverdue: [],\r\n\t\t\trequestAboutExpỉe: [],\r\n\t\t\tallSelect: true,\r\n\t\t\tfilterInprocess: false,\r\n\t\t\tfilterOverdue: false,\r\n\t\t\tfilterAboutExpire: false,\r\n\t\t\theadExcl: \"\",\r\n\t\t\trequestInprocess: false,\r\n\t\t\trequestOver: false,\r\n\t\t\trequestAbout: false,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tformatDateFns() {\r\n\t\t\treturn this.createdDate\r\n\t\t\t\t? moment(this.createdDate).format(this.dateFormat)\r\n\t\t\t\t: \"\";\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tdialog(val) {\r\n\t\t\tval || this.close();\r\n\t\t},\r\n\t\t\"dialog.delete\"(val) {\r\n\t\t\tval || this.closeDelete();\r\n\t\t},\r\n\t\tdialogView(val) {\r\n\t\t\tval || this.closeView();\r\n\t\t},\r\n\t\tdialogDeleteAll(val) {\r\n\t\t\tval || this.closeDeleteAll();\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getRequestForm();\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tasync getRequestForm() {\r\n\t\t\tthis.requestInprocess = false;\r\n\t\t\tthis.requestOver = false;\r\n\t\t\tthis.requestAbout = false;\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequestData(),\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// response = await globalService.getData_Async(\r\n\t\t\t\t// \tadministratorAPI.API_GetAllByUserIdRequestData(\r\n\t\t\t\t// \t\tthis.user_info.id,\r\n\t\t\t\t// \t),\r\n\t\t\t\t// );\r\n\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.requestAll = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.listRequestData = Object.assign([], this.requestAll);\r\n\t\t\t\tthis.sortList(this.listRequestData);\r\n\t\t\t\tthis.headExcl = \"Danh sách phiếu yêu cầu\";\r\n\t\t\t\tthis.json_fields = this.getJsonFields(this.headers);\r\n\t\t\t\tthis.json_data = Object.assign([], this.listRequestData);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcloseDelete() {\r\n\t\t\tthis.dialog.delete = false;\r\n\t\t},\r\n\r\n\t\tcloseDeleteAll() {\r\n\t\t\tthis.dialogDeleteAll = false;\r\n\t\t},\r\n\t\tdeleteAll() {\r\n\t\t\tif (this.selected.length > 0) {\r\n\t\t\t\tthis.dialog.delete = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"label.no_selected\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tonConfirmDelete(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tthis.closeDelete();\r\n\t\t\t} else {\r\n\t\t\t\tif (this.selected) {\r\n\t\t\t\t\tthis.deleteAllConfirm();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteItem(item) {\r\n\t\t\tthis.selected = [item];\r\n\t\t\tthis.dialogDelete = true;\r\n\t\t},\r\n\t\tsortList(arr) {\r\n\t\t\treturn arr.sort((a, b) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tmoment(b.createdDate).toDate().getTime() -\r\n\t\t\t\t\tmoment(a.createdDate).toDate().getTime()\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\tcustomFilter(value, search, item) {\r\n\t\t\treturn !!search && this.match(item, search);\r\n\t\t},\r\n\t\tasync deleteAllConfirm() {\r\n\t\t\tif (this.isDeleting) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isDeleting = true;\r\n\t\t\tthis.selected = this.selected.map((entry) => {\r\n\t\t\t\tentry.isDelete = true;\r\n\t\t\t\treturn entry;\r\n\t\t\t});\r\n\t\t\tlet response = await globalService.postData_Async(\r\n\t\t\t\tadministratorAPI.API_DeleteAllRequestData(),\r\n\t\t\t\tthis.selected,\r\n\t\t\t);\r\n\t\t\tif (!response.state) {\r\n\t\t\t\tthis.toastError(response.message);\r\n\t\t\t}\r\n\t\t\tif (response.state) {\r\n\t\t\t\tthis.isDeleting = true;\r\n\t\t\t\tthis.toastSuccess(this.$t(\"message.delete_success\"));\r\n\t\t\t}\r\n\r\n\t\t\tthis.selected = [];\r\n\t\t\tthis.isDeleting = false;\r\n\t\t\tthis.getRequestForm();\r\n\t\t\tthis.closeDelete();\r\n\t\t},\r\n\t\topenDenyDialog() {\r\n\t\t\tthis.dialog.deny = true;\r\n\t\t},\r\n\t\topenApproveDialog() {\r\n\t\t\tthis.dialog.approve = true;\r\n\t\t},\r\n\t\topenRequestModifyDialog() {\r\n\t\t\tthis.dialog.requestmodify = true;\r\n\t\t},\r\n\t\tcloseDialog() {\r\n\t\t\tthis.dialog.deny = false;\r\n\t\t\tthis.dialog.approve = false;\r\n\t\t\tthis.dialog.requestmodify = false;\r\n\t\t},\r\n\t\tallRequest() {\r\n\t\t\tthis.selected = [];\r\n\t\t\tthis.allSelect = true;\r\n\t\t\tthis.filterInprocess = false;\r\n\t\t\tthis.filterOverdue = false;\r\n\t\t\tthis.filterAboutExpire = false;\r\n\t\t\tthis.listRequestData = Object.assign([], this.requestAll);\r\n\t\t\tthis.headExcl = \"Danh sách phiếu yêu cầu\";\r\n\t\t},\r\n\t\tasync inProcessRequest() {\r\n\t\t\tthis.selected = [];\r\n\t\t\tthis.allSelect = false;\r\n\t\t\tthis.filterInprocess = true;\r\n\t\t\tthis.filterOverdue = false;\r\n\t\t\tthis.filterAboutExpire = false;\r\n\t\t\tif (!this.requestInprocess) {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetRequestInProcessing(\r\n\t\t\t\t\t\tthis.user_info.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis.requestFilter = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.listRequestData = Object.assign([], this.requestFilter);\r\n\r\n\t\t\tthis.sortList(this.listRequestData);\r\n\t\t\tthis.headExcl = \"Danh sách phiếu yêu cầu trong hạn\";\r\n\t\t\tthis.json_fields = this.getJsonFields(this.headers);\r\n\t\t\tthis.json_data = Object.assign([], this.listRequestData);\r\n\t\t\tthis.requestInprocess = true;\r\n\t\t},\r\n\t\tasync overdueRequest() {\r\n\t\t\tthis.selected = [];\r\n\t\t\tthis.allSelect = false;\r\n\t\t\tthis.filterInprocess = false;\r\n\t\t\tthis.filterOverdue = true;\r\n\t\t\tthis.filterAboutExpire = false;\r\n\t\t\tif (!this.requestOver) {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetRequestOverDueByUserId(\r\n\t\t\t\t\t\tthis.user_info.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis.requestOverdue = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.listRequestData = Object.assign([], this.requestOverdue);\r\n\t\t\tthis.sortList(this.listRequestData);\r\n\t\t\tthis.headExcl = \"Danh sách phiếu yêu cầu quá hạn\";\r\n\t\t\tthis.json_fields = this.getJsonFields(this.headers);\r\n\t\t\tthis.json_data = Object.assign([], this.listRequestData);\r\n\t\t\tthis.requestOver = true;\r\n\t\t},\r\n\t\tasync aboutExpireRequest() {\r\n\t\t\tthis.selected = [];\r\n\t\t\tthis.allSelect = false;\r\n\t\t\tthis.filterInprocess = false;\r\n\t\t\tthis.filterOverdue = false;\r\n\t\t\tthis.filterAboutExpire = true;\r\n\t\t\tif (!this.requestAbout) {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetRequestAboutToExpireByUserId(\r\n\t\t\t\t\t\tthis.user_info.id,\r\n\t\t\t\t\t),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\tthis.requestAboutExpỉe = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.listRequestData = Object.assign([], this.requestAboutExpỉe);\r\n\t\t\tthis.sortList(this.listRequestData);\r\n\t\t\tthis.headExcl = \"Danh sách phiếu yêu cầu sắp hết hạn\";\r\n\t\t\tthis.json_fields = this.getJsonFields(this.headers);\r\n\t\t\tthis.json_data = Object.assign([], this.listRequestData);\r\n\t\t\tthis.requestAbout = true;\r\n\t\t},\r\n\t\tgetClassAllSelect() {\r\n\t\t\tif (this.allSelect) {\r\n\t\t\t\treturn \"blue darken-1\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tgetClassFilterInprocess() {\r\n\t\t\tif (this.filterInprocess) {\r\n\t\t\t\treturn \"blue darken-1\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tgetClassFilterAboutExpire() {\r\n\t\t\tif (this.filterAboutExpire) {\r\n\t\t\t\treturn \"blue darken-1\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tgetClassFilterOverdue() {\r\n\t\t\tif (this.filterOverdue) {\r\n\t\t\t\treturn \"blue darken-1\";\r\n\t\t\t}\r\n\t\t\treturn \"\";\r\n\t\t},\r\n\t\tgetFilenameExcel() {\r\n\t\t\tlet str = \"Phieu_yeu_cau_\" + new Date().getTime() + \".xls\";\r\n\t\t\treturn str;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}