{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport administratorAPI from \"../administrator.api\";\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\nimport globalService from \"@/services/global.service\";\nexport default {\n  name: \"ViewFileVue\",\n  components: {\n    VuePerfectScrollbar: VuePerfectScrollbar\n  },\n  props: {\n    file: {}\n  },\n  watch: {\n    file: function file(value) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.m_file = value;\n                _context.next = 3;\n                return _this._getPreviewLink();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  },\n  data: function data() {\n    return {\n      m_file: {},\n      previewLink: \"\"\n    };\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this2.m_file = _this2.file;\n              _context2.next = 3;\n              return _this2._getPreviewLink();\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  methods: {\n    _getPreviewLink: function _getPreviewLink() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response, id;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                id = _this3.m_file.id;\n                _context3.next = 4;\n                return globalService.getData_Async(administratorAPI.API_GetPreviewLink(id));\n\n              case 4:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 7;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 7:\n                _this3.previewLink = response.data;\n                _context3.next = 13;\n                break;\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](0);\n                return _context3.abrupt(\"return\");\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 10]]);\n      }))();\n    },\n    _downloadFileUrl: function _downloadFileUrl(item) {\n      if (!item || !item.idInFileService) {\n        return;\n      }\n\n      var description = JSON.parse(item.description);\n      return administratorAPI.FullAPI_DownloadFileById(item.idInFileService, description.contentType);\n    },\n    downloadFileUrl: function downloadFileUrl(item) {\n      if (!item || !item.idInFileService) {\n        return;\n      }\n\n      return encodeURIComponent(this._downloadFileUrl(item));\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;EACAA,mBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC;IAAAC;EAAA,CAHA;EAIAC;IACAD,IADA,gBACAE,KADA,EACA;MAAA;;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBADA;gBAAA,OAEA,uBAFA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAmBA;EApBA,CAJA;EA0BAC,IA1BA,kBA0BA;IACA;MAAAC;MAAAC;IAAA;EACA,CA5BA;EA6BAC,OA7BA,qBA6BA;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;cADA;cAAA,OAEA,wBAFA;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAGA,CAhCA;EAiCAC;IACAC,eADA,6BACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAGAC,EAHA,GAGA,gBAHA;gBAAA;gBAAA,OAIAC,4BACAC,uCADA,CAJA;;cAAA;gBAIAC,QAJA;;gBAAA,MAOA,4BAPA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAUA;gBAVA;gBAAA;;cAAA;gBAAA;gBAAA;gBAAA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAcA,CAfA;IAgBAC,gBAhBA,4BAgBAC,IAhBA,EAgBA;MACA;QACA;MACA;;MACA;MACA,iDACAA,oBADA,EAEAC,uBAFA;IAIA,CAzBA;IA0BAC,eA1BA,2BA0BAF,IA1BA,EA0BA;MACA;QACA;MACA;;MACA;IACA;EA/BA;AAjCA","names":["name","components","VuePerfectScrollbar","props","file","watch","value","data","m_file","previewLink","mounted","methods","_getPreviewLink","id","globalService","administratorAPI","response","_downloadFileUrl","item","description","downloadFileUrl"],"sourceRoot":"src/views/modules/administrator/FileManager","sources":["ViewFile.vue"],"sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<v-toolbar elevation=\"0\" color=\"grey lighten-4\">\r\n\t\t\t<v-toolbar-title> {{ $t(\"title.view\") }}</v-toolbar-title>\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</v-toolbar>\r\n\t\t<VuePerfectScrollbar class=\"h-[44rem]\">\r\n\t\t\t<v-card-text>\r\n\t\t\t\t<v-skeleton-loader\r\n\t\t\t\t\tv-if=\"!previewLink\"\r\n\t\t\t\t\tclass=\"mx-auto\"\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\ttype=\"card\"\r\n\t\t\t\t></v-skeleton-loader>\r\n\t\t\t\t<iframe\r\n\t\t\t\t\tv-if=\"previewLink\"\r\n\t\t\t\t\t:src=\"previewLink + '&amp;action=embedview'\"\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\theight=\"750\"\r\n\t\t\t\t\t:title=\"m_file.fileName\"\r\n\t\t\t\t\t>This is an embedded\r\n\t\t\t\t\t<a target=\"_blank\" href=\"https://office.com\"\r\n\t\t\t\t\t\t>Microsoft Office</a\r\n\t\t\t\t\t>\r\n\t\t\t\t\tdocument, powered by\r\n\t\t\t\t\t<a target=\"_blank\" href=\"https://office.com/webapps\"\r\n\t\t\t\t\t\t>Office</a\r\n\t\t\t\t\t>.</iframe\r\n\t\t\t\t>\r\n\t\t\t</v-card-text>\r\n\t\t</VuePerfectScrollbar>\r\n\t\t<v-card-actions>\r\n\t\t\t<v-spacer> </v-spacer>\r\n\t\t\t<v-btn\r\n\t\t\t\televation=\"0\"\r\n\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t@click=\"closeDialog\"\r\n\t\t\t>\r\n\t\t\t\t{{ $t(\"button.cancel\") }}\r\n\t\t\t</v-btn>\r\n\t\t</v-card-actions>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport administratorAPI from \"../administrator.api\";\r\nimport VuePerfectScrollbar from \"vue-perfect-scrollbar\";\r\nimport globalService from \"@/services/global.service\";\r\nexport default {\r\n\tname: \"ViewFileVue\",\r\n\tcomponents: { VuePerfectScrollbar },\r\n\tprops: { file: {} },\r\n\twatch: {\r\n\t\tasync file(value) {\r\n\t\t\tthis.m_file = value;\r\n\t\t\tawait this._getPreviewLink();\r\n\t\t\t// let response;\r\n\t\t\t// let id = value.id;\r\n\t\t\t// if (!id) {\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\t\t\t// try {\r\n\t\t\t// \tresponse = await globalService.getData_Async(\r\n\t\t\t// \t\tadministratorAPI.API_GetPreviewLink(id),\r\n\t\t\t// \t);\r\n\t\t\t// \tif (!response || !response.state) {\r\n\t\t\t// \t\treturn;\r\n\t\t\t// \t}\r\n\t\t\t// \tthis.previewLink = response.data;\r\n\t\t\t// } catch {\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn { m_file: {}, previewLink: \"\" };\r\n\t},\r\n\tasync mounted() {\r\n\t\tthis.m_file = this.file;\r\n\t\tawait this._getPreviewLink();\r\n\t},\r\n\tmethods: {\r\n\t\tasync _getPreviewLink() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tlet id = this.m_file.id;\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetPreviewLink(id),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.previewLink = response.data;\r\n\t\t\t} catch {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_downloadFileUrl(item) {\r\n\t\t\tif (!item || !item.idInFileService) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet description = JSON.parse(item.description);\r\n\t\t\treturn administratorAPI.FullAPI_DownloadFileById(\r\n\t\t\t\titem.idInFileService,\r\n\t\t\t\tdescription.contentType,\r\n\t\t\t);\r\n\t\t},\r\n\t\tdownloadFileUrl(item) {\r\n\t\t\tif (!item || !item.idInFileService) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\treturn encodeURIComponent(this._downloadFileUrl(item));\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}