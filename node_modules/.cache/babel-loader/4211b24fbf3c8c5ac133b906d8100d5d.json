{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.trim.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nexport default {\n  props: {\n    editedItem: {}\n  },\n  components: {},\n  data: function data() {\n    return {\n      organizations: [],\n      selectedItemOrg: [],\n      s_organization: [],\n      sl_organization: [],\n      removedItemOrg: [],\n      selectedOrg: [],\n      removedOrg: [],\n      search_org: \"\",\n      search_org_selected: \"\",\n      user_current: this.getUserInfo(),\n      itemId: this.$route.params.id,\n      listOrganization: [],\n      m_editedItem: {\n        createdDate: new Date(),\n        createdName: \"\",\n        createdOrgName: \"\",\n        createdRankName: \"\",\n        creater: null,\n        description: \"\",\n        id: null,\n        incomingBookCode: \"\",\n        dispatchBookName: \"\",\n        isActive: true,\n        isDelete: false,\n        modifiedDDate: null,\n        modifiedName: \"\",\n        modifier: null,\n        organization: [],\n        organizationCode: \"\",\n        organizationName: \"\",\n        totalDoc: 0\n      }\n    };\n  },\n  watch: {\n    editedItem: function editedItem(value) {\n      this.m_editedItem = value;\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.init();\n\n            case 2:\n              _context.next = 4;\n              return _this.getAllOrganzation();\n\n            case 4:\n              _context.next = 6;\n              return _this.editedItem;\n\n            case 6:\n              _this.m_editedItem = _context.sent;\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  methods: {\n    init: function init() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this2._organizations();\n\n              case 2:\n                _this2.organizations = _context2.sent;\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    getAllOrganzation: function getAllOrganzation() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return globalService.getData_Async(administratorAPI.API_FindAllOrganization());\n\n              case 3:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 6:\n                _this3.listOrganization = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n                _context3.next = 12;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                _this3.toastError(_context3.t0);\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 9]]);\n      }))();\n    },\n    save: function save() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(!_this4.m_editedItem || _this4.m_editedItem.dispatchBookName == \"\")) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 2:\n                _this4.m_editedItem.modified = _this4.user_current;\n                _this4.m_editedItem.modifiedName = _this4.user_current.fullName;\n                _this4.m_editedItem.modifiedDDate = new Date();\n                _context4.prev = 5;\n\n                if (!_this4.m_editedItem.id) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                _context4.next = 9;\n                return globalService.putData_Async(administratorAPI.API_UpdateInComingBook(_this4.m_editedItem.id), _this4.m_editedItem);\n\n              case 9:\n                response = _context4.sent;\n                _context4.next = 18;\n                break;\n\n              case 12:\n                _this4.m_editedItem.creater = _this4.user_current;\n                _this4.m_editedItem.createdName = _this4.user_current.fullName;\n                _this4.m_editedItem.createdDate = new Date();\n                _context4.next = 17;\n                return globalService.postData_Async(administratorAPI.API_CreateInComingBook(), _this4.m_editedItem);\n\n              case 17:\n                response = _context4.sent;\n\n              case 18:\n                if (!(!response || !response.state)) {\n                  _context4.next = 20;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _this4.toastError(_this4.$t(\"error.load\")));\n\n              case 20:\n                _this4.toastSuccess(_this4.$t(\"message.update_success\"));\n\n                _this4.closeDialog();\n\n                _context4.next = 27;\n                break;\n\n              case 24:\n                _context4.prev = 24;\n                _context4.t0 = _context4[\"catch\"](5);\n\n                _this4.toastError(_context4.t0);\n\n              case 27:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[5, 24]]);\n      }))();\n    },\n    searchOrg: function searchOrg() {\n      var _this5 = this;\n\n      console.log(this.search_org);\n      this.organizations = Object.assign([], this.s_organization);\n      this.organizations = this.organizations.filter(function (entry) {\n        return _this5.nonAccentVietnamese(entry.organizationName).toLocaleUpperCase().includes(_this5.nonAccentVietnamese(_this5.search_org).toLocaleUpperCase().trim());\n      });\n    },\n    searchOrgSelected: function searchOrgSelected() {\n      var _this6 = this;\n\n      this.m_editedItem.organization = Object.assign([], this.m_editedItem);\n      this.m_editedItem.organization = this.m_editedItem.organization.filter(function (entry) {\n        return _this6.nonAccentVietnamese(entry.organizationName).toLocaleUpperCase().includes(_this6.nonAccentVietnamese(_this6.search_org_selected).toLocaleUpperCase().trim());\n      });\n    },\n    _organizations: function _organizations() {\n      var _this7 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return globalService.getData_Async(administratorAPI.API_FindAllOrganization());\n\n              case 3:\n                response = _context5.sent;\n\n                if (response) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _this7.toastError(_this7.$t(\"error.load\")));\n\n              case 6:\n                if (response.state) {\n                  _context5.next = 8;\n                  break;\n                }\n\n                return _context5.abrupt(\"return\", _this7.toastError(_this7.$t(\"error.load\")));\n\n              case 8:\n                return _context5.abrupt(\"return\", response.data.filter(function (entry) {\n                  return !entry.isDelete && entry.isActive;\n                }));\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n\n                _this7.toastError(_context5.t0.message);\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[0, 11]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["props","editedItem","components","data","organizations","selectedItemOrg","s_organization","sl_organization","removedItemOrg","selectedOrg","removedOrg","search_org","search_org_selected","user_current","itemId","listOrganization","m_editedItem","createdDate","createdName","createdOrgName","createdRankName","creater","description","id","incomingBookCode","dispatchBookName","isActive","isDelete","modifiedDDate","modifiedName","modifier","organization","organizationCode","organizationName","totalDoc","watch","value","created","methods","init","getAllOrganzation","globalService","administratorAPI","response","save","searchOrg","console","toLocaleUpperCase","includes","trim","searchOrgSelected","_organizations"],"sourceRoot":"src/views/modules/administrator/InCommingBook","sources":["EditBook.vue"],"sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<v-toolbar elevation=\"0\" color=\"grey lighten-4\">\r\n\t\t\t<!-- <v-toolbar-title>\r\n\t\t\t\t{{ $t(\"label.information\") }}\r\n\t\t\t</v-toolbar-title> -->\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn icon @click=\"closeDialog\">\r\n\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</v-toolbar>\r\n\t\t<v-card-text>\r\n\t\t\t<v-container>\r\n\t\t\t\t<vue-tab\r\n\t\t\t\t\t:tabs=\"[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: $t('label.information'),\r\n\t\t\t\t\t\t\ttitle: $t('label.information'),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]\"\r\n\t\t\t\t\t:buttons=\"[]\"\r\n\t\t\t\t></vue-tab>\r\n\t\t\t\t<v-row class=\"mt-4\">\r\n\t\t\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t\t\t<m-text-field\r\n\t\t\t\t\t\t\t:label=\"$t('label.name')\"\r\n\t\t\t\t\t\t\t:value=\"m_editedItem.dispatchBookName\"\r\n\t\t\t\t\t\t\t@value=\"\r\n\t\t\t\t\t\t\t\t(value) => {\r\n\t\t\t\t\t\t\t\t\tm_editedItem.dispatchBookName = value;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</m-text-field>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t<m-text-field\r\n\t\t\t\t\t\t\t:label=\"$t('label.description')\"\r\n\t\t\t\t\t\t\t:value=\"m_editedItem.description\"\r\n\t\t\t\t\t\t\t@value=\"\r\n\t\t\t\t\t\t\t\t(value) => {\r\n\t\t\t\t\t\t\t\t\tm_editedItem.description = value;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</m-text-field>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\r\n\t\t\t\t<vue-tab\r\n\t\t\t\t\t:tabs=\"[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tkey: $t('label.organization_management'),\r\n\t\t\t\t\t\t\ttitle: $t('label.organization_management'),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]\"\r\n\t\t\t\t\t:buttons=\"[]\"\r\n\t\t\t\t></vue-tab>\r\n\t\t\t\t<v-row class=\"mt-4\">\r\n\t\t\t\t\t<v-col>\r\n\t\t\t\t\t\t<vue-select-list\r\n\t\t\t\t\t\t\t:items=\"organizations\"\r\n\t\t\t\t\t\t\t:selected=\"m_editedItem.organization\"\r\n\t\t\t\t\t\t\tkeyName=\"id\"\r\n\t\t\t\t\t\t\tvalueName=\"organizationName\"\r\n\t\t\t\t\t\t\t@change=\"\r\n\t\t\t\t\t\t\t\t(value) => {\r\n\t\t\t\t\t\t\t\t\tm_editedItem.organization = value;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t></vue-select-list>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t</v-container>\r\n\t\t</v-card-text>\r\n\t\t<v-card-actions class=\"white\">\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-btn\r\n\t\t\t\televation=\"0\"\r\n\t\t\t\tcolor=\"blue darken-2\"\r\n\t\t\t\tdark\r\n\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t\t@click=\"save\"\r\n\t\t\t>\r\n\t\t\t\t{{ $t(\"button.ok\") }}\r\n\t\t\t</v-btn>\r\n\t\t\t<v-btn\r\n\t\t\t\televation=\"0\"\r\n\t\t\t\t@click=\"closeDialog\"\r\n\t\t\t\tcolor=\"grey lighten-4\"\r\n\t\t\t\tclass=\"rounded-0\"\r\n\t\t\t>\r\n\t\t\t\t{{ $t(\"button.cancel\") }}\r\n\t\t\t</v-btn>\r\n\t\t</v-card-actions>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\n\r\nexport default {\r\n\tprops: { editedItem: {} },\r\n\tcomponents: {},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\torganizations: [],\r\n\t\t\tselectedItemOrg: [],\r\n\t\t\ts_organization: [],\r\n\t\t\tsl_organization: [],\r\n\t\t\tremovedItemOrg: [],\r\n\t\t\tselectedOrg: [],\r\n\t\t\tremovedOrg: [],\r\n\t\t\tsearch_org: \"\",\r\n\t\t\tsearch_org_selected: \"\",\r\n\t\t\tuser_current: this.getUserInfo(),\r\n\t\t\titemId: this.$route.params.id,\r\n\t\t\tlistOrganization: [],\r\n\t\t\tm_editedItem: {\r\n\t\t\t\tcreatedDate: new Date(),\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tcreatedOrgName: \"\",\r\n\t\t\t\tcreatedRankName: \"\",\r\n\t\t\t\tcreater: null,\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tid: null,\r\n\t\t\t\tincomingBookCode: \"\",\r\n\t\t\t\tdispatchBookName: \"\",\r\n\t\t\t\tisActive: true,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tmodifiedDDate: null,\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tmodifier: null,\r\n\t\t\t\torganization: [],\r\n\t\t\t\torganizationCode: \"\",\r\n\t\t\t\torganizationName: \"\",\r\n\t\t\t\ttotalDoc: 0,\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\teditedItem(value) {\r\n\t\t\tthis.m_editedItem = value;\r\n\t\t},\r\n\t},\r\n\tasync created() {\r\n\t\tawait this.init();\r\n\t\tawait this.getAllOrganzation();\r\n\t\tthis.m_editedItem = await this.editedItem;\r\n\t},\r\n\tmethods: {\r\n\t\tasync init() {\r\n\t\t\tthis.organizations = await this._organizations();\r\n\t\t\t// console.log(\"this.organizations\", this.organizations);\r\n\t\t},\r\n\t\tasync getAllOrganzation() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_FindAllOrganization(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) return;\r\n\t\t\t\tthis.listOrganization = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync save() {\r\n\t\t\tif (\r\n\t\t\t\t!this.m_editedItem ||\r\n\t\t\t\tthis.m_editedItem.dispatchBookName == \"\"\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet response;\r\n\r\n\t\t\tthis.m_editedItem.modified = this.user_current;\r\n\t\t\tthis.m_editedItem.modifiedName = this.user_current.fullName;\r\n\t\t\tthis.m_editedItem.modifiedDDate = new Date();\r\n\t\t\ttry {\r\n\t\t\t\tif (this.m_editedItem.id) {\r\n\t\t\t\t\tresponse = await globalService.putData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_UpdateInComingBook(\r\n\t\t\t\t\t\t\tthis.m_editedItem.id,\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tthis.m_editedItem,\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.m_editedItem.creater = this.user_current;\r\n\t\t\t\t\tthis.m_editedItem.createdName = this.user_current.fullName;\r\n\t\t\t\t\tthis.m_editedItem.createdDate = new Date();\r\n\t\t\t\t\tresponse = await globalService.postData_Async(\r\n\t\t\t\t\t\tadministratorAPI.API_CreateInComingBook(),\r\n\t\t\t\t\t\tthis.m_editedItem,\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif (!response || !response.state)\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\tthis.toastSuccess(this.$t(\"message.update_success\"));\r\n\t\t\t\tthis.closeDialog();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsearchOrg() {\r\n\t\t\tconsole.log(this.search_org);\r\n\r\n\t\t\tthis.organizations = Object.assign([], this.s_organization);\r\n\r\n\t\t\tthis.organizations = this.organizations.filter((entry) => {\r\n\t\t\t\treturn this.nonAccentVietnamese(entry.organizationName)\r\n\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t.includes(\r\n\t\t\t\t\t\tthis.nonAccentVietnamese(this.search_org)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.trim(),\r\n\t\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\tsearchOrgSelected() {\r\n\t\t\tthis.m_editedItem.organization = Object.assign(\r\n\t\t\t\t[],\r\n\t\t\t\tthis.m_editedItem,\r\n\t\t\t);\r\n\t\t\tthis.m_editedItem.organization =\r\n\t\t\t\tthis.m_editedItem.organization.filter((entry) => {\r\n\t\t\t\t\treturn this.nonAccentVietnamese(entry.organizationName)\r\n\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\tthis.nonAccentVietnamese(this.search_org_selected)\r\n\t\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t\t.trim(),\r\n\t\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tasync _organizations() {\r\n\t\t\tlet response;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_FindAllOrganization(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\tif (!response.state) {\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\t\t\t\t}\r\n\t\t\t\treturn response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete && entry.isActive;\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(error.message);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}