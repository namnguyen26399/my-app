{"ast":null,"code":"import _construct from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/construct.js\";\nimport _toConsumableArray from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _typeof from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _objectSpread from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport copy from 'fast-copy';\nimport { deepEqual } from 'fast-equals';\nimport jrefs from './utils/json-refs';\nimport schemaUtils from './utils/schema';\nimport { defaultOptions, iconSets, localizedMessages, formats } from './utils/options';\nimport { getRules } from './utils/rules'; // import isCyclic from './utils/is-cyclic'\n\nimport ObjectContainer from './mixins/ObjectContainer';\nimport DateProperty from './mixins/DateProperty';\nimport SimpleProperty from './mixins/SimpleProperty';\nimport FileProperty from './mixins/FileProperty';\nimport ColorProperty from './mixins/ColorProperty';\nimport SelectProperty from './mixins/SelectProperty';\nimport EditableArray from './mixins/EditableArray';\nimport MarkdownEditor from './mixins/MarkdownEditor';\nimport Tooltip from './mixins/Tooltip';\nimport Validatable from './mixins/Validatable';\nimport Dependent from './mixins/Dependent';\nimport exprEvalParser from './utils/expr-eval-parser';\n\nvar expr = require('property-expr');\n\nvar debugExpr = require('debug')('vjsf:expr');\n\ndebugExpr.log = console.log.bind(console);\nvar mountingIncs = {};\nexport default {\n  name: 'VJsf',\n  // components,\n  mixins: [ObjectContainer, SimpleProperty, DateProperty, ColorProperty, SelectProperty, FileProperty, EditableArray, MarkdownEditor, Tooltip, Validatable, Dependent],\n  inject: ['theme'],\n  props: {\n    schema: {\n      type: Object,\n      required: true\n    },\n    value: {\n      required: true\n    },\n    options: {\n      type: Object\n    },\n    optionsRoot: {\n      type: Object\n    },\n    modelRoot: {\n      type: [Object, Array, String, Number, Boolean]\n    },\n    modelKey: {\n      type: [String, Number],\n      default: 'root'\n    },\n    parentKey: {\n      type: String,\n      default: ''\n    },\n    required: {\n      type: Boolean,\n      default: false\n    },\n    sectionDepth: {\n      type: Number,\n      default: 0\n    },\n    sharedData: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      loading: false,\n      fullSchema: null\n    };\n  },\n  computed: {\n    initialOptions: function initialOptions() {\n      return this.fullKey === 'root' ? this.options || {} : this.optionsRoot;\n    },\n    fullOptions: function fullOptions() {\n      var _this = this;\n\n      var _global = typeof window !== 'undefined' && window || typeof global !== 'undefined' && global || {};\n\n      defaultOptions.locale = this.$vuetify.lang && this.$vuetify.lang.current || 'en';\n      defaultOptions.defaultLocale = this.$vuetify.lang && this.$vuetify.lang.defaultLocale || 'en';\n      var fullOptions = Object.assign({}, defaultOptions, this.options || {}, this.resolvedSchema['x-options'] || {});\n\n      fullOptions.markdown = fullOptions.markdown || _global.markdownit && function (text) {\n        return text ? _global.markdownit(fullOptions.markdownit).render(text) : '';\n      } || function (text) {\n        return text || '';\n      };\n\n      fullOptions.memMarkdown = fullOptions.memMarkdown || function (text) {\n        _this._vjsf_markdown = _this._vjsf_markdown || {};\n        var key = text + '';\n        _this._vjsf_markdown[key] = _this._vjsf_markdown[key] || fullOptions.markdown(text);\n        return _this._vjsf_markdown[key];\n      };\n\n      fullOptions.httpLib = fullOptions.httpLib || this.axios || this.$http || this.$axios || _global.axios; // validator function generator is either given or prepared using ajv if present in the context\n\n      if (!fullOptions.validator) {\n        var ajvLocalize = fullOptions.ajvLocalize || _global.ajvLocalize;\n        var ajvAddFormats = fullOptions.ajvAddFormats || _global.ajvAddFormats;\n        var localizeAjv = !!ajvLocalize && fullOptions.locale && ajvLocalize[fullOptions.locale];\n        var ajv = fullOptions.ajv;\n\n        if (!ajv) {\n          var Ajv = fullOptions.Ajv || _global.Ajv || _global.ajv7 && _global.ajv7.default || _global.ajv2019 && _global.ajv2019.default; // TODO: use strict mode but remove our x-* annotations before\n\n          if (Ajv) {\n            ajv = new Ajv(localizeAjv ? {\n              allErrors: true,\n              messages: false,\n              strict: false\n            } : {\n              strict: false\n            });\n            if (ajvAddFormats) ajvAddFormats(ajv);\n            ajv.addFormat('hexcolor', /^#[0-9A-Fa-f]{6,8}$/);\n          }\n        }\n\n        if (ajv) {\n          fullOptions.validator = function (schema) {\n            var validate = ajv.compile(schema);\n            return function (model) {\n              var valid = validate(model);\n\n              if (!valid) {\n                if (localizeAjv) {\n                  ajvLocalize[fullOptions.locale](validate.errors);\n                }\n\n                return ajv.errorsText(validate.errors, {\n                  dataVar: ''\n                });\n              }\n            };\n          };\n        }\n      }\n\n      fullOptions.iconfont = this.$vuetify.icons && this.$vuetify.icons.iconfont || 'mdi'; // importing default icon fonts from vuetify\n\n      if (!fullOptions.defaultIcons) {\n        var vuetifyCustomIcons = {};\n\n        for (var _i = 0, _Object$entries = Object.entries(this.$vuetify.icons.values); _i < _Object$entries.length; _i++) {\n          var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n              key = _Object$entries$_i[0],\n              value = _Object$entries$_i[1];\n\n          vuetifyCustomIcons[key] = value.props ? value.props.name : value;\n        }\n\n        fullOptions.defaultIcons = _objectSpread(_objectSpread({}, iconSets[fullOptions.iconfont]), vuetifyCustomIcons);\n        fullOptions.icons = _objectSpread(_objectSpread({}, fullOptions.defaultIcons), fullOptions.icons);\n      }\n\n      fullOptions.messages = _objectSpread(_objectSpread(_objectSpread({}, localizedMessages[fullOptions.defaultLocale] || localizedMessages.en), localizedMessages[fullOptions.locale] || localizedMessages.en), fullOptions.messages);\n      fullOptions.formats = _objectSpread(_objectSpread({}, formats), fullOptions.formats);\n      if (fullOptions.deleteReadOnly) fullOptions.hideReadOnly = true;\n      return fullOptions;\n    },\n    resolvedSchema: function resolvedSchema() {\n      if (this.modelKey === 'root') {\n        var options = this.options || {};\n        var locale = options.locale || options.defaultLocale || 'en';\n        var defaultLocale = options.defaultLocale || 'en';\n        return jrefs.resolve(this.schema, {\n          '~$locale~': locale === defaultLocale ? locale : [locale, defaultLocale]\n        });\n      } else {\n        return this.schema;\n      }\n    },\n    htmlDescription: function htmlDescription() {\n      return this.fullOptions.markdown(this.fullSchema && this.fullSchema.description);\n    },\n    fullKey: function fullKey() {\n      return (this.parentKey + this.modelKey).replace('root.', '');\n    },\n    label: function label() {\n      if (!this.fullSchema) return;\n      if ((this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem) && this.fullOptions.hideReadOnlyLabels) return;\n      return this.fullSchema.title || (typeof this.modelKey === 'string' ? this.modelKey : '');\n    },\n    display: function display() {\n      if (!this.fullSchema) return;\n      return this.modelKey === 'root' && this.fullOptions.rootDisplay ? this.fullOptions.rootDisplay : this.fullSchema['x-display'];\n    },\n    customTag: function customTag() {\n      if (!this.fullSchema) return;\n      return this.fullSchema['x-tag'];\n    },\n    rules: function rules() {\n      if (!this.fullSchema) return;\n      return getRules(this.schema, this.fullSchema, this.fullOptions, this.required, this.isOneOfSelect);\n    },\n    disabled: function disabled() {\n      if (!this.fullSchema) return;\n      return this.fullOptions.disableAll || this.fullSchema.readOnly;\n    },\n    separator: function separator() {\n      if (!this.fullSchema && this.fullSchema.type !== 'string') return;\n      return this.fullSchema.separator || this.fullSchema['x-separator'];\n    },\n    slotName: function slotName() {\n      if (!this.fullSchema) return;\n      return this.fullSchema['x-display'] && this.fullSchema['x-display'].startsWith('custom-') ? this.fullSchema['x-display'] : this.fullKey;\n    },\n    slotParams: function slotParams() {\n      var _this2 = this;\n\n      if (!this.fullSchema) return;\n      return {\n        value: this.value,\n        modelKey: this.modelKey,\n        schema: this.schema,\n        fullKey: this.fullKey,\n        fullSchema: this.fullSchema,\n        label: this.label,\n        disabled: this.disabled,\n        required: this.required,\n        rules: this.rules,\n        options: this.fullOptions,\n        htmlDescription: this.htmlDescription,\n        on: {\n          input: function input(e) {\n            return _this2.input(e instanceof Event ? e.target.value : e);\n          },\n          change: function change() {\n            return _this2.change();\n          }\n        }\n      };\n    },\n    dashKey: function dashKey() {\n      return this.fullKey.replace(/\\./g, '-');\n    },\n    // props common to many vuetify fields\n    commonFieldProps: function commonFieldProps() {\n      if (!this.fullSchema) return;\n      var value = this.separator && typeof this.value === 'string' ? this.value.split(this.separator) : this.value;\n      return _objectSpread(_objectSpread(_objectSpread({\n        value: value,\n        inputValue: value,\n        label: this.label,\n        name: this.fullKey,\n        id: this.fullOptions.idPrefix + this.dashKey,\n        disabled: this.disabled,\n        rules: this.rules,\n        required: this.required,\n        autofocus: this.fullOptions.autofocus\n      }, this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem ? this.fullOptions.readOnlyFieldProps : {}), this.fullOptions.fieldProps), this.fullSchema['x-props']);\n    },\n    propertyClass: function propertyClass() {\n      if (!this.fullSchema) return;\n      return \"vjsf-property vjsf-property-\".concat(this.dashKey, \" pa-0 \").concat(this.fullSchema['x-class'] || '', \" \").concat(this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem ? 'read-only' : '').replace(/ {2}/g, ' ').trim();\n    },\n    xSlots: function xSlots() {\n      if (!this.fullSchema) return;\n      return _objectSpread({}, this.fullSchema['x-slots']);\n    },\n    formattedValue: function formattedValue() {\n      if (!this.fullSchema) return;\n      return this.value && this.fullSchema.format && this.fullOptions.formats[this.fullSchema.format] && this.fullOptions.formats[this.fullSchema.format](this.value, this.fullOptions.locale);\n    },\n    directives: function directives() {\n      if (!this.fullSchema) return;\n      return this.fullSchema['x-directives'];\n    }\n  },\n  watch: {\n    fullSchema: {\n      handler: function handler() {\n        if (!this.fullSchema) return;\n        this.initFromSchema();\n        this.initValidation();\n        this.updateSelectItems();\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    mountingIncs[this.fullKey] = (mountingIncs[this.fullKey] || 0) + 1; // DEVS NOTE: uncomment this when fighting against infinite loops\n    // if infinite loop occurs again have a look here https://github.com/koumoul-dev/vuetify-jsonschema-form/issues/289\n    // and here https://github.com/koumoul-dev/vuetify-jsonschema-form/commit/fba002dea2438f5ea2ff5be1622ac79b35056eff\n\n    /* if (mountingIncs[this.fullKey] === 100) {\n      console.log(mountingIncs)\n      throw new Error('detected infinite mounting loop: ' + this.fullKey)\n    } */\n    // optimize the watcher used to reprocess fullSchema so that we trigger less re-render of components\n\n    var watcher = 'resolvedSchema';\n\n    if (this.resolvedSchema.dependencies || this.resolvedSchema.if) {\n      watcher = function watcher(vm) {\n        return [vm.resolvedSchema, vm.value];\n      };\n    }\n\n    this.$watch(watcher, function () {\n      var fullSchema = schemaUtils.prepareFullSchema(_this3.resolvedSchema, _this3.value, _this3.fullOptions); // kinda hackish but prevents triggering large rendering chains when nothing meaningful changes\n\n      if (!deepEqual(fullSchema, _this3.fullSchema)) _this3.fullSchema = fullSchema;\n    }, {\n      immediate: true,\n      deep: true\n    });\n  },\n  render: function render(h) {\n    this.renderInc = (this.renderInc || 0) + 1; // DEVS NOTE: uncomment this when fighting against infinite loops\n\n    /* if (this.renderInc === 100) {\n      throw new Error('detected infinite rendering loop: ' + this.fullKey)\n    } */\n    // a few cases where we don't render anything\n\n    if (!this.fullSchema) return;\n    if (this.fullSchema.const !== undefined) return;\n    if (this.display === 'hidden') return;\n    if (this.fullSchema.readOnly && this.fullOptions.hideReadOnly) return;\n    if (this.fullOptions.readOnlyArrayItem && this.fullOptions.hideInArrayItem) return;\n    if ((this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem) && this.fullOptions.hideReadOnlyEmpty && [null, undefined, ''].includes(this.value)) return;\n    if (this.fullSchema['x-if'] && !this.getFromExpr(this.fullSchema['x-if'])) return;\n    var children = [];\n    if (this.$scopedSlots.before) children.push(this.$scopedSlots.before(this.slotParams));else if (this.$slots.before) this.$slots.before.forEach(function (node) {\n      return children.push(node);\n    });else if (this.xSlots.before) children.push(h('div', {\n      domProps: {\n        innerHTML: this.fullOptions.memMarkdown(this.xSlots.before)\n      }\n    }));\n\n    if (this.$scopedSlots.default) {\n      children.push(this.$scopedSlots.default(this.slotParams));\n    } else if (this.fullSchema['x-display'] && this.fullSchema['x-display'] && this.$scopedSlots[this.fullSchema['x-display']]) {\n      children.push(this.$scopedSlots[this.fullSchema['x-display']](this.slotParams));\n    } else {\n      var mainChildren = this.renderDateProp(h) || this.renderColorProp(h) || this.renderSelectProp(h) || this.renderFileProp(h) || this.renderMarkdownProp(h) || this.renderSimpleProp(h) || this.renderObjectContainer(h) || this.renderEditableArray(h) || [];\n      mainChildren.forEach(function (child) {\n        return children.push(child);\n      });\n    }\n\n    if (this.$scopedSlots.after) children.push(this.$scopedSlots.after(this.slotParams));else if (this.$slots.after) this.$slots.after.forEach(function (node) {\n      return children.push(node);\n    });else if (this.xSlots.after) {\n      children.push(h('div', {\n        domProps: {\n          innerHTML: this.fullOptions.memMarkdown(this.xSlots.after)\n        }\n      }));\n    }\n\n    var colProps = _objectSpread({}, this.fullOptions.fieldColProps);\n\n    if (this.fullSchema['x-cols']) {\n      if (_typeof(this.fullSchema['x-cols']) === 'object') {\n        colProps = _objectSpread(_objectSpread({}, colProps), this.fullSchema['x-cols']);\n      } else {\n        colProps.cols = this.fullSchema['x-cols'];\n      }\n    }\n\n    return h('v-col', {\n      props: colProps,\n      class: this.propertyClass,\n      style: this.fullSchema['x-style'] || ''\n    }, children);\n  },\n  methods: {\n    cached: function cached(key, params, fn) {\n      this._vjsf_cache = this._vjsf_cache || {};\n\n      if (!this._vjsf_cache[key] || !deepEqual(this._vjsf_cache[key].params, params)) {\n        // console.log('fill cache', key, this.fullKey)\n        this._vjsf_cache[key] = {\n          params: copy(params),\n          value: fn()\n        };\n      } else {// console.log('use cache', key, this.fullKey)\n      }\n\n      return this._vjsf_cache[key].value;\n    },\n    // used by all functionalities that require looking into the data or the context (x-if, fromData, etc)\n    getFromExpr: function getFromExpr(exp) {\n      var expData = this.getExprNode();\n      expData.modelRoot = this.modelRoot;\n      expData.root = this.modelRoot;\n      expData.model = this.value;\n      expData.context = this.options.context;\n      this._vjsf_getters = this._vjsf_getters || {}; // newFunction can only be defined on main options (not x-options to prevent injection)\n\n      if (this.initialOptions.evalMethod === 'newFunction') {\n        var _this$_vjsf_getters;\n\n        debugExpr(\"evaluate expression \\\"\".concat(exp, \"\\\" with newFunction method\"), expData); // use a powerful meta-programming approach with \"new Function\", not safe if the schema is user-submitted\n        // eslint-disable-next-line no-new-func\n\n        this._vjsf_getters[exp] = this._vjsf_getters[exp] || _construct(Function, _toConsumableArray(Object.keys(expData)).concat([\"return \".concat(exp)]));\n\n        var result = (_this$_vjsf_getters = this._vjsf_getters)[exp].apply(_this$_vjsf_getters, _toConsumableArray(Object.values(expData)));\n\n        debugExpr(\"result\", result);\n        return result;\n      } else if (this.fullOptions.evalMethod === 'evalExpr') {\n        debugExpr(\"evaluate expression \\\"\".concat(exp, \"\\\" with exprEval method\"), expData); // TODO: conserve compiled expression for reuse ?\n\n        var _result = exprEvalParser.evaluate(exp, expData);\n\n        debugExpr(_result);\n        return _result;\n      } else {\n        exp = this.prefixExpr(exp);\n        debugExpr(\"evaluate expression \\\"\".concat(exp, \"\\\" with propertyExpr method\"), expData); // otherwise a safer but not as powerful deep getter method\n\n        this._vjsf_getters[exp] = this._vjsf_getters[exp] || expr.getter(exp, true);\n\n        var _result2 = this._vjsf_getters[exp](expData);\n\n        debugExpr(\"result\", _result2);\n        return _result2;\n      }\n    },\n    // used by getFromExpr to support simpler expressions that look into the root model by default\n    prefixExpr: function prefixExpr(key) {\n      if (key.startsWith('context.') || key.startsWith('model.') || key.startsWith('value.') || key.startsWith('modelRoot.') || key.startsWith('root.') || key.startsWith('parent.')) return key; // no specific prefix found, we use modelRoot for retro-compatibility\n\n      if (this.modelRoot) return 'root.' + key;\n      return 'model.' + key;\n    },\n    renderPropSlots: function renderPropSlots(h) {\n      var _this4 = this;\n\n      var slots = [];\n      Object.keys(this.xSlots).forEach(function (slot) {\n        slots.push(h('div', {\n          slot: slot,\n          domProps: {\n            innerHTML: _this4.fullOptions.memMarkdown(_this4.xSlots[slot])\n          }\n        }));\n      });\n      Object.keys(this.$slots).forEach(function (slot) {\n        slots.push(h('template', {\n          slot: slot\n        }, _this4.$slots[slot]));\n      });\n      return slots;\n    },\n    change: function change() {\n      var _this5 = this;\n\n      var fastForward = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (!this.changed) return; // let input events be interpreted before sending this.value in change event\n\n      this.$nextTick(function () {\n        _this5.updateSelectItems();\n\n        if (fastForward) _this5.fastForwardEvent('change-child', {\n          fullKey: _this5.fullKey,\n          value: _this5.value\n        });\n\n        _this5.$emit('change', _this5.value);\n\n        _this5.changed = false;\n      });\n    },\n    input: function input(value) {\n      var initial = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var fastForward = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      if (Array.isArray(value) && this.separator) value = value.join(this.separator);\n\n      if (value === null || value === undefined) {\n        if (this.fullSchema.nullable) {\n          if (this.value !== null) {\n            this.changed = true;\n            if (fastForward) this.fastForwardEvent('input-child', {\n              fullKey: this.fullKey,\n              value: null,\n              oldValue: this.value\n            });\n            this.$emit('input', null);\n          } else if (initial) {\n            if (fastForward) this.fastForwardEvent('input-child', {\n              fullKey: this.fullKey,\n              value: null,\n              oldValue: this.value\n            });\n            this.$emit('input', null);\n          }\n        } else {\n          if (this.value !== undefined) {\n            this.changed = true;\n            if (fastForward) this.fastForwardEvent('input-child', {\n              fullKey: this.fullKey,\n              value: undefined,\n              oldValue: this.value\n            });\n            this.$emit('input', undefined);\n          }\n        }\n      } else {\n        if (!deepEqual(value, this.value)) {\n          this.changed = true; // console.log(this.fullKey, isCyclic(value), value)\n\n          if (fastForward) this.fastForwardEvent('input-child', {\n            fullKey: this.fullKey,\n            value: value,\n            oldValue: this.value\n          });\n          this.$emit('input', value);\n        }\n      }\n    },\n    fixValueType: function fixValueType(value, schema) {\n      if ([null, undefined].includes(value)) return value;\n      if (schema.type === 'string' && typeof value !== 'string') return undefined;\n      if (schema.type === 'integer' && typeof value !== 'number') return undefined;\n      if (schema.type === 'number' && typeof value !== 'number') return undefined;\n      if (schema.type === 'boolean' && typeof value !== 'boolean') return undefined;\n      if (schema.type === 'array' && !Array.isArray(value)) return undefined;\n      if (schema.type === 'object' && (_typeof(value) !== 'object' || Array.isArray(value))) return undefined;\n      return value;\n    },\n    defaultValue: function defaultValue(schema) {\n      if (schema.readOnly && this.fullOptions.deleteReadOnly) return undefined;\n      if (schema.type === 'object' && !schema['x-fromUrl'] && !schema['x-fromData'] && !schema.enum) return {};\n      if (schema.type === 'array') return [];\n      return null;\n    },\n    fixProperties: function fixProperties(value) {\n      var _this6 = this;\n\n      if (this.fullSchema.type !== 'object' || !value) return value;\n      var nonSchematized = (!this.fullSchema.properties || !this.fullSchema.properties.length) && (!Object.keys(this.subModels).length || !!this.fullSchema['x-fromData'] || !!this.fullSchema['x-fromUrl']);\n      if (nonSchematized) return value;\n      value = _objectSpread({}, value); // cleanup extra properties\n\n      if (this.fullOptions.removeAdditionalProperties || this.fullSchema.additionalProperties === false) {\n        Object.keys(value).forEach(function (key) {\n          if (!(_this6.fullSchema.properties || []).find(function (p) {\n            return p.key === key;\n          })) {\n            // console.log(`Remove key ${this.modelKey}.${key}`)\n            delete value[key];\n          }\n        });\n      } // apply submodels\n\n\n      Object.keys(this.subModels).forEach(function (subModel) {\n        Object.keys(_this6.subModels[subModel]).forEach(function (key) {\n          // special case, ignore subschema switch key coming from another submodel\n          var localProperty = _this6.fullSchema.properties.find(function (p) {\n            return p.key === key;\n          });\n\n          if (localProperty && localProperty.const) return;\n          if (value[key] === _this6.subModels[subModel][key]) return;\n          value[key] = _this6.subModels[subModel][key];\n        });\n      });\n      return value;\n    },\n    initFromSchema: function initFromSchema() {\n      // initiallyDefined will by used in Validatable.js to perform initial validation or not\n      this.initiallyDefined = this.value !== undefined && this.value !== null; // we cannot consider empty objects and empty arrays as \"defined\" as they might have been initialized by vjsf itself\n\n      if (this.fullSchema.type === 'array') this.initiallyDefined = !!(this.value && this.value.length);\n      if (this.fullSchema.type === 'object') this.initiallyDefined = !!(this.value && Object.keys(this.value).length); // console.log('Init from schema', this.modelKey)\n\n      if (this.fullSchema.readOnly && this.fullOptions.deleteReadOnly) {\n        return this.input(undefined);\n      }\n\n      var value = this.value; // create empty objects\n\n      if (this.fullSchema.type === 'object' && [undefined, null].includes(value) && !this.isSelectProp) {\n        value = {};\n      } // in the special case of objects based on select remove empty objects\n\n\n      if (this.fullSchema.type === 'object' && this.isSelectProp && value && Object.keys(value).length === 0) {\n        value = undefined;\n      } // const always wins\n\n\n      if (this.fullSchema.const !== undefined) value = this.fullSchema.const;\n      this.initSelectProp(value);\n      this.initObjectContainer(value); // Cleanup arrays of empty items\n\n      if (this.fullSchema.type === 'array') {\n        value = this.value.filter(function (item) {\n          return ![undefined, null].includes(item);\n        });\n      }\n\n      return this.input(this.fixProperties(value), true);\n    }\n  }\n};","map":{"version":3,"names":["copy","deepEqual","jrefs","schemaUtils","defaultOptions","iconSets","localizedMessages","formats","getRules","ObjectContainer","DateProperty","SimpleProperty","FileProperty","ColorProperty","SelectProperty","EditableArray","MarkdownEditor","Tooltip","Validatable","Dependent","exprEvalParser","expr","require","debugExpr","log","console","bind","mountingIncs","name","mixins","inject","props","schema","type","Object","required","value","options","optionsRoot","modelRoot","Array","String","Number","Boolean","modelKey","default","parentKey","sectionDepth","sharedData","data","loading","fullSchema","computed","initialOptions","fullKey","fullOptions","_global","window","global","locale","$vuetify","lang","current","defaultLocale","assign","resolvedSchema","markdown","markdownit","text","render","memMarkdown","_vjsf_markdown","key","httpLib","axios","$http","$axios","validator","ajvLocalize","ajvAddFormats","localizeAjv","ajv","Ajv","ajv7","ajv2019","allErrors","messages","strict","addFormat","validate","compile","model","valid","errors","errorsText","dataVar","iconfont","icons","defaultIcons","vuetifyCustomIcons","entries","values","en","deleteReadOnly","hideReadOnly","resolve","htmlDescription","description","replace","label","readOnly","readOnlyArrayItem","hideReadOnlyLabels","title","display","rootDisplay","customTag","rules","isOneOfSelect","disabled","disableAll","separator","slotName","startsWith","slotParams","on","input","e","Event","target","change","dashKey","commonFieldProps","split","inputValue","id","idPrefix","autofocus","readOnlyFieldProps","fieldProps","propertyClass","trim","xSlots","formattedValue","format","directives","watch","handler","initFromSchema","initValidation","updateSelectItems","mounted","watcher","dependencies","if","vm","$watch","prepareFullSchema","immediate","deep","h","renderInc","const","undefined","hideInArrayItem","hideReadOnlyEmpty","includes","getFromExpr","children","$scopedSlots","before","push","$slots","forEach","node","domProps","innerHTML","mainChildren","renderDateProp","renderColorProp","renderSelectProp","renderFileProp","renderMarkdownProp","renderSimpleProp","renderObjectContainer","renderEditableArray","child","after","colProps","fieldColProps","cols","class","style","methods","cached","params","fn","_vjsf_cache","exp","expData","getExprNode","root","context","_vjsf_getters","evalMethod","Function","keys","result","evaluate","prefixExpr","getter","renderPropSlots","slots","slot","fastForward","changed","$nextTick","fastForwardEvent","$emit","initial","isArray","join","nullable","oldValue","fixValueType","defaultValue","enum","fixProperties","nonSchematized","properties","length","subModels","removeAdditionalProperties","additionalProperties","find","p","subModel","localProperty","initiallyDefined","isSelectProp","initSelectProp","initObjectContainer","filter","item"],"sources":["C:/Users/nam/OneDrive/Máy tính/New folder/node_modules/@koumoul/vjsf/lib/VJsfNoDeps.js"],"sourcesContent":["import copy from 'fast-copy'\nimport { deepEqual } from 'fast-equals'\nimport jrefs from './utils/json-refs'\nimport schemaUtils from './utils/schema'\nimport { defaultOptions, iconSets, localizedMessages, formats } from './utils/options'\nimport { getRules } from './utils/rules'\n// import isCyclic from './utils/is-cyclic'\nimport ObjectContainer from './mixins/ObjectContainer'\nimport DateProperty from './mixins/DateProperty'\nimport SimpleProperty from './mixins/SimpleProperty'\nimport FileProperty from './mixins/FileProperty'\nimport ColorProperty from './mixins/ColorProperty'\nimport SelectProperty from './mixins/SelectProperty'\nimport EditableArray from './mixins/EditableArray'\nimport MarkdownEditor from './mixins/MarkdownEditor'\nimport Tooltip from './mixins/Tooltip'\nimport Validatable from './mixins/Validatable'\nimport Dependent from './mixins/Dependent'\nimport exprEvalParser from './utils/expr-eval-parser'\nconst expr = require('property-expr')\n\nconst debugExpr = require('debug')('vjsf:expr')\ndebugExpr.log = console.log.bind(console)\n\nconst mountingIncs = {}\n\nexport default {\n  name: 'VJsf',\n  // components,\n  mixins: [\n    ObjectContainer,\n    SimpleProperty,\n    DateProperty,\n    ColorProperty,\n    SelectProperty,\n    FileProperty,\n    EditableArray,\n    MarkdownEditor,\n    Tooltip,\n    Validatable,\n    Dependent\n  ],\n  inject: ['theme'],\n  props: {\n    schema: { type: Object, required: true },\n    value: { required: true },\n    options: { type: Object },\n    optionsRoot: { type: Object },\n    modelRoot: { type: [Object, Array, String, Number, Boolean] },\n    modelKey: { type: [String, Number], default: 'root' },\n    parentKey: { type: String, default: '' },\n    required: { type: Boolean, default: false },\n    sectionDepth: { type: Number, default: 0 },\n    sharedData: { type: Object, default: () => ({}) }\n  },\n  data() {\n    return {\n      loading: false,\n      fullSchema: null\n    }\n  },\n  computed: {\n    initialOptions() {\n      return this.fullKey === 'root' ? (this.options || {}) : this.optionsRoot\n    },\n    fullOptions() {\n      const _global = (typeof window !== 'undefined' && window) || (typeof global !== 'undefined' && global) || {}\n      defaultOptions.locale = (this.$vuetify.lang && this.$vuetify.lang.current) || 'en'\n      defaultOptions.defaultLocale = (this.$vuetify.lang && this.$vuetify.lang.defaultLocale) || 'en'\n      const fullOptions = Object.assign({}, defaultOptions, this.options || {}, this.resolvedSchema['x-options'] || {})\n\n      fullOptions.markdown = fullOptions.markdown ||\n        (_global.markdownit && (text => text ? _global.markdownit(fullOptions.markdownit).render(text) : '')) ||\n        ((text) => text || '')\n      fullOptions.memMarkdown = fullOptions.memMarkdown || (text => {\n        this._vjsf_markdown = this._vjsf_markdown || {}\n        const key = text + ''\n        this._vjsf_markdown[key] = this._vjsf_markdown[key] || fullOptions.markdown(text)\n        return this._vjsf_markdown[key]\n      })\n\n      fullOptions.httpLib = fullOptions.httpLib || this.axios || this.$http || this.$axios || _global.axios\n\n      // validator function generator is either given or prepared using ajv if present in the context\n      if (!fullOptions.validator) {\n        const ajvLocalize = fullOptions.ajvLocalize || _global.ajvLocalize\n        const ajvAddFormats = fullOptions.ajvAddFormats || _global.ajvAddFormats\n        const localizeAjv = !!ajvLocalize && fullOptions.locale && ajvLocalize[fullOptions.locale]\n        let ajv = fullOptions.ajv\n        if (!ajv) {\n          const Ajv = fullOptions.Ajv || _global.Ajv || (_global.ajv7 && _global.ajv7.default) || (_global.ajv2019 && _global.ajv2019.default)\n          // TODO: use strict mode but remove our x-* annotations before\n          if (Ajv) {\n            ajv = new Ajv(localizeAjv ? { allErrors: true, messages: false, strict: false } : { strict: false })\n            if (ajvAddFormats) ajvAddFormats(ajv)\n            ajv.addFormat('hexcolor', /^#[0-9A-Fa-f]{6,8}$/)\n          }\n        }\n        if (ajv) {\n          fullOptions.validator = (schema) => {\n            const validate = ajv.compile(schema)\n            return (model) => {\n              const valid = validate(model)\n              if (!valid) {\n                if (localizeAjv) {\n                  ajvLocalize[fullOptions.locale](validate.errors)\n                }\n                return ajv.errorsText(validate.errors, { dataVar: '' })\n              }\n            }\n          }\n        }\n      }\n      fullOptions.iconfont = (this.$vuetify.icons && this.$vuetify.icons.iconfont) || 'mdi'\n      // importing default icon fonts from vuetify\n      if (!fullOptions.defaultIcons) {\n        const vuetifyCustomIcons = {}\n        for (const [key, value] of Object.entries(this.$vuetify.icons.values)) {\n          vuetifyCustomIcons[key] = value.props ? value.props.name : value\n        }\n        fullOptions.defaultIcons = { ...iconSets[fullOptions.iconfont], ...vuetifyCustomIcons }\n        fullOptions.icons = { ...fullOptions.defaultIcons, ...fullOptions.icons }\n      }\n\n      fullOptions.messages = { ...(localizedMessages[fullOptions.defaultLocale] || localizedMessages.en), ...(localizedMessages[fullOptions.locale] || localizedMessages.en), ...fullOptions.messages }\n      fullOptions.formats = { ...formats, ...fullOptions.formats }\n      if (fullOptions.deleteReadOnly) fullOptions.hideReadOnly = true\n      return fullOptions\n    },\n    resolvedSchema() {\n      if (this.modelKey === 'root') {\n        const options = this.options || {}\n        const locale = options.locale || options.defaultLocale || 'en'\n        const defaultLocale = options.defaultLocale || 'en'\n        return jrefs.resolve(\n          this.schema,\n          { '~$locale~': locale === defaultLocale ? locale : [locale, defaultLocale] }\n        )\n      } else {\n        return this.schema\n      }\n    },\n    htmlDescription() {\n      return this.fullOptions.markdown(this.fullSchema && this.fullSchema.description)\n    },\n    fullKey() {\n      return (this.parentKey + this.modelKey).replace('root.', '')\n    },\n    label() {\n      if (!this.fullSchema) return\n      if ((this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem) && this.fullOptions.hideReadOnlyLabels) return\n      return this.fullSchema.title || (typeof this.modelKey === 'string' ? this.modelKey : '')\n    },\n    display() {\n      if (!this.fullSchema) return\n      return this.modelKey === 'root' && this.fullOptions.rootDisplay ? this.fullOptions.rootDisplay : this.fullSchema['x-display']\n    },\n    customTag() {\n      if (!this.fullSchema) return\n      return this.fullSchema['x-tag']\n    },\n    rules() {\n      if (!this.fullSchema) return\n      return getRules(this.schema, this.fullSchema, this.fullOptions, this.required, this.isOneOfSelect)\n    },\n    disabled() {\n      if (!this.fullSchema) return\n      return this.fullOptions.disableAll || this.fullSchema.readOnly\n    },\n    separator() {\n      if (!this.fullSchema && this.fullSchema.type !== 'string') return\n      return this.fullSchema.separator || this.fullSchema['x-separator']\n    },\n    slotName() {\n      if (!this.fullSchema) return\n      return this.fullSchema['x-display'] && this.fullSchema['x-display'].startsWith('custom-') ? this.fullSchema['x-display'] : this.fullKey\n    },\n    slotParams() {\n      if (!this.fullSchema) return\n      return {\n        value: this.value,\n        modelKey: this.modelKey,\n        schema: this.schema,\n        fullKey: this.fullKey,\n        fullSchema: this.fullSchema,\n        label: this.label,\n        disabled: this.disabled,\n        required: this.required,\n        rules: this.rules,\n        options: this.fullOptions,\n        htmlDescription: this.htmlDescription,\n        on: {\n          input: (e) => this.input(e instanceof Event ? e.target.value : e),\n          change: () => this.change()\n        }\n      }\n    },\n    dashKey() {\n      return this.fullKey.replace(/\\./g, '-')\n    },\n    // props common to many vuetify fields\n    commonFieldProps() {\n      if (!this.fullSchema) return\n      const value = this.separator && typeof this.value === 'string' ? this.value.split(this.separator) : this.value\n      return {\n        value,\n        inputValue: value,\n        label: this.label,\n        name: this.fullKey,\n        id: this.fullOptions.idPrefix + this.dashKey,\n        disabled: this.disabled,\n        rules: this.rules,\n        required: this.required,\n        autofocus: this.fullOptions.autofocus,\n        ...((this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem) ? this.fullOptions.readOnlyFieldProps : {}),\n        ...this.fullOptions.fieldProps,\n        ...this.fullSchema['x-props']\n      }\n    },\n    propertyClass() {\n      if (!this.fullSchema) return\n      return `vjsf-property vjsf-property-${this.dashKey} pa-0 ${this.fullSchema['x-class'] || ''} ${(this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem) ? 'read-only' : ''}`\n        .replace(/ {2}/g, ' ').trim()\n    },\n    xSlots() {\n      if (!this.fullSchema) return\n      return { ...this.fullSchema['x-slots'] }\n    },\n    formattedValue() {\n      if (!this.fullSchema) return\n      return this.value && this.fullSchema.format && this.fullOptions.formats[this.fullSchema.format] && this.fullOptions.formats[this.fullSchema.format](this.value, this.fullOptions.locale)\n    },\n    directives() {\n      if (!this.fullSchema) return\n      return this.fullSchema['x-directives']\n    }\n  },\n  watch: {\n    fullSchema: {\n      handler() {\n        if (!this.fullSchema) return\n        this.initFromSchema()\n        this.initValidation()\n        this.updateSelectItems()\n      }\n    }\n  },\n  mounted() {\n    mountingIncs[this.fullKey] = (mountingIncs[this.fullKey] || 0) + 1\n    // DEVS NOTE: uncomment this when fighting against infinite loops\n    // if infinite loop occurs again have a look here https://github.com/koumoul-dev/vuetify-jsonschema-form/issues/289\n    // and here https://github.com/koumoul-dev/vuetify-jsonschema-form/commit/fba002dea2438f5ea2ff5be1622ac79b35056eff\n    /* if (mountingIncs[this.fullKey] === 100) {\n      console.log(mountingIncs)\n      throw new Error('detected infinite mounting loop: ' + this.fullKey)\n    } */\n\n    // optimize the watcher used to reprocess fullSchema so that we trigger less re-render of components\n    let watcher = 'resolvedSchema'\n    if (this.resolvedSchema.dependencies || this.resolvedSchema.if) {\n      watcher = (vm) => [vm.resolvedSchema, vm.value]\n    }\n    this.$watch(watcher, () => {\n      const fullSchema = schemaUtils.prepareFullSchema(this.resolvedSchema, this.value, this.fullOptions)\n      // kinda hackish but prevents triggering large rendering chains when nothing meaningful changes\n      if (!deepEqual(fullSchema, this.fullSchema)) this.fullSchema = fullSchema\n    }, {\n      immediate: true,\n      deep: true\n    })\n  },\n  render(h) {\n    this.renderInc = (this.renderInc || 0) + 1\n    // DEVS NOTE: uncomment this when fighting against infinite loops\n    /* if (this.renderInc === 100) {\n      throw new Error('detected infinite rendering loop: ' + this.fullKey)\n    } */\n\n    // a few cases where we don't render anything\n    if (!this.fullSchema) return\n    if (this.fullSchema.const !== undefined) return\n    if (this.display === 'hidden') return\n    if (this.fullSchema.readOnly && this.fullOptions.hideReadOnly) return\n    if (this.fullOptions.readOnlyArrayItem && this.fullOptions.hideInArrayItem) return\n    if ((this.fullSchema.readOnly || this.fullOptions.readOnlyArrayItem) && this.fullOptions.hideReadOnlyEmpty && [null, undefined, ''].includes(this.value)) return\n    if (this.fullSchema['x-if'] && !this.getFromExpr(this.fullSchema['x-if'])) return\n\n    const children = []\n    if (this.$scopedSlots.before) children.push(this.$scopedSlots.before(this.slotParams))\n    else if (this.$slots.before) this.$slots.before.forEach(node => children.push(node))\n    else if (this.xSlots.before) children.push(h('div', { domProps: { innerHTML: this.fullOptions.memMarkdown(this.xSlots.before) } }))\n\n    if (this.$scopedSlots.default) {\n      children.push(this.$scopedSlots.default(this.slotParams))\n    } else if (this.fullSchema['x-display'] && this.fullSchema['x-display'] && this.$scopedSlots[this.fullSchema['x-display']]) {\n      children.push(this.$scopedSlots[this.fullSchema['x-display']](this.slotParams))\n    } else {\n      const mainChildren = this.renderDateProp(h) ||\n        this.renderColorProp(h) ||\n        this.renderSelectProp(h) ||\n        this.renderFileProp(h) ||\n        this.renderMarkdownProp(h) ||\n        this.renderSimpleProp(h) ||\n        this.renderObjectContainer(h) ||\n        this.renderEditableArray(h) || []\n      mainChildren.forEach(child => children.push(child))\n    }\n\n    if (this.$scopedSlots.after) children.push(this.$scopedSlots.after(this.slotParams))\n    else if (this.$slots.after) this.$slots.after.forEach(node => children.push(node))\n    else if (this.xSlots.after) {\n      children.push(h('div', { domProps: { innerHTML: this.fullOptions.memMarkdown(this.xSlots.after) } }))\n    }\n\n    let colProps = { ...this.fullOptions.fieldColProps }\n    if (this.fullSchema['x-cols']) {\n      if (typeof this.fullSchema['x-cols'] === 'object') {\n        colProps = { ...colProps, ...this.fullSchema['x-cols'] }\n      } else {\n        colProps.cols = this.fullSchema['x-cols']\n      }\n    }\n    return h('v-col', { props: colProps, class: this.propertyClass, style: this.fullSchema['x-style'] || '' }, children)\n  },\n  methods: {\n    cached(key, params, fn) {\n      this._vjsf_cache = this._vjsf_cache || {}\n      if (!this._vjsf_cache[key] || !deepEqual(this._vjsf_cache[key].params, params)) {\n        // console.log('fill cache', key, this.fullKey)\n        this._vjsf_cache[key] = { params: copy(params), value: fn() }\n      } else {\n        // console.log('use cache', key, this.fullKey)\n      }\n      return this._vjsf_cache[key].value\n    },\n    // used by all functionalities that require looking into the data or the context (x-if, fromData, etc)\n    getFromExpr(exp) {\n      const expData = this.getExprNode()\n      expData.modelRoot = this.modelRoot\n      expData.root = this.modelRoot\n      expData.model = this.value\n      expData.context = this.options.context\n\n      this._vjsf_getters = this._vjsf_getters || {}\n\n      // newFunction can only be defined on main options (not x-options to prevent injection)\n      if (this.initialOptions.evalMethod === 'newFunction') {\n        debugExpr(`evaluate expression \"${exp}\" with newFunction method`, expData)\n        // use a powerful meta-programming approach with \"new Function\", not safe if the schema is user-submitted\n        // eslint-disable-next-line no-new-func\n        this._vjsf_getters[exp] = this._vjsf_getters[exp] || new Function(...Object.keys(expData), `return ${exp}`)\n        const result = this._vjsf_getters[exp](...Object.values(expData))\n        debugExpr(`result`, result)\n        return result\n      } else if (this.fullOptions.evalMethod === 'evalExpr') {\n        debugExpr(`evaluate expression \"${exp}\" with exprEval method`, expData)\n        // TODO: conserve compiled expression for reuse ?\n        const result = exprEvalParser.evaluate(exp, expData)\n        debugExpr(result)\n        return result\n      } else {\n        exp = this.prefixExpr(exp)\n        debugExpr(`evaluate expression \"${exp}\" with propertyExpr method`, expData)\n        // otherwise a safer but not as powerful deep getter method\n        this._vjsf_getters[exp] = this._vjsf_getters[exp] || expr.getter(exp, true)\n        const result = this._vjsf_getters[exp](expData)\n        debugExpr(`result`, result)\n        return result\n      }\n    },\n    // used by getFromExpr to support simpler expressions that look into the root model by default\n    prefixExpr(key) {\n      if (key.startsWith('context.') || key.startsWith('model.') || key.startsWith('value.') || key.startsWith('modelRoot.') || key.startsWith('root.') || key.startsWith('parent.')) return key\n      // no specific prefix found, we use modelRoot for retro-compatibility\n      if (this.modelRoot) return 'root.' + key\n      return 'model.' + key\n    },\n    renderPropSlots(h) {\n      const slots = []\n      Object.keys(this.xSlots).forEach(slot => {\n        slots.push(h('div', { slot, domProps: { innerHTML: this.fullOptions.memMarkdown(this.xSlots[slot]) } }))\n      })\n      Object.keys(this.$slots).forEach(slot => {\n        slots.push(h('template', { slot }, this.$slots[slot]))\n      })\n      return slots\n    },\n    change(fastForward = true) {\n      if (!this.changed) return\n      // let input events be interpreted before sending this.value in change event\n      this.$nextTick(() => {\n        this.updateSelectItems()\n        if (fastForward) this.fastForwardEvent('change-child', { fullKey: this.fullKey, value: this.value })\n        this.$emit('change', this.value)\n        this.changed = false\n      })\n    },\n    input(value, initial = false, fastForward = true) {\n      if (Array.isArray(value) && this.separator) value = value.join(this.separator)\n      if (value === null || value === undefined) {\n        if (this.fullSchema.nullable) {\n          if (this.value !== null) {\n            this.changed = true\n            if (fastForward) this.fastForwardEvent('input-child', { fullKey: this.fullKey, value: null, oldValue: this.value })\n            this.$emit('input', null)\n          } else if (initial) {\n            if (fastForward) this.fastForwardEvent('input-child', { fullKey: this.fullKey, value: null, oldValue: this.value })\n            this.$emit('input', null)\n          }\n        } else {\n          if (this.value !== undefined) {\n            this.changed = true\n            if (fastForward) this.fastForwardEvent('input-child', { fullKey: this.fullKey, value: undefined, oldValue: this.value })\n            this.$emit('input', undefined)\n          }\n        }\n      } else {\n        if (!deepEqual(value, this.value)) {\n          this.changed = true\n          // console.log(this.fullKey, isCyclic(value), value)\n          if (fastForward) this.fastForwardEvent('input-child', { fullKey: this.fullKey, value, oldValue: this.value })\n          this.$emit('input', value)\n        }\n      }\n    },\n    fixValueType(value, schema) {\n      if ([null, undefined].includes(value)) return value\n      if (schema.type === 'string' && typeof value !== 'string') return undefined\n      if (schema.type === 'integer' && typeof value !== 'number') return undefined\n      if (schema.type === 'number' && typeof value !== 'number') return undefined\n      if (schema.type === 'boolean' && typeof value !== 'boolean') return undefined\n      if (schema.type === 'array' && !Array.isArray(value)) return undefined\n      if (schema.type === 'object' && (typeof value !== 'object' || Array.isArray(value))) return undefined\n      return value\n    },\n    defaultValue(schema) {\n      if (schema.readOnly && this.fullOptions.deleteReadOnly) return undefined\n      if (schema.type === 'object' && !schema['x-fromUrl'] && !schema['x-fromData'] && !schema.enum) return {}\n      if (schema.type === 'array') return []\n      return null\n    },\n    fixProperties(value) {\n      if (this.fullSchema.type !== 'object' || !value) return value\n\n      const nonSchematized = (!this.fullSchema.properties || !this.fullSchema.properties.length) && (!Object.keys(this.subModels).length || !!this.fullSchema['x-fromData'] || !!this.fullSchema['x-fromUrl'])\n      if (nonSchematized) return value\n\n      value = { ...value }\n\n      // cleanup extra properties\n      if (this.fullOptions.removeAdditionalProperties || this.fullSchema.additionalProperties === false) {\n        Object.keys(value).forEach(key => {\n          if (!(this.fullSchema.properties || []).find(p => p.key === key)) {\n            // console.log(`Remove key ${this.modelKey}.${key}`)\n            delete value[key]\n          }\n        })\n      }\n\n      // apply submodels\n      Object.keys(this.subModels).forEach(subModel => {\n        Object.keys(this.subModels[subModel]).forEach(key => {\n          // special case, ignore subschema switch key coming from another submodel\n          const localProperty = this.fullSchema.properties.find(p => p.key === key)\n          if (localProperty && localProperty.const) return\n\n          if (value[key] === this.subModels[subModel][key]) return\n          value[key] = this.subModels[subModel][key]\n        })\n      })\n      return value\n    },\n    initFromSchema() {\n      // initiallyDefined will by used in Validatable.js to perform initial validation or not\n      this.initiallyDefined = this.value !== undefined && this.value !== null\n      // we cannot consider empty objects and empty arrays as \"defined\" as they might have been initialized by vjsf itself\n      if (this.fullSchema.type === 'array') this.initiallyDefined = !!(this.value && this.value.length)\n      if (this.fullSchema.type === 'object') this.initiallyDefined = !!(this.value && Object.keys(this.value).length)\n\n      // console.log('Init from schema', this.modelKey)\n      if (this.fullSchema.readOnly && this.fullOptions.deleteReadOnly) {\n        return this.input(undefined)\n      }\n      let value = this.value\n\n      // create empty objects\n      if (this.fullSchema.type === 'object' && [undefined, null].includes(value) && !this.isSelectProp) {\n        value = {}\n      }\n      // in the special case of objects based on select remove empty objects\n      if (this.fullSchema.type === 'object' && this.isSelectProp && value && Object.keys(value).length === 0) {\n        value = undefined\n      }\n\n      // const always wins\n      if (this.fullSchema.const !== undefined) value = this.fullSchema.const\n      this.initSelectProp(value)\n      this.initObjectContainer(value)\n      // Cleanup arrays of empty items\n      if (this.fullSchema.type === 'array') {\n        value = this.value.filter(item => ![undefined, null].includes(item))\n      }\n      return this.input(this.fixProperties(value), true)\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}