{"ast":null,"code":"import _toConsumableArray from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _createForOfIteratorHelper from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _defineProperty from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _typeof from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.filter.js\";\n// Some util functions around select components preparation to reduce size of the component\nimport { deepEqual } from 'fast-equals';\nvar selectUtils = {};\nexport default selectUtils;\n\nselectUtils.fetchRawItems = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(fullOptions, fullSchema, fromUrl, q) {\n    var url, res, body, items;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            url = fromUrl.replace('{q}', encodeURIComponent(q || ''));\n            _context.next = 3;\n            return fullOptions.httpLib.get(url, fullOptions.httpOptions);\n\n          case 3:\n            res = _context.sent;\n            body = res.data || res.body;\n            items = fullSchema['x-itemsProp'] ? body[fullSchema['x-itemsProp']] : body;\n\n            if (Array.isArray(items)) {\n              _context.next = 8;\n              break;\n            }\n\n            throw new Error(\"Result of http fetch \".concat(url, \" is not an array\"));\n\n          case 8:\n            return _context.abrupt(\"return\", items);\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}(); // from raw data to items usable in select components\n\n\nselectUtils.getSelectItems = function (rawSelectItems, fullSchema, itemKey, itemIcon) {\n  var selectItems = [];\n\n  if (!rawSelectItems) {// nothing to do\n  } else if (fullSchema.type === 'object' && fullSchema.properties && Object.keys(fullSchema.properties).length || fullSchema.type === 'array' && fullSchema.items && fullSchema.items.type === 'object' && fullSchema.items.properties && Object.keys(fullSchema.items.properties).length) {\n    var keys = fullSchema.properties ? fullSchema.properties.map(function (p) {\n      return p.key;\n    }) : Object.keys(fullSchema.items.properties);\n    rawSelectItems.forEach(function (item) {\n      var filteredItem = {};\n      keys.forEach(function (key) {\n        var property = fullSchema.properties ? fullSchema.properties.find(function (p) {\n          return p.key === key;\n        }) : fullSchema.items.properties[key];\n\n        if (item[key] !== undefined) {\n          filteredItem[key] = item[key]; // special case as seen in _prefilled_array_wrong_type.js\n\n          if (property.type === 'string') filteredItem[key] = '' + filteredItem[key];\n        }\n\n        if ('default' in property && key in filteredItem) filteredItem[key] = property.default;\n        if ('const' in property) filteredItem[key] = property.const;\n      });\n      selectItems.push(filteredItem);\n    });\n  } else {\n    rawSelectItems.forEach(function (item) {\n      if (_typeof(item) === 'object') {\n        selectItems.push(item);\n      } else {\n        var itemObject = _defineProperty({}, itemKey, item);\n\n        if (itemIcon) itemObject[itemIcon] = item;\n        selectItems.push(itemObject);\n      }\n    });\n  }\n\n  return selectItems;\n};\n\nvar matchItem = function matchItem(selectItem, item, itemKey) {\n  if ([null, undefined].includes(selectItem)) return false;\n  if ([null, undefined].includes(item)) return false;\n  return deepEqual(selectItem[itemKey], item[itemKey]);\n}; // TODO: this is not very rigorous because we have no way of knowing that the stored value will be properly\n// matched with a simple \"q\" params.. but it kinda gets the job done.. let's think about it some more at some point in the future\n\n\nvar missingValuesCache = [];\n\nvar fetchMissingValue = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(fullOptions, fullSchema, itemKey, fromUrl, value) {\n    var valueFromCache, rawItems, result;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            valueFromCache = missingValuesCache.find(function (cv) {\n              return deepEqual(cv.key, [itemKey, fromUrl, value]);\n            });\n\n            if (!valueFromCache) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", valueFromCache.result || value);\n\n          case 3:\n            _context2.next = 5;\n            return selectUtils.fetchRawItems(fullOptions, fullSchema, fromUrl, value[itemKey]);\n\n          case 5:\n            rawItems = _context2.sent;\n            result = rawItems.find(function (item) {\n              return matchItem(item, value, itemKey);\n            });\n            missingValuesCache.push({\n              key: [itemKey, fromUrl, value],\n              result: result\n            });\n            return _context2.abrupt(\"return\", result || value);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fetchMissingValue(_x5, _x6, _x7, _x8, _x9) {\n    return _ref2.apply(this, arguments);\n  };\n}(); // add the current value to the select items so that they can be displayed\n\n\nselectUtils.fillSelectItems = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(fullOptions, fullSchema, value, selectItems, itemKey, itemTitle, fromUrl, returnObject) {\n    var _iterator, _step, _loop;\n\n    return _regeneratorRuntime().wrap(function _callee3$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (value) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\");\n\n          case 2:\n            if (!Array.isArray(value)) {\n              _context4.next = 21;\n              break;\n            }\n\n            _iterator = _createForOfIteratorHelper(value.map(function (item) {\n              return item;\n            }).reverse());\n            _context4.prev = 4;\n            _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n              var val;\n              return _regeneratorRuntime().wrap(function _loop$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      val = _step.value;\n                      if (!returnObject) val = _defineProperty({}, itemKey, val);\n\n                      if (selectItems.find(function (selectItem) {\n                        return matchItem(selectItem, val, itemKey);\n                      })) {\n                        _context3.next = 8;\n                        break;\n                      }\n\n                      if (!(!returnObject && fromUrl)) {\n                        _context3.next = 7;\n                        break;\n                      }\n\n                      _context3.next = 6;\n                      return fetchMissingValue(fullOptions, fullSchema, itemKey, fromUrl, val);\n\n                    case 6:\n                      val = _context3.sent;\n\n                    case 7:\n                      selectItems.push(val);\n\n                    case 8:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              }, _loop);\n            });\n\n            _iterator.s();\n\n          case 7:\n            if ((_step = _iterator.n()).done) {\n              _context4.next = 11;\n              break;\n            }\n\n            return _context4.delegateYield(_loop(), \"t0\", 9);\n\n          case 9:\n            _context4.next = 7;\n            break;\n\n          case 11:\n            _context4.next = 16;\n            break;\n\n          case 13:\n            _context4.prev = 13;\n            _context4.t1 = _context4[\"catch\"](4);\n\n            _iterator.e(_context4.t1);\n\n          case 16:\n            _context4.prev = 16;\n\n            _iterator.f();\n\n            return _context4.finish(16);\n\n          case 19:\n            _context4.next = 28;\n            break;\n\n          case 21:\n            if (!returnObject) value = _defineProperty({}, itemKey, value);\n\n            if (selectItems.find(function (selectItem) {\n              return matchItem(selectItem, value, itemKey);\n            })) {\n              _context4.next = 28;\n              break;\n            }\n\n            if (!(!returnObject && fromUrl)) {\n              _context4.next = 27;\n              break;\n            }\n\n            _context4.next = 26;\n            return fetchMissingValue(fullOptions, fullSchema, itemKey, fromUrl, value);\n\n          case 26:\n            value = _context4.sent;\n\n          case 27:\n            selectItems.push(value);\n\n          case 28:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee3, null, [[4, 13, 16, 19]]);\n  }));\n\n  return function (_x10, _x11, _x12, _x13, _x14, _x15, _x16, _x17) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nselectUtils.fillList = function (fullSchema, value, selectItems, itemKey) {\n  if (!value) return;\n  if (!selectItems.length) return [];\n  value = _toConsumableArray(value); // Prefill the lists (not actual select component, but an array instead)\n\n  selectItems.forEach(function (selectItem) {\n    if (!value.find(function (modelItem) {\n      return matchItem(selectItem, modelItem, itemKey);\n    })) {\n      value.push(selectItem);\n    }\n  }); // also remove deprecated items\n\n  value.forEach(function (item, i) {\n    if (!selectItems.find(function (selectItem) {\n      return matchItem(selectItem, item, itemKey);\n    })) {\n      value[i] = null;\n    }\n  });\n  return value.filter(function (item) {\n    return !!item;\n  });\n};\n\nselectUtils.isOneOfSelect = function (fullSchema) {\n  if (!fullSchema) return;\n  if (fullSchema.type === 'array' && fullSchema.items && ['string', 'integer', 'number'].includes(fullSchema.items.type) && (fullSchema.items.oneOf || fullSchema.items.anyOf)) return true;\n  if (['string', 'integer', 'number'].includes(fullSchema.type) && fullSchema.oneOf && fullSchema.oneOf[0] && fullSchema.oneOf[0].const !== undefined) return true;\n  if (['string', 'integer', 'number'].includes(fullSchema.type) && fullSchema.anyOf && fullSchema.anyOf[0] && fullSchema.anyOf[0].const !== undefined) return true;\n  return false;\n}; // get an object title if x-itemTitles is defined, handle direct values or values matched to a label through a oneOf/anyof\n\n\nselectUtils.getObjectTitle = function (item, itemTitle, fullSchema) {\n  if (!itemTitle) return null;\n  var titlePropertySchema = fullSchema.items && fullSchema.items.properties && fullSchema.items.properties[itemTitle];\n\n  if (titlePropertySchema) {\n    var oneOfSelect = selectUtils.isOneOfSelect(titlePropertySchema);\n\n    if (oneOfSelect) {\n      var of = titlePropertySchema.anyOf || titlePropertySchema.oneOf;\n      var ofItem = of.find(function (ofItem) {\n        return ofItem.const === item[itemTitle] || ofItem.enum && ofItem.enum[0] === item[itemTitle];\n      });\n      if (ofItem) return ofItem.title;\n    }\n  }\n\n  if (fullSchema.items && (fullSchema.items.oneOf || fullSchema.items.anyOf)) {\n    var _of = fullSchema.items.oneOf || fullSchema.items.anyOf;\n\n    var props = _of[0].properties;\n    var key = Object.keys(props).find(function (p) {\n      return !!props[p].const;\n    });\n\n    var _ofItem = _of.find(function (ofItem) {\n      return ofItem.properties[key].const === item[itemTitle];\n    });\n\n    if (_ofItem) return _ofItem.title;\n  }\n\n  return item[itemTitle];\n};","map":{"version":3,"names":["deepEqual","selectUtils","fetchRawItems","fullOptions","fullSchema","fromUrl","q","url","replace","encodeURIComponent","httpLib","get","httpOptions","res","body","data","items","Array","isArray","Error","getSelectItems","rawSelectItems","itemKey","itemIcon","selectItems","type","properties","Object","keys","length","map","p","key","forEach","item","filteredItem","property","find","undefined","default","const","push","itemObject","matchItem","selectItem","includes","missingValuesCache","fetchMissingValue","value","valueFromCache","cv","result","rawItems","fillSelectItems","itemTitle","returnObject","reverse","val","fillList","modelItem","i","filter","isOneOfSelect","oneOf","anyOf","getObjectTitle","titlePropertySchema","oneOfSelect","of","ofItem","enum","title","props"],"sources":["C:/Users/nam/OneDrive/Máy tính/New folder/node_modules/@koumoul/vjsf/lib/utils/select.js"],"sourcesContent":["// Some util functions around select components preparation to reduce size of the component\nimport { deepEqual } from 'fast-equals'\n\nconst selectUtils = {}\nexport default selectUtils\n\nselectUtils.fetchRawItems = async (fullOptions, fullSchema, fromUrl, q) => {\n  const url = fromUrl.replace('{q}', encodeURIComponent(q || ''))\n  const res = await fullOptions.httpLib.get(url, fullOptions.httpOptions)\n  const body = res.data || res.body\n  const items = fullSchema['x-itemsProp'] ? body[fullSchema['x-itemsProp']] : body\n  if (!Array.isArray(items)) throw new Error(`Result of http fetch ${url} is not an array`)\n  return items\n}\n\n// from raw data to items usable in select components\nselectUtils.getSelectItems = (rawSelectItems, fullSchema, itemKey, itemIcon) => {\n  const selectItems = []\n\n  if (!rawSelectItems) {\n    // nothing to do\n  } else if (\n    (fullSchema.type === 'object' && fullSchema.properties && Object.keys(fullSchema.properties).length) ||\n    (fullSchema.type === 'array' && fullSchema.items && fullSchema.items.type === 'object' && fullSchema.items.properties && Object.keys(fullSchema.items.properties).length)\n  ) {\n    const keys = fullSchema.properties ? fullSchema.properties.map(p => p.key) : Object.keys(fullSchema.items.properties)\n    rawSelectItems.forEach(item => {\n      const filteredItem = {}\n      keys.forEach(key => {\n        const property = fullSchema.properties ? fullSchema.properties.find(p => p.key === key) : fullSchema.items.properties[key]\n        if (item[key] !== undefined) {\n          filteredItem[key] = item[key]\n          // special case as seen in _prefilled_array_wrong_type.js\n          if (property.type === 'string') filteredItem[key] = '' + filteredItem[key]\n        }\n        if ('default' in property && key in filteredItem) filteredItem[key] = property.default\n        if ('const' in property) filteredItem[key] = property.const\n      })\n      selectItems.push(filteredItem)\n    })\n  } else {\n    rawSelectItems.forEach(item => {\n      if (typeof item === 'object') {\n        selectItems.push(item)\n      } else {\n        const itemObject = { [itemKey]: item }\n        if (itemIcon) itemObject[itemIcon] = item\n        selectItems.push(itemObject)\n      }\n    })\n  }\n  return selectItems\n}\n\nconst matchItem = (selectItem, item, itemKey) => {\n  if ([null, undefined].includes(selectItem)) return false\n  if ([null, undefined].includes(item)) return false\n  return deepEqual(selectItem[itemKey], item[itemKey])\n}\n\n// TODO: this is not very rigorous because we have no way of knowing that the stored value will be properly\n// matched with a simple \"q\" params.. but it kinda gets the job done.. let's think about it some more at some point in the future\nconst missingValuesCache = []\nconst fetchMissingValue = async (fullOptions, fullSchema, itemKey, fromUrl, value) => {\n  const valueFromCache = missingValuesCache.find(cv => deepEqual(cv.key, [itemKey, fromUrl, value]))\n  if (valueFromCache) return valueFromCache.result || value\n  const rawItems = await selectUtils.fetchRawItems(fullOptions, fullSchema, fromUrl, value[itemKey])\n  const result = rawItems.find(item => matchItem(item, value, itemKey))\n  missingValuesCache.push({ key: [itemKey, fromUrl, value], result })\n  return result || value\n}\n\n// add the current value to the select items so that they can be displayed\nselectUtils.fillSelectItems = async (fullOptions, fullSchema, value, selectItems, itemKey, itemTitle, fromUrl, returnObject) => {\n  if (!value) return\n  if (Array.isArray(value)) {\n    for (let val of value.map(item => item).reverse()) {\n      if (!returnObject) val = { [itemKey]: val }\n      if (!selectItems.find(selectItem => matchItem(selectItem, val, itemKey))) {\n        if (!returnObject && fromUrl) val = await fetchMissingValue(fullOptions, fullSchema, itemKey, fromUrl, val)\n        selectItems.push(val)\n      }\n    }\n  } else {\n    if (!returnObject) value = { [itemKey]: value }\n    if (!selectItems.find(selectItem => matchItem(selectItem, value, itemKey))) {\n      if (!returnObject && fromUrl) value = await fetchMissingValue(fullOptions, fullSchema, itemKey, fromUrl, value)\n      selectItems.push(value)\n    }\n  }\n}\n\nselectUtils.fillList = (fullSchema, value, selectItems, itemKey) => {\n  if (!value) return\n  if (!selectItems.length) return []\n  value = [...value]\n  // Prefill the lists (not actual select component, but an array instead)\n  selectItems.forEach(selectItem => {\n    if (!value.find(modelItem => matchItem(selectItem, modelItem, itemKey))) {\n      value.push(selectItem)\n    }\n  })\n  // also remove deprecated items\n  value.forEach((item, i) => {\n    if (!selectItems.find(selectItem => matchItem(selectItem, item, itemKey))) {\n      value[i] = null\n    }\n  })\n  return value.filter(item => !!item)\n}\n\nselectUtils.isOneOfSelect = (fullSchema) => {\n  if (!fullSchema) return\n  if (fullSchema.type === 'array' && fullSchema.items && ['string', 'integer', 'number'].includes(fullSchema.items.type) && (fullSchema.items.oneOf || fullSchema.items.anyOf)) return true\n  if (['string', 'integer', 'number'].includes(fullSchema.type) && fullSchema.oneOf && fullSchema.oneOf[0] && fullSchema.oneOf[0].const !== undefined) return true\n  if (['string', 'integer', 'number'].includes(fullSchema.type) && fullSchema.anyOf && fullSchema.anyOf[0] && fullSchema.anyOf[0].const !== undefined) return true\n  return false\n}\n\n// get an object title if x-itemTitles is defined, handle direct values or values matched to a label through a oneOf/anyof\nselectUtils.getObjectTitle = (item, itemTitle, fullSchema) => {\n  if (!itemTitle) return null\n  const titlePropertySchema = fullSchema.items && fullSchema.items.properties && fullSchema.items.properties[itemTitle]\n  if (titlePropertySchema) {\n    const oneOfSelect = selectUtils.isOneOfSelect(titlePropertySchema)\n    if (oneOfSelect) {\n      const of = titlePropertySchema.anyOf || titlePropertySchema.oneOf\n      const ofItem = of.find(ofItem => ofItem.const === item[itemTitle] || (ofItem.enum && ofItem.enum[0] === item[itemTitle]))\n      if (ofItem) return ofItem.title\n    }\n  }\n\n  if (fullSchema.items && (fullSchema.items.oneOf || fullSchema.items.anyOf)) {\n    const of = fullSchema.items.oneOf || fullSchema.items.anyOf\n    const props = of[0].properties\n    const key = Object.keys(props).find(p => !!props[p].const)\n    const ofItem = of.find(ofItem => ofItem.properties[key].const === item[itemTitle])\n    if (ofItem) return ofItem.title\n  }\n  return item[itemTitle]\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}