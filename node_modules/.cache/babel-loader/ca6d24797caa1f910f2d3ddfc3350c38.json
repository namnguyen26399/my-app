{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/nam/OneDrive/M\\xE1y t\\xEDnh/New folder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\nimport moment from \"moment\";\nimport globalService from \"@/services/global.service\";\nimport administratorAPI from \"../administrator.api\";\nimport CreateOTP from \"./CreateOTP.vue\";\nexport default {\n  name: \"ListOTP\",\n  components: {\n    DeleteDialogVue: DeleteDialogVue,\n    BreadcrumbsVue: BreadcrumbsVue,\n    CreateOTP: CreateOTP\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      user_current: this.getUserInfo(),\n      showPicker: false,\n      showModifyDatePicker: false,\n      showExpireDate: false,\n      dateFormat: \"DD/MM/yyyy\",\n      s_expiredate: null,\n      s_request: this.$t(\"label.show_all\"),\n      createdDate: null,\n      s_modifiedDate: null,\n      s_modifiedName: \"\",\n      createdName: \"\",\n      isActive: this.$t(\"label.show_all\"),\n      filterItems: [this.$t(\"label.show_all\"), this.$t(\"label.used\"), this.$t(\"label.unused\")],\n      s_otpCode: \"\",\n      headers: [{\n        text: \"Mã OTP\",\n        value: \"oPTCode\",\n        filter: function filter(value) {\n          if (!_this.s_otpCode.trim()) return true;\n          if (!value) return;\n          return _this.nonAccentVietnamese(value).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.s_otpCode).toLocaleUpperCase().trim());\n        }\n      }, {\n        text: \"Yêu cầu\",\n        value: \"requestData\",\n        filter: function filter(value) {\n          if (_this.s_request == _this.$t(\"label.show_all\") || !value) return true;\n          return value.filter(function (entry) {\n            _this.nonAccentVietnamese(entry.requestName).toLocaleUpperCase().includes(_this.nonAccentVietnamese(_this.s_request).toLocaleUpperCase().trim());\n          }).length;\n        }\n      }, {\n        text: this.$t(\"label.expire_date\"),\n        value: \"expiryDate\",\n        formatter: function formatter(x) {\n          return x ? moment(x).format(_this.dateFormat) : null;\n        },\n        filter: function filter(value) {\n          if (!_this.s_expiredate) return true;\n          return value.includes(_this.s_expiredate);\n        }\n      }, {\n        text: this.$t(\"label.modified_name\"),\n        value: \"modifiedName\",\n        filter: function filter(value) {\n          if (!_this.modifiedDate) return true;\n          return value.includes(_this.s_modifiedName);\n        }\n      }, {\n        text: this.$t(\"label.modified_date\"),\n        value: \"modifiedate\",\n        formatter: function formatter(x) {\n          return x ? moment(x).format(_this.dateFormat) : null;\n        },\n        filter: function filter(value) {\n          if (!_this.s_modifiedDate) return true;\n          return value.includes(_this.s_modifiedDate);\n        }\n      }, {\n        text: this.$t(\"label.is_active\"),\n        value: \"isActive\",\n        filter: function filter(value) {\n          if (_this.isActive == _this.$t(\"label.used\")) {\n            return value == true;\n          }\n\n          if (_this.isActive == _this.$t(\"label.unused\")) {\n            return value == false;\n          }\n\n          return true;\n        }\n      }, {\n        // width: \"6rem\",\n        text: this.$t(\"label.manipulation\"),\n        value: \"actions\",\n        sortable: false\n      }],\n      defaultItem: {\n        createdDate: null,\n        createdName: \"\",\n        createdOrgName: \"\",\n        createdRankName: \"\",\n        id: 0,\n        isActive: false,\n        expiryDate: null,\n        isCustomerSign: false,\n        isDelete: false,\n        link: \"\",\n        modifiedName: \"\",\n        modifiedate: null,\n        numberDownload: 0,\n        numberPrint: 0,\n        numberView: 0,\n        oPTCode: \"\",\n        requestData: null\n      },\n      editedItem: {\n        createdDate: null,\n        createdName: \"\",\n        createdOrgName: \"\",\n        createdRankName: \"\",\n        id: 0,\n        isActive: false,\n        expiryDate: null,\n        isCustomerSign: false,\n        isDelete: false,\n        link: \"\",\n        modifiedName: \"\",\n        modifiedate: null,\n        numberDownload: 0,\n        numberPrint: 0,\n        numberView: 0,\n        oPTCode: \"\",\n        requestData: null\n      },\n      listOTP: [],\n      dialog: {\n        edit: false,\n        delete: false\n      },\n      selected: [],\n      editedIndex: -1,\n      isDeleting: false,\n      filterRequest: []\n    };\n  },\n  created: function created() {\n    var _this2 = this;\n\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this2.$Progress.start();\n\n              _this2.getAllOTP();\n\n              _this2.getAllRequest();\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  mounted: function mounted() {\n    this.$Progress.finish();\n  },\n  computed: {\n    formatModifyDateFns: function formatModifyDateFns() {\n      return this.s_modifiedDate ? moment(this.s_modifiedDate).format(this.dateFormat) : \"\";\n    },\n    formatExpireDateFns: function formatExpireDateFns() {\n      return this.s_expiredate ? moment(this.s_expiredate).format(this.dateFormat) : \"\";\n    }\n  },\n  watch: {\n    \"dialog.edit\": function dialogEdit(val) {\n      if (!val) {\n        this.getAllOTP();\n        this.editedItem = Object.assign({}, this.defaultItem);\n      }\n    }\n  },\n  methods: {\n    getAllOTP: function getAllOTP() {\n      var _this3 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllOTP());\n\n              case 3:\n                response = _context2.sent;\n\n                if (!(!response || !response.state)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", _this3.toastError(_this3.$t(\"error.load\")));\n\n              case 6:\n                _this3.listOTP = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n                _this3.sortList(_this3.listOTP);\n\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n\n                _this3.toastError(_this3.$t(\"error.load\"));\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 10]]);\n      }))();\n    },\n    getAllRequest: function getAllRequest() {\n      var _this4 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return globalService.getData_Async(administratorAPI.API_GetAllRequest());\n\n              case 3:\n                response = _context3.sent;\n\n                if (!(!response || !response.state)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _this4.toastError(_this4.$t(\"error.load\")));\n\n              case 6:\n                _this4.filterRequest = response.data.filter(function (entry) {\n                  return !entry.isDelete;\n                });\n\n                _this4.filterRequest.unshift(_this4.$t(\"label.show_all\"));\n\n                _context3.next = 13;\n                break;\n\n              case 10:\n                _context3.prev = 10;\n                _context3.t0 = _context3[\"catch\"](0);\n\n                _this4.toastError(_this4.$t(\"error.load\"));\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[0, 10]]);\n      }))();\n    },\n    sortList: function sortList(arr) {\n      return arr.sort(function (a, b) {\n        return moment(b.createdDate).toDate().getTime() - moment(a.createdDate).toDate().getTime();\n      });\n    },\n    onCloseDialog: function onCloseDialog() {\n      var _this5 = this;\n\n      this.$nextTick(function () {\n        _this5.editedItem = Object.assign({}, _this5.defaultItem);\n        _this5.editedIndex = -1;\n      });\n      this.dialog.edit = false;\n      this.dialog.delete = false;\n    },\n    onConfirmDelete: function onConfirmDelete(value) {\n      if (!value) {\n        this.onCloseDialog();\n      } else {\n        if (this.selected) {\n          this.deleteAllConfirm();\n        }\n      }\n    },\n    deleteAll: function deleteAll() {\n      if (this.selected.length > 0) {\n        this.dialog.delete = true;\n      } else {\n        this.toastError(this.$t(\"label.no_selected\"));\n      }\n    },\n    deleteAllConfirm: function deleteAllConfirm() {\n      var _this6 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!_this6.isDeleting) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 2:\n                _this6.isDeleting = true;\n                _this6.selected = _this6.selected.map(function (x) {\n                  x.isDelete = true;\n                  return x;\n                });\n                _context4.prev = 4;\n                _context4.next = 7;\n                return globalService.postData_Async(administratorAPI.API_DeleteAllOTP(), _this6.selected);\n\n              case 7:\n                response = _context4.sent;\n\n                if (!response || !response.state) {\n                  _this6.isDeleting = false;\n\n                  _this6.toastError(_this6.$t(\"message.delete_error\"));\n                } else {\n                  _this6.toastSuccess(_this6.$t(\"message.delete_success\"));\n                }\n\n                _context4.next = 14;\n                break;\n\n              case 11:\n                _context4.prev = 11;\n                _context4.t0 = _context4[\"catch\"](4);\n\n                _this6.toastError(_this6.$t(\"error.load\"));\n\n              case 14:\n                _context4.prev = 14;\n                _this6.selected = [];\n                _this6.isDeleting = false;\n\n                _this6.getAllOTP();\n\n                _this6.close();\n\n                return _context4.finish(14);\n\n              case 20:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[4, 11, 14, 20]]);\n      }))();\n    },\n    close: function close() {\n      var _this7 = this;\n\n      this.$nextTick(function () {\n        _this7.editedItem = Object.assign({}, _this7.defaultItem);\n        _this7.editedIndex = -1;\n      });\n      this.dialog.edit = false;\n      this.dialog.delete = false;\n    },\n    editItem: function editItem(item) {\n      this.editedIndex = this.listOTP.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog.edit = true;\n    },\n    deleteItem: function deleteItem(item) {\n      this.selected = [item];\n      this.editedItem = Object.assign({}, item);\n      this.dialog.delete = true;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA,eADA;EAEAC;IACAC,gCADA;IAEAC,8BAFA;IAGAC;EAHA,CAFA;EAOAC,IAPA,kBAOA;IAAA;;IACA;MACAC,gCADA;MAEAC,iBAFA;MAGAC,2BAHA;MAIAC,qBAJA;MAKAC,wBALA;MAMAC,kBANA;MAOAC,oCAPA;MAQAC,iBARA;MASAC,oBATA;MAUAC,kBAVA;MAWAC,eAXA;MAYAC,mCAZA;MAaAC,cACA,yBADA,EAEA,qBAFA,EAGA,uBAHA,CAbA;MAkBAC,aAlBA;MAmBAC,UACA;QACAC,cADA;QAEAC,gBAFA;QAGAC;UACA;UACA;UACA,wCACAC,iBADA,GAEAC,QAFA,CAGA,2CACAD,iBADA,GAEAE,IAFA,EAHA;QAOA;MAbA,CADA,EAgBA;QACAL,eADA;QAEAC,oBAFA;QAGAC;UACA,IACA,iDACA,MAFA,EAIA;UACA;YACA,6CACAC,iBADA,GAEAC,QAFA,CAGA,2CACAD,iBADA,GAEAE,IAFA,EAHA;UAOA,CARA,EAQAC,MARA;QASA;MAlBA,CAhBA,EAqCA;QACAN,kCADA;QAEAC,mBAFA;QAGAM;UAAA,OACAC,6CADA;QAAA,CAHA;QAKAN;UACA;UACA;QACA;MARA,CArCA,EA+CA;QACAF,oCADA;QAEAC,qBAFA;QAIAC;UACA;UACA;QACA;MAPA,CA/CA,EAwDA;QACAF,oCADA;QAEAC,oBAFA;QAGAM;UAAA,OACAC,6CADA;QAAA,CAHA;QAKAN;UACA;UACA;QACA;MARA,CAxDA,EAkEA;QACAF,gCADA;QAEAC,iBAFA;QAGAC;UACA;YACA;UACA;;UACA;YACA;UACA;;UACA;QACA;MAXA,CAlEA,EAgFA;QACA;QACAF,mCAFA;QAGAC,gBAHA;QAIAQ;MAJA,CAhFA,CAnBA;MA0GAC;QACAlB,iBADA;QAEAG,eAFA;QAGAgB,kBAHA;QAIAC,mBAJA;QAKAC,KALA;QAMAjB,eANA;QAOAkB,gBAPA;QAQAC,qBARA;QASAC,eATA;QAUAC,QAVA;QAWAC,gBAXA;QAYAC,iBAZA;QAaAC,iBAbA;QAcAC,cAdA;QAeAC,aAfA;QAgBAC,WAhBA;QAiBAC;MAjBA,CA1GA;MA6HAC;QACAjC,iBADA;QAEAG,eAFA;QAGAgB,kBAHA;QAIAC,mBAJA;QAKAC,KALA;QAMAjB,eANA;QAOAkB,gBAPA;QAQAC,qBARA;QASAC,eATA;QAUAC,QAVA;QAWAC,gBAXA;QAYAC,iBAZA;QAaAC,iBAbA;QAcAC,cAdA;QAeAC,aAfA;QAgBAC,WAhBA;QAiBAC;MAjBA,CA7HA;MAgJAE,WAhJA;MAiJAC;QACAC,WADA;QAEAC;MAFA,CAjJA;MAqJAC,YArJA;MAsJAC,eAtJA;MAuJAC,iBAvJA;MAwJAC;IAxJA;EA0JA,CAlKA;EAmKAC,OAnKA,qBAmKA;IAAA;;IAAA;MAAA;QAAA;UAAA;YAAA;cACA;;cACA;;cACA;;YAHA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EAIA,CAvKA;EAwKAC,OAxKA,qBAwKA;IACA;EACA,CA1KA;EA2KAC;IACAC,mBADA,iCACA;MACA,6BACAC,mDADA,GAEA,EAFA;IAGA,CALA;IAMAC,mBANA,iCAMA;MACA,2BACAD,iDADA,GAEA,EAFA;IAGA;EAVA,CA3KA;EAuLAE;IACA,aADA,sBACAC,GADA,EACA;MACA;QACA;QACA;MACA;IACA;EANA,CAvLA;EA+LAC;IACAC,SADA,uBACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAC,4BACAC,gCADA,CAFA;;cAAA;gBAEAC,QAFA;;gBAAA,MAKA,4BALA;kBAAA;kBAAA;gBAAA;;gBAAA,kCAMA,0CANA;;cAAA;gBAQA;kBACA;gBACA,CAFA;;gBAGA;;gBAXA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAaA;;cAbA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAeA,CAhBA;IAiBAC,aAjBA,2BAiBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAH,4BACAC,oCADA,CAFA;;cAAA;gBAEAC,QAFA;;gBAAA,MAKA,4BALA;kBAAA;kBAAA;gBAAA;;gBAAA,kCAMA,0CANA;;cAAA;gBAQA;kBACA;gBACA,CAFA;;gBAGA;;gBAXA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAaA;;cAbA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAeA,CAhCA;IAiCAE,QAjCA,oBAiCAC,GAjCA,EAiCA;MACA;QACA,OACAX,2CACAA,wCAFA;MAIA,CALA;IAMA,CAxCA;IAyCAY,aAzCA,2BAyCA;MAAA;;MACA;QACA;QACA;MACA,CAHA;MAIA;MACA;IACA,CAhDA;IAiDAC,eAjDA,2BAiDAlD,KAjDA,EAiDA;MACA;QACA;MACA,CAFA,MAEA;QACA;UACA;QACA;MACA;IACA,CAzDA;IA0DAmD,SA1DA,uBA0DA;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAhEA;IAiEAC,gBAjEA,8BAiEA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA,iBADA;kBAAA;kBAAA;gBAAA;;gBAAA;;cAAA;gBAIA;gBACA;kBACA7C;kBACA;gBACA,CAHA;gBALA;gBAAA;gBAAA,OAUAoC,6BACAC,mCADA,EAEA,eAFA,CAVA;;cAAA;gBAUAC,QAVA;;gBAcA;kBACA;;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;;gBAnBA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAqBA;;cArBA;gBAAA;gBAuBA;gBACA;;gBACA;;gBACA;;gBA1BA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IA4BA,CA7FA;IA8FAQ,KA9FA,mBA8FA;MAAA;;MACA;QACA;QACA;MACA,CAHA;MAIA;MACA;IACA,CArGA;IAsGAC,QAtGA,oBAsGAC,IAtGA,EAsGA;MACA;MACA;MACA;IACA,CA1GA;IA2GAC,UA3GA,sBA2GAD,IA3GA,EA2GA;MACA;MACA;MACA;IACA;EA/GA;AA/LA","names":["name","components","DeleteDialogVue","BreadcrumbsVue","CreateOTP","data","user_current","showPicker","showModifyDatePicker","showExpireDate","dateFormat","s_expiredate","s_request","createdDate","s_modifiedDate","s_modifiedName","createdName","isActive","filterItems","s_otpCode","headers","text","value","filter","toLocaleUpperCase","includes","trim","length","formatter","x","sortable","defaultItem","createdOrgName","createdRankName","id","expiryDate","isCustomerSign","isDelete","link","modifiedName","modifiedate","numberDownload","numberPrint","numberView","oPTCode","requestData","editedItem","listOTP","dialog","edit","delete","selected","editedIndex","isDeleting","filterRequest","created","mounted","computed","formatModifyDateFns","moment","formatExpireDateFns","watch","val","methods","getAllOTP","globalService","administratorAPI","response","getAllRequest","sortList","arr","onCloseDialog","onConfirmDelete","deleteAll","deleteAllConfirm","close","editItem","item","deleteItem"],"sourceRoot":"src/views/modules/administrator/OTP","sources":["ListOTP.vue"],"sourcesContent":["<template>\r\n\t<v-card elevation=\"0\" class=\"p-2\">\r\n\t\t<BreadcrumbsVue />\r\n\t\t<v-data-table\r\n\t\t\tv-model=\"selected\"\r\n\t\t\t:headers=\"headers\"\r\n\t\t\t:items=\"listOTP\"\r\n\t\t\tmulti-sort\r\n\t\t\tshow-select\r\n\t\t\tclass=\"grey lighten-5\"\r\n\t\t\tloading=\"true\"\r\n\t\t\t:loading-text=\"$t('label.loading')\"\r\n\t\t>\r\n\t\t\t<template v-slot:no-data\r\n\t\t\t\t><h1>{{ $t(\"message.no_data\") }}</h1></template\r\n\t\t\t>\r\n\t\t\t<template v-slot:no-results\r\n\t\t\t\t><h1>{{ $t(\"message.no_results\") }}</h1>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.isActive`]=\"{ item }\">\r\n\t\t\t\t<v-simple-checkbox\r\n\t\t\t\t\tv-model=\"item.isActive\"\r\n\t\t\t\t\tdisabled\r\n\t\t\t\t></v-simple-checkbox>\r\n\t\t\t</template>\r\n\t\t\t<template\r\n\t\t\t\tv-for=\"header in headers.filter((header) =>\r\n\t\t\t\t\theader.hasOwnProperty('formatter'),\r\n\t\t\t\t)\"\r\n\t\t\t\tv-slot:[`item.${header.value}`]=\"{ headers, value }\"\r\n\t\t\t>\r\n\t\t\t\t{{ header.formatter(value) }}\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`item.requestData`]=\"{ item }\">\r\n\t\t\t\t<template>\r\n\t\t\t\t\t<v-chip\r\n\t\t\t\t\t\tv-for=\"request of item.requestData\"\r\n\t\t\t\t\t\t:key=\"request.id\"\r\n\t\t\t\t\t\tv-bind=\"item\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ request.requestDataName }}\r\n\t\t\t\t\t</v-chip>\r\n\t\t\t\t</template>\r\n\t\t\t\t<!-- <template v-else>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tv-for=\"(organization, key) of item.organizations\"\r\n\t\t\t\t\t\tv-bind=\"item\"\r\n\t\t\t\t\t\t:key=\"organization.id\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<v-chip v-if=\"key < 1\">\r\n\t\t\t\t\t\t\t{{ organization.organizationName }}\r\n\t\t\t\t\t\t</v-chip>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t\t<span\r\n\t\t\t\t\tv-if=\"item.organizations.length > 2 && !item.showAll\"\r\n\t\t\t\t\t@click=\"toggle_detail(index)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<a href=\"#\"><i>Chi tiết</i></a>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span\r\n\t\t\t\t\tv-if=\"item.organizations.length > 2 && item.showAll\"\r\n\t\t\t\t\t@click=\"toggle_detail(index)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<a href=\"#\"><i>Ẩn</i></a>\r\n\t\t\t\t</span> -->\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:top>\r\n\t\t\t\t<v-toolbar flat>\r\n\t\t\t\t\t<v-dialog v-model=\"dialog.edit\" width=\"40vw\">\r\n\t\t\t\t\t\t<template v-slot:activator=\"{}\">\r\n\t\t\t\t\t\t\t<v-card-title class=\"p-0 w-full\">\r\n\t\t\t\t\t\t\t\t<!-- <v-btn\r\n\t\t\t\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\t\t\t\tdark\r\n\t\t\t\t\t\t\t\t\tclass=\"mb-4 mr-2 rounded-pill\"\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\t\t\t\t\teditedItem = Object.assign(\r\n\t\t\t\t\t\t\t\t\t\t\t{},\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultItem,\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-icon color=\"white\">\r\n\t\t\t\t\t\t\t\t\t\tmdi-plus-circle\r\n\t\t\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"button.create\") }}\r\n\t\t\t\t\t\t\t\t</v-btn> -->\r\n\t\t\t\t\t\t\t\t<v-btn\r\n\t\t\t\t\t\t\t\t\ttext\r\n\t\t\t\t\t\t\t\t\tclass=\"mb-4 mr-2 rounded-pill\"\r\n\t\t\t\t\t\t\t\t\t@click=\"deleteAll\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<v-icon>mdi-trash-can-outline</v-icon>\r\n\t\t\t\t\t\t\t\t\t{{ $t(\"button.delete_all\") }}\r\n\t\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t\t</v-card-title>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<CreateOTP\r\n\t\t\t\t\t\t\t:editedItem=\"editedItem\"\r\n\t\t\t\t\t\t\t@close=\"onCloseDialog\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</v-dialog>\r\n\t\t\t\t\t<v-dialog v-model=\"dialog.delete\" width=\"fit-content\">\r\n\t\t\t\t\t\t<DeleteDialogVue\r\n\t\t\t\t\t\t\t@close=\"onCloseDialog\"\r\n\t\t\t\t\t\t\t@confirmDelete=\"onConfirmDelete\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</v-dialog>\r\n\t\t\t\t</v-toolbar>\r\n\t\t\t</template>\r\n\t\t\t<template v-slot:[`body.prepend`]>\r\n\t\t\t\t<v-divider></v-divider>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"s_otpCode\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\t:label=\"'Mã OTP'\"\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\t\ts_otpCode.trim().length <= 255 ||\r\n\t\t\t\t\t\t\t\t\t$t('error.max_length_255'),\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-select\r\n\t\t\t\t\t\t\tv-model=\"s_request\"\r\n\t\t\t\t\t\t\t:label=\"'Yêu cầu'\"\r\n\t\t\t\t\t\t\t:items=\"filterRequest\"\r\n\t\t\t\t\t\t\titem-text=\"requestName\"\r\n\t\t\t\t\t\t\t:item-value=\"(item) => item.requestName\"\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\t\t></v-select>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-menu\r\n\t\t\t\t\t\t\tv-model=\"showExpireDate\"\r\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\r\n\t\t\t\t\t\t\tmax-width=\"290\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t:value=\"formatExpireDateFns\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.expire_date')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\t\t@click:clear=\"s_expiredate = null\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t\t\tv-model=\"s_expiredate\"\r\n\t\t\t\t\t\t\t\t@change=\"showExpireDate = false\"\r\n\t\t\t\t\t\t\t\tno-title\r\n\t\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\t></v-date-picker>\r\n\t\t\t\t\t\t</v-menu>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"s_modifiedName\"\r\n\t\t\t\t\t\t\ttype=\"string\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.modified_name')\"\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t:rules=\"[\r\n\t\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\t\ts_modifiedName.trim().length <= 255 ||\r\n\t\t\t\t\t\t\t\t\t$t('error.max_length_255'),\r\n\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\tmaxlength=\"255\"\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<v-menu\r\n\t\t\t\t\t\t\tv-model=\"showModifyDatePicker\"\r\n\t\t\t\t\t\t\t:close-on-content-click=\"false\"\r\n\t\t\t\t\t\t\tmax-width=\"290\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<template v-slot:activator=\"{ on, attrs }\">\r\n\t\t\t\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\t\t\t:value=\"formatModifyDateFns\"\r\n\t\t\t\t\t\t\t\t\tclearable\r\n\t\t\t\t\t\t\t\t\t:label=\"$t('label.modified_date')\"\r\n\t\t\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\t\t\treadonly\r\n\t\t\t\t\t\t\t\t\tv-bind=\"attrs\"\r\n\t\t\t\t\t\t\t\t\tv-on=\"on\"\r\n\t\t\t\t\t\t\t\t\t@click:clear=\"s_modifiedDate = null\"\r\n\t\t\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<v-date-picker\r\n\t\t\t\t\t\t\t\tv-model=\"s_modifiedDate\"\r\n\t\t\t\t\t\t\t\t@change=\"showModifyDatePicker = false\"\r\n\t\t\t\t\t\t\t\tno-title\r\n\t\t\t\t\t\t\t\tscrollable\r\n\t\t\t\t\t\t\t></v-date-picker>\r\n\t\t\t\t\t\t</v-menu>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td class=\"w-5\">\r\n\t\t\t\t\t\t<v-select\r\n\t\t\t\t\t\t\tv-model=\"isActive\"\r\n\t\t\t\t\t\t\t:items=\"filterItems\"\r\n\t\t\t\t\t\t\t:label=\"$t('label.is_active')\"\r\n\t\t\t\t\t\t\tclass=\"mt-2\"\r\n\t\t\t\t\t\t\toutlined\r\n\t\t\t\t\t\t\tdense\r\n\t\t\t\t\t\t\twidth=\"20\"\r\n\t\t\t\t\t\t></v-select>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template v-slot:[`item.actions`]=\"{ item }\">\r\n\t\t\t\t<div class=\"d-flex\" style=\"min-width: fit-content\">\r\n\t\t\t\t\t<!-- <v-icon\r\n\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\tclass=\"mr-2\"\r\n\t\t\t\t\t\t@click=\"viewItem(item)\"\r\n\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tmdi-eye\r\n\t\t\t\t\t</v-icon> -->\r\n\t\t\t\t\t<v-icon\r\n\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\tclass=\"mr-2\"\r\n\t\t\t\t\t\t@click=\"editItem(item)\"\r\n\t\t\t\t\t\tcolor=\"blue darken-1\"\r\n\t\t\t\t\t\tdark\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tmdi-pencil\r\n\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t<v-icon small @click=\"deleteItem(item)\" color=\"error\">\r\n\t\t\t\t\t\tmdi-trash-can-outline\r\n\t\t\t\t\t</v-icon>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\nimport DeleteDialogVue from \"@/components/DeleteDialog.vue\";\r\nimport BreadcrumbsVue from \"@/components/Breadcrumbs.vue\";\r\nimport moment from \"moment\";\r\nimport globalService from \"@/services/global.service\";\r\nimport administratorAPI from \"../administrator.api\";\r\nimport CreateOTP from \"./CreateOTP.vue\";\r\nexport default {\r\n\tname: \"ListOTP\",\r\n\tcomponents: {\r\n\t\tDeleteDialogVue,\r\n\t\tBreadcrumbsVue,\r\n\t\tCreateOTP,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuser_current: this.getUserInfo(),\r\n\t\t\tshowPicker: false,\r\n\t\t\tshowModifyDatePicker: false,\r\n\t\t\tshowExpireDate: false,\r\n\t\t\tdateFormat: \"DD/MM/yyyy\",\r\n\t\t\ts_expiredate: null,\r\n\t\t\ts_request: this.$t(\"label.show_all\"),\r\n\t\t\tcreatedDate: null,\r\n\t\t\ts_modifiedDate: null,\r\n\t\t\ts_modifiedName: \"\",\r\n\t\t\tcreatedName: \"\",\r\n\t\t\tisActive: this.$t(\"label.show_all\"),\r\n\t\t\tfilterItems: [\r\n\t\t\t\tthis.$t(\"label.show_all\"),\r\n\t\t\t\tthis.$t(\"label.used\"),\r\n\t\t\t\tthis.$t(\"label.unused\"),\r\n\t\t\t],\r\n\t\t\ts_otpCode: \"\",\r\n\t\t\theaders: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Mã OTP\",\r\n\t\t\t\t\tvalue: \"oPTCode\",\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.s_otpCode.trim()) return true;\r\n\t\t\t\t\t\tif (!value) return;\r\n\t\t\t\t\t\treturn this.nonAccentVietnamese(value)\r\n\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(this.s_otpCode)\r\n\t\t\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t\t\t.trim(),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: \"Yêu cầu\",\r\n\t\t\t\t\tvalue: \"requestData\",\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tthis.s_request == this.$t(\"label.show_all\") ||\r\n\t\t\t\t\t\t\t!value\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\treturn value.filter((entry) => {\r\n\t\t\t\t\t\t\tthis.nonAccentVietnamese(entry.requestName)\r\n\t\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t\t.includes(\r\n\t\t\t\t\t\t\t\t\tthis.nonAccentVietnamese(this.s_request)\r\n\t\t\t\t\t\t\t\t\t\t.toLocaleUpperCase()\r\n\t\t\t\t\t\t\t\t\t\t.trim(),\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}).length;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.expire_date\"),\r\n\t\t\t\t\tvalue: \"expiryDate\",\r\n\t\t\t\t\tformatter: (x) =>\r\n\t\t\t\t\t\tx ? moment(x).format(this.dateFormat) : null,\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.s_expiredate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.s_expiredate);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.modified_name\"),\r\n\t\t\t\t\tvalue: \"modifiedName\",\r\n\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.modifiedDate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.s_modifiedName);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.modified_date\"),\r\n\t\t\t\t\tvalue: \"modifiedate\",\r\n\t\t\t\t\tformatter: (x) =>\r\n\t\t\t\t\t\tx ? moment(x).format(this.dateFormat) : null,\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (!this.s_modifiedDate) return true;\r\n\t\t\t\t\t\treturn value.includes(this.s_modifiedDate);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t(\"label.is_active\"),\r\n\t\t\t\t\tvalue: \"isActive\",\r\n\t\t\t\t\tfilter: (value) => {\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.used\")) {\r\n\t\t\t\t\t\t\treturn value == true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.isActive == this.$t(\"label.unused\")) {\r\n\t\t\t\t\t\t\treturn value == false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t// width: \"6rem\",\r\n\t\t\t\t\ttext: this.$t(\"label.manipulation\"),\r\n\t\t\t\t\tvalue: \"actions\",\r\n\t\t\t\t\tsortable: false,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tdefaultItem: {\r\n\t\t\t\tcreatedDate: null,\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tcreatedOrgName: \"\",\r\n\t\t\t\tcreatedRankName: \"\",\r\n\t\t\t\tid: 0,\r\n\t\t\t\tisActive: false,\r\n\t\t\t\texpiryDate: null,\r\n\t\t\t\tisCustomerSign: false,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tlink: \"\",\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tmodifiedate: null,\r\n\t\t\t\tnumberDownload: 0,\r\n\t\t\t\tnumberPrint: 0,\r\n\t\t\t\tnumberView: 0,\r\n\t\t\t\toPTCode: \"\",\r\n\t\t\t\trequestData: null,\r\n\t\t\t},\r\n\t\t\teditedItem: {\r\n\t\t\t\tcreatedDate: null,\r\n\t\t\t\tcreatedName: \"\",\r\n\t\t\t\tcreatedOrgName: \"\",\r\n\t\t\t\tcreatedRankName: \"\",\r\n\t\t\t\tid: 0,\r\n\t\t\t\tisActive: false,\r\n\t\t\t\texpiryDate: null,\r\n\t\t\t\tisCustomerSign: false,\r\n\t\t\t\tisDelete: false,\r\n\t\t\t\tlink: \"\",\r\n\t\t\t\tmodifiedName: \"\",\r\n\t\t\t\tmodifiedate: null,\r\n\t\t\t\tnumberDownload: 0,\r\n\t\t\t\tnumberPrint: 0,\r\n\t\t\t\tnumberView: 0,\r\n\t\t\t\toPTCode: \"\",\r\n\t\t\t\trequestData: null,\r\n\t\t\t},\r\n\t\t\tlistOTP: [],\r\n\t\t\tdialog: {\r\n\t\t\t\tedit: false,\r\n\t\t\t\tdelete: false,\r\n\t\t\t},\r\n\t\t\tselected: [],\r\n\t\t\teditedIndex: -1,\r\n\t\t\tisDeleting: false,\r\n\t\t\tfilterRequest: [],\r\n\t\t};\r\n\t},\r\n\tasync created() {\r\n\t\tthis.$Progress.start();\r\n\t\tthis.getAllOTP();\r\n\t\tthis.getAllRequest();\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$Progress.finish();\r\n\t},\r\n\tcomputed: {\r\n\t\tformatModifyDateFns() {\r\n\t\t\treturn this.s_modifiedDate\r\n\t\t\t\t? moment(this.s_modifiedDate).format(this.dateFormat)\r\n\t\t\t\t: \"\";\r\n\t\t},\r\n\t\tformatExpireDateFns() {\r\n\t\t\treturn this.s_expiredate\r\n\t\t\t\t? moment(this.s_expiredate).format(this.dateFormat)\r\n\t\t\t\t: \"\";\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\t\"dialog.edit\"(val) {\r\n\t\t\tif (!val) {\r\n\t\t\t\tthis.getAllOTP();\r\n\t\t\t\tthis.editedItem = Object.assign({}, this.defaultItem);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tasync getAllOTP() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllOTP(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state)\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\r\n\t\t\t\tthis.listOTP = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.sortList(this.listOTP);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getAllRequest() {\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.getData_Async(\r\n\t\t\t\t\tadministratorAPI.API_GetAllRequest(),\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state)\r\n\t\t\t\t\treturn this.toastError(this.$t(\"error.load\"));\r\n\r\n\t\t\t\tthis.filterRequest = response.data.filter((entry) => {\r\n\t\t\t\t\treturn !entry.isDelete;\r\n\t\t\t\t});\r\n\t\t\t\tthis.filterRequest.unshift(this.$t(\"label.show_all\"));\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tsortList(arr) {\r\n\t\t\treturn arr.sort((a, b) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tmoment(b.createdDate).toDate().getTime() -\r\n\t\t\t\t\tmoment(a.createdDate).toDate().getTime()\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\tonCloseDialog() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.editedItem = Object.assign({}, this.defaultItem);\r\n\t\t\t\tthis.editedIndex = -1;\r\n\t\t\t});\r\n\t\t\tthis.dialog.edit = false;\r\n\t\t\tthis.dialog.delete = false;\r\n\t\t},\r\n\t\tonConfirmDelete(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tthis.onCloseDialog();\r\n\t\t\t} else {\r\n\t\t\t\tif (this.selected) {\r\n\t\t\t\t\tthis.deleteAllConfirm();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteAll() {\r\n\t\t\tif (this.selected.length > 0) {\r\n\t\t\t\tthis.dialog.delete = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.toastError(this.$t(\"label.no_selected\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync deleteAllConfirm() {\r\n\t\t\tif (this.isDeleting) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.isDeleting = true;\r\n\t\t\tthis.selected = this.selected.map((x) => {\r\n\t\t\t\tx.isDelete = true;\r\n\t\t\t\treturn x;\r\n\t\t\t});\r\n\t\t\ttry {\r\n\t\t\t\tlet response = await globalService.postData_Async(\r\n\t\t\t\t\tadministratorAPI.API_DeleteAllOTP(),\r\n\t\t\t\t\tthis.selected,\r\n\t\t\t\t);\r\n\t\t\t\tif (!response || !response.state) {\r\n\t\t\t\t\tthis.isDeleting = false;\r\n\t\t\t\t\tthis.toastError(this.$t(\"message.delete_error\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.toastSuccess(this.$t(\"message.delete_success\"));\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.toastError(this.$t(\"error.load\"));\r\n\t\t\t} finally {\r\n\t\t\t\tthis.selected = [];\r\n\t\t\t\tthis.isDeleting = false;\r\n\t\t\t\tthis.getAllOTP();\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t},\r\n\t\tclose() {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.editedItem = Object.assign({}, this.defaultItem);\r\n\t\t\t\tthis.editedIndex = -1;\r\n\t\t\t});\r\n\t\t\tthis.dialog.edit = false;\r\n\t\t\tthis.dialog.delete = false;\r\n\t\t},\r\n\t\teditItem(item) {\r\n\t\t\tthis.editedIndex = this.listOTP.indexOf(item);\r\n\t\t\tthis.editedItem = Object.assign({}, item);\r\n\t\t\tthis.dialog.edit = true;\r\n\t\t},\r\n\t\tdeleteItem(item) {\r\n\t\t\tthis.selected = [item];\r\n\t\t\tthis.editedItem = Object.assign({}, item);\r\n\t\t\tthis.dialog.delete = true;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]},"metadata":{},"sourceType":"module"}